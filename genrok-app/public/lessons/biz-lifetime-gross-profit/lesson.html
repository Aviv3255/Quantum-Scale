<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lifetime Gross Profit | Quantum Scale</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.12.16/dist/framer-motion.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', sans-serif; background: #000; overflow: hidden; }
        .slide-container { width: 100vw; height: 100vh; position: relative; }
        .progress-bar { position: fixed; top: 0; left: 0; height: 3px; background: linear-gradient(90deg, #10b981, #34d399); z-index: 100; transition: width 0.3s ease; }
        .nav-button { position: fixed; top: 50%; transform: translateY(-50%); z-index: 50; width: 48px; height: 48px; border-radius: 50%; background: rgba(255,255,255,0.1); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.2); color: white; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.2s; }
        .nav-button:hover { background: rgba(255,255,255,0.2); }
        .nav-button:disabled { opacity: 0.3; cursor: not-allowed; }
        .nav-button.prev { left: 20px; }
        .nav-button.next { right: 20px; }
        .slide-counter { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%); color: rgba(255,255,255,0.5); font-size: 14px; z-index: 50; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .animate-pulse { animation: pulse 2s ease-in-out infinite; }
        @keyframes float { 0%, 100% { transform: translateY(0px); } 50% { transform: translateY(-10px); } }
        .animate-float { animation: float 3s ease-in-out infinite; }
        .green-glow { box-shadow: 0 0 60px rgba(16, 185, 129, 0.3); }
        .text-gradient { background: linear-gradient(135deg, #10b981 0%, #34d399 50%, #10b981 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useCallback } = React;
        const { motion, AnimatePresence } = Motion;

        // ============================================
        // LESSON CONFIGURATION
        // ============================================
        const LESSON_CONFIG = {
            id: 'biz-lifetime-gross-profit',
            title: 'Lifetime Gross Profit',
            description: 'The truth about LTV that nobody tells you',
            accentColor: '#10b981',
            accentColorLight: '#d1fae5',
            duration: '7 min',
            category: 'Business',
            nextLesson: {
                id: 'biz-valley-protocol',
                title: 'The Valley of Despair Protocol'
            }
        };

        // Tool integration
        const datadrewImage = 'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/46.webp';
        const datadrewUrl = 'https://apps.shopify.com/customer-lifetime-value?mref=lsbqcbva';

        // Celebration GIFs for correct answers
        const celebrationGifs = [
            'https://media.giphy.com/media/3o7TKDMYAHqQy8c1Ve/giphy.gif',
            'https://media.giphy.com/media/artj92V8o75VPL7AeQ/giphy.gif',
            'https://media.giphy.com/media/l0MYt5jPR6QX5pnqM/giphy.gif',
            'https://media.giphy.com/media/xT0xezQGU5xCDJuCPe/giphy.gif'
        ];

        // Empathy GIFs for wrong answers
        const empathyGifs = [
            'https://media.giphy.com/media/3o7TKnO6Wve6502iJ2/giphy.gif',
            'https://media.giphy.com/media/l0HlvtIPzPdt2usKs/giphy.gif'
        ];

        // ============================================
        // SLIDE DATA
        // ============================================
        const slides = [
            // Slide 1: Welcome
            {
                type: 'welcome',
                category: LESSON_CONFIG.category,
                title: 'Lifetime Gross Profit',
                subtitle: 'LTV is NOT what you think it is',
                duration: LESSON_CONFIG.duration,
                icon: 'üíé'
            },

            // Slide 2: Hook
            {
                type: 'hook',
                hookType: 'question',
                content: "What if the number you think is your LTV... is actually a LIE?",
                subtext: "Most businesses calculate LTV wrong. And it's killing them."
            },

            // Slide 3: The Common Mistake
            {
                type: 'content',
                title: 'The $1 Million Mistake',
                content: "Everyone calculates LTV as total revenue from a customer. But here's the brutal truth...",
                highlight: "Revenue is NOT profit. LTV measured in revenue is USELESS.",
                icon: '‚ö†Ô∏è'
            },

            // Slide 4: The Real Formula
            {
                type: 'visual',
                visualType: 'formula',
                title: 'The REAL LTV Formula',
                formula: {
                    name: 'Lifetime GROSS Profit',
                    parts: [
                        { label: 'Avg Sale Price', example: '$100' },
                        { operator: '-' },
                        { label: 'Cost to Deliver', example: '$40' },
                        { operator: '√ó' },
                        { label: 'Avg # of Purchases', example: '5' }
                    ],
                    result: { label: 'LGP', value: '$300', highlight: true }
                }
            },

            // Slide 5: Why It Matters
            {
                type: 'content',
                title: 'Why This Destroys Businesses',
                content: "If you use revenue-based LTV, you'll overspend on ads. You'll think you're profitable when you're BLEEDING money.",
                highlight: "Gross profit is the ONLY number that matters.",
                icon: 'ü©∏'
            },

            // Slide 6: Case Study
            {
                type: 'example',
                title: 'The Agency That Went Broke',
                company: 'Real Case Study',
                scenario: 'An agency claimed "5:1 return" on ads. $500k revenue from $100k ad spend.',
                stats: [
                    { label: 'Revenue', value: '$500K', sublabel: 'Looks amazing' },
                    { label: 'COGS', value: '$400K', sublabel: 'The hidden cost' },
                    { label: 'Gross Profit', value: '$100K', sublabel: 'The reality' }
                ],
                insight: "Their REAL return? 1:1. They made $0 after ad spend."
            },

            // Slide 7: The Breakdown
            {
                type: 'visual',
                visualType: 'comparison',
                title: 'Revenue LTV vs Gross Profit LTV',
                left: {
                    title: 'Revenue LTV',
                    items: ['$500 per customer', 'Looks profitable', 'Spend $100 per customer', 'Think you made $400'],
                    mood: 'negative'
                },
                right: {
                    title: 'Gross Profit LTV',
                    items: ['$150 per customer (after COGS)', 'THE REAL NUMBER', 'Spend $100 per customer', 'Actually made $50'],
                    mood: 'positive'
                }
            },

            // Slide 8: What To Include
            {
                type: 'cards',
                title: 'Cost to Deliver = EVERYTHING',
                cards: [
                    { icon: 'üì¶', title: 'Product Cost', description: 'What you pay to source/make it' },
                    { icon: 'üöö', title: 'Shipping', description: 'Getting it to the customer' },
                    { icon: 'üîÑ', title: 'Returns', description: 'Average return rate cost' },
                    { icon: 'üí¨', title: 'Support', description: 'Customer service per order' }
                ]
            },

            // Slide 9: The Real Numbers
            {
                type: 'content',
                title: 'Your REAL Numbers',
                content: "Most stores have 30-50% gross margin. That $100 LTV? It's actually $30-50 in gross profit.",
                highlight: "That's what you can ACTUALLY spend to acquire customers.",
                icon: 'üìä'
            },

            // Slide 10: Tool Integration - DataDrew
            {
                type: 'tool',
                title: 'Track Your REAL LTV',
                toolName: 'DataDrew',
                toolDescription: 'The free app that shows your TRUE customer lifetime gross profit',
                toolImage: datadrewImage,
                toolUrl: datadrewUrl,
                benefits: [
                    'See gross profit per customer, not just revenue',
                    'Segment by acquisition channel',
                    'Find your REAL whales (profit, not revenue)',
                    'Know exactly what you can spend on ads'
                ],
                cta: 'Get DataDrew Free'
            },

            // Slide 11: Quiz
            {
                type: 'quiz',
                question: 'A customer buys $200 worth of products (cost to deliver: $120) twice. What\'s their LGP?',
                options: [
                    { id: 'a', text: '$400 (2 √ó $200)' },
                    { id: 'b', text: '$160 (2 √ó $80)', correct: true },
                    { id: 'c', text: '$200 ($400 - $200)' },
                    { id: 'd', text: '$80 (one purchase profit)' }
                ],
                explanation: "Gross profit per purchase = $200 - $120 = $80. LGP = $80 √ó 2 purchases = $160. That's the REAL value of this customer."
            },

            // Slide 12: The Mindset Shift
            {
                type: 'content',
                title: 'The Mindset Shift',
                content: "Stop celebrating revenue. Start tracking gross profit. The businesses that survive? They know their REAL numbers.",
                highlight: "Revenue is vanity. Profit is sanity.",
                icon: 'üß†'
            },

            // Slide 13: Action Step
            {
                type: 'content',
                title: 'Your Action Step',
                content: "Calculate your TRUE cost to deliver. Include EVERYTHING. Then recalculate your LTV as gross profit.",
                highlight: "Warning: The real number might hurt. But it'll save your business.",
                icon: '‚úÖ'
            },

            // Slide 14: Completion
            {
                type: 'completion',
                title: 'Truth Unlocked',
                subtitle: "You now know what 90% of businesses get wrong",
                keyTakeaways: [
                    'LTV = Lifetime GROSS Profit, not revenue',
                    'Formula: (Price - Cost to Deliver) √ó # of Purchases',
                    'Include ALL costs: product, shipping, returns, support',
                    'Revenue-based LTV leads to overspending and death',
                    'Track real LGP with tools like DataDrew'
                ],
                nextLesson: LESSON_CONFIG.nextLesson
            }
        ];

        // ============================================
        // SLIDE COMPONENTS
        // ============================================

        const WelcomeSlide = ({ data }) => (
            <div className="slide-container flex items-center justify-center bg-gradient-to-br from-gray-900 via-black to-gray-900">
                <div className="text-center px-8 max-w-4xl">
                    <motion.div
                        initial={{ scale: 0 }}
                        animate={{ scale: 1 }}
                        transition={{ type: "spring", duration: 0.8 }}
                        className="mb-8"
                    >
                        <span className="text-8xl">{data.icon}</span>
                    </motion.div>

                    <motion.span
                        initial={{ opacity: 0, y: 20 }}
                        animate={{ opacity: 1, y: 0 }}
                        transition={{ delay: 0.3 }}
                        className="inline-block px-4 py-2 rounded-full text-sm font-semibold mb-6"
                        style={{ background: `${LESSON_CONFIG.accentColor}20`, color: LESSON_CONFIG.accentColor }}
                    >
                        {data.category} ‚Ä¢ {data.duration}
                    </motion.span>

                    <motion.h1
                        initial={{ opacity: 0, y: 30 }}
                        animate={{ opacity: 1, y: 0 }}
                        transition={{ delay: 0.4 }}
                        className="text-5xl md:text-7xl font-black text-white mb-6"
                    >
                        {data.title}
                    </motion.h1>

                    <motion.p
                        initial={{ opacity: 0, y: 20 }}
                        animate={{ opacity: 1, y: 0 }}
                        transition={{ delay: 0.6 }}
                        className="text-xl md:text-2xl text-gray-400"
                    >
                        {data.subtitle}
                    </motion.p>

                    <motion.div
                        initial={{ opacity: 0 }}
                        animate={{ opacity: 1 }}
                        transition={{ delay: 1 }}
                        className="mt-12 flex items-center justify-center gap-2 text-gray-500"
                    >
                        <span className="text-sm">Swipe or use arrows to navigate</span>
                        <motion.span
                            animate={{ x: [0, 10, 0] }}
                            transition={{ duration: 1.5, repeat: Infinity }}
                        >
                            ‚Üí
                        </motion.span>
                    </motion.div>
                </div>
            </div>
        );

        const HookSlide = ({ data }) => (
            <div className="slide-container flex items-center justify-center bg-black">
                <div className="text-center px-8 max-w-4xl">
                    <motion.p
                        initial={{ opacity: 0, scale: 0.9 }}
                        animate={{ opacity: 1, scale: 1 }}
                        transition={{ duration: 0.8 }}
                        className="text-3xl md:text-5xl font-bold text-white leading-tight mb-8"
                    >
                        {data.content}
                    </motion.p>

                    <motion.p
                        initial={{ opacity: 0, y: 20 }}
                        animate={{ opacity: 1, y: 0 }}
                        transition={{ delay: 0.5 }}
                        className="text-xl text-gray-400"
                    >
                        {data.subtext}
                    </motion.p>
                </div>
            </div>
        );

        const ContentSlide = ({ data }) => (
            <div className="slide-container flex items-center justify-center bg-gradient-to-br from-gray-900 to-black">
                <div className="text-center px-8 max-w-4xl">
                    <motion.span
                        initial={{ scale: 0 }}
                        animate={{ scale: 1 }}
                        transition={{ type: "spring" }}
                        className="text-6xl mb-8 block"
                    >
                        {data.icon}
                    </motion.span>

                    <motion.h2
                        initial={{ opacity: 0, y: 20 }}
                        animate={{ opacity: 1, y: 0 }}
                        transition={{ delay: 0.2 }}
                        className="text-3xl md:text-4xl font-bold text-white mb-8"
                    >
                        {data.title}
                    </motion.h2>

                    <motion.p
                        initial={{ opacity: 0, y: 20 }}
                        animate={{ opacity: 1, y: 0 }}
                        transition={{ delay: 0.4 }}
                        className="text-xl md:text-2xl text-gray-300 mb-8 leading-relaxed"
                    >
                        {data.content}
                    </motion.p>

                    {data.highlight && (
                        <motion.div
                            initial={{ opacity: 0, scale: 0.9 }}
                            animate={{ opacity: 1, scale: 1 }}
                            transition={{ delay: 0.6 }}
                            className="inline-block px-8 py-4 rounded-2xl green-glow"
                            style={{ background: `linear-gradient(135deg, ${LESSON_CONFIG.accentColor}20, ${LESSON_CONFIG.accentColor}10)`, border: `2px solid ${LESSON_CONFIG.accentColor}40` }}
                        >
                            <p className="text-xl md:text-2xl font-bold text-gradient">
                                {data.highlight}
                            </p>
                        </motion.div>
                    )}
                </div>
            </div>
        );

        const ExampleSlide = ({ data }) => (
            <div className="slide-container flex items-center justify-center bg-gradient-to-br from-gray-900 via-black to-gray-900">
                <div className="text-center px-8 max-w-4xl">
                    <motion.div
                        initial={{ opacity: 0, y: -20 }}
                        animate={{ opacity: 1, y: 0 }}
                        className="mb-6"
                    >
                        <span className="text-6xl">üìâ</span>
                    </motion.div>

                    <motion.h2
                        initial={{ opacity: 0, y: 20 }}
                        animate={{ opacity: 1, y: 0 }}
                        transition={{ delay: 0.2 }}
                        className="text-3xl md:text-4xl font-bold text-white mb-4"
                    >
                        {data.title}
                    </motion.h2>

                    <motion.p
                        initial={{ opacity: 0, y: 20 }}
                        animate={{ opacity: 1, y: 0 }}
                        transition={{ delay: 0.3 }}
                        className="text-lg text-gray-400 mb-8"
                    >
                        {data.scenario}
                    </motion.p>

                    <div className="grid grid-cols-3 gap-6 mb-8">
                        {data.stats.map((stat, index) => (
                            <motion.div
                                key={index}
                                initial={{ opacity: 0, y: 30 }}
                                animate={{ opacity: 1, y: 0 }}
                                transition={{ delay: 0.4 + index * 0.15 }}
                                className={`p-6 rounded-2xl ${index === 2 ? 'green-glow' : ''}`}
                                style={{
                                    background: index === 2
                                        ? `linear-gradient(135deg, ${LESSON_CONFIG.accentColor}30, ${LESSON_CONFIG.accentColor}10)`
                                        : index === 1
                                            ? 'rgba(239,68,68,0.2)'
                                            : 'rgba(255,255,255,0.05)',
                                    border: index === 2
                                        ? `2px solid ${LESSON_CONFIG.accentColor}`
                                        : index === 1
                                            ? '2px solid rgba(239,68,68,0.5)'
                                            : '1px solid rgba(255,255,255,0.1)'
                                }}
                            >
                                <p className="text-gray-400 text-sm mb-2">{stat.label}</p>
                                <p className={`text-3xl md:text-4xl font-black ${index === 2 ? 'text-gradient' : index === 1 ? 'text-red-400' : 'text-white'}`}>
                                    {stat.value}
                                </p>
                                <p className="text-gray-500 text-sm mt-2">{stat.sublabel}</p>
                            </motion.div>
                        ))}
                    </div>

                    <motion.p
                        initial={{ opacity: 0 }}
                        animate={{ opacity: 1 }}
                        transition={{ delay: 0.9 }}
                        className="text-xl text-red-400 font-bold"
                    >
                        "{data.insight}"
                    </motion.p>
                </div>
            </div>
        );

        const VisualSlide = ({ data }) => {
            if (data.visualType === 'formula') {
                return (
                    <div className="slide-container flex items-center justify-center bg-gradient-to-br from-gray-900 to-black">
                        <div className="text-center px-8 max-w-5xl w-full">
                            <motion.h2
                                initial={{ opacity: 0, y: 20 }}
                                animate={{ opacity: 1, y: 0 }}
                                className="text-3xl md:text-4xl font-bold text-white mb-4"
                            >
                                {data.title}
                            </motion.h2>

                            <motion.p
                                initial={{ opacity: 0 }}
                                animate={{ opacity: 1 }}
                                transition={{ delay: 0.2 }}
                                className="text-xl text-gradient font-bold mb-12"
                            >
                                {data.formula.name}
                            </motion.p>

                            <div className="flex items-center justify-center gap-4 flex-wrap mb-12">
                                {data.formula.parts.map((part, index) => (
                                    <motion.div
                                        key={index}
                                        initial={{ opacity: 0, y: 30 }}
                                        animate={{ opacity: 1, y: 0 }}
                                        transition={{ delay: 0.3 + index * 0.1 }}
                                    >
                                        {part.operator ? (
                                            <span className="text-4xl font-bold text-gray-500">{part.operator}</span>
                                        ) : (
                                            <div className="p-6 rounded-2xl bg-white/5 border border-white/10">
                                                <p className="text-gray-400 text-sm mb-2">{part.label}</p>
                                                <p className="text-2xl font-bold text-white">{part.example}</p>
                                            </div>
                                        )}
                                    </motion.div>
                                ))}
                            </div>

                            <motion.div
                                initial={{ opacity: 0, scale: 0.8 }}
                                animate={{ opacity: 1, scale: 1 }}
                                transition={{ delay: 0.8 }}
                                className="inline-block"
                            >
                                <div className="text-4xl font-bold text-gray-500 mb-4">=</div>
                                <div className="p-8 rounded-3xl green-glow animate-float"
                                    style={{
                                        background: `linear-gradient(135deg, ${LESSON_CONFIG.accentColor}25, ${LESSON_CONFIG.accentColor}10)`,
                                        border: `3px solid ${LESSON_CONFIG.accentColor}`
                                    }}>
                                    <p className="text-gray-400 text-sm mb-2">{data.formula.result.label}</p>
                                    <p className="text-5xl md:text-6xl font-black text-gradient">{data.formula.result.value}</p>
                                </div>
                            </motion.div>
                        </div>
                    </div>
                );
            }

            if (data.visualType === 'comparison') {
                return (
                    <div className="slide-container flex items-center justify-center bg-gradient-to-br from-gray-900 to-black">
                        <div className="text-center px-8 max-w-5xl w-full">
                            <motion.h2
                                initial={{ opacity: 0, y: 20 }}
                                animate={{ opacity: 1, y: 0 }}
                                className="text-3xl md:text-4xl font-bold text-white mb-12"
                            >
                                {data.title}
                            </motion.h2>

                            <div className="grid grid-cols-2 gap-8">
                                <motion.div
                                    initial={{ opacity: 0, x: -50 }}
                                    animate={{ opacity: 1, x: 0 }}
                                    transition={{ delay: 0.3 }}
                                    className="p-8 rounded-3xl bg-gradient-to-br from-red-900/20 to-red-900/5 border border-red-500/30"
                                >
                                    <h3 className="text-2xl font-bold text-red-400 mb-6">{data.left.title}</h3>
                                    <ul className="space-y-4">
                                        {data.left.items.map((item, i) => (
                                            <motion.li
                                                key={i}
                                                initial={{ opacity: 0, x: -20 }}
                                                animate={{ opacity: 1, x: 0 }}
                                                transition={{ delay: 0.5 + i * 0.1 }}
                                                className="flex items-center gap-3 text-gray-300 text-left"
                                            >
                                                <span className="text-red-500">‚úó</span>
                                                {item}
                                            </motion.li>
                                        ))}
                                    </ul>
                                </motion.div>

                                <motion.div
                                    initial={{ opacity: 0, x: 50 }}
                                    animate={{ opacity: 1, x: 0 }}
                                    transition={{ delay: 0.3 }}
                                    className="p-8 rounded-3xl green-glow"
                                    style={{
                                        background: `linear-gradient(135deg, ${LESSON_CONFIG.accentColor}20, ${LESSON_CONFIG.accentColor}05)`,
                                        border: `2px solid ${LESSON_CONFIG.accentColor}50`
                                    }}
                                >
                                    <h3 className="text-2xl font-bold text-gradient mb-6">{data.right.title}</h3>
                                    <ul className="space-y-4">
                                        {data.right.items.map((item, i) => (
                                            <motion.li
                                                key={i}
                                                initial={{ opacity: 0, x: 20 }}
                                                animate={{ opacity: 1, x: 0 }}
                                                transition={{ delay: 0.5 + i * 0.1 }}
                                                className="flex items-center gap-3 text-gray-200 text-left"
                                            >
                                                <span style={{ color: LESSON_CONFIG.accentColor }}>‚úì</span>
                                                {item}
                                            </motion.li>
                                        ))}
                                    </ul>
                                </motion.div>
                            </div>
                        </div>
                    </div>
                );
            }

            return null;
        };

        const CardsSlide = ({ data }) => (
            <div className="slide-container flex items-center justify-center bg-gradient-to-br from-gray-900 to-black">
                <div className="text-center px-8 max-w-5xl w-full">
                    <motion.h2
                        initial={{ opacity: 0, y: 20 }}
                        animate={{ opacity: 1, y: 0 }}
                        className="text-3xl md:text-4xl font-bold text-white mb-12"
                    >
                        {data.title}
                    </motion.h2>

                    <div className="grid grid-cols-4 gap-4">
                        {data.cards.map((card, index) => (
                            <motion.div
                                key={index}
                                initial={{ opacity: 0, y: 40 }}
                                animate={{ opacity: 1, y: 0 }}
                                transition={{ delay: 0.2 + index * 0.1 }}
                                whileHover={{ scale: 1.05, y: -5 }}
                                className="p-6 rounded-2xl bg-gradient-to-br from-white/10 to-white/5 border border-white/10 hover:border-white/30 transition-all cursor-pointer"
                            >
                                <span className="text-4xl mb-4 block">{card.icon}</span>
                                <h3 className="text-lg font-bold text-white mb-2">{card.title}</h3>
                                <p className="text-sm text-gray-400">{card.description}</p>
                            </motion.div>
                        ))}
                    </div>
                </div>
            </div>
        );

        const ToolSlide = ({ data }) => (
            <div className="slide-container flex items-center justify-center bg-gradient-to-br from-gray-900 to-black">
                <div className="text-center px-8 max-w-4xl">
                    <motion.div
                        initial={{ opacity: 0, y: -20 }}
                        animate={{ opacity: 1, y: 0 }}
                        className="mb-4"
                    >
                        <span className="inline-block px-4 py-2 rounded-full text-sm font-semibold"
                            style={{ background: `${LESSON_CONFIG.accentColor}20`, color: LESSON_CONFIG.accentColor }}>
                            Insider Tool
                        </span>
                    </motion.div>

                    <motion.h2
                        initial={{ opacity: 0, y: 20 }}
                        animate={{ opacity: 1, y: 0 }}
                        transition={{ delay: 0.2 }}
                        className="text-3xl md:text-4xl font-bold text-white mb-8"
                    >
                        {data.title}
                    </motion.h2>

                    <motion.div
                        initial={{ opacity: 0, scale: 0.9 }}
                        animate={{ opacity: 1, scale: 1 }}
                        transition={{ delay: 0.3 }}
                        className="mb-8"
                    >
                        <img
                            src={data.toolImage}
                            alt={data.toolName}
                            className="w-24 h-24 mx-auto rounded-2xl object-cover green-glow"
                        />
                    </motion.div>

                    <motion.h3
                        initial={{ opacity: 0 }}
                        animate={{ opacity: 1 }}
                        transition={{ delay: 0.4 }}
                        className="text-2xl font-bold text-gradient mb-4"
                    >
                        {data.toolName}
                    </motion.h3>

                    <motion.p
                        initial={{ opacity: 0 }}
                        animate={{ opacity: 1 }}
                        transition={{ delay: 0.5 }}
                        className="text-gray-400 mb-8"
                    >
                        {data.toolDescription}
                    </motion.p>

                    <motion.div
                        initial={{ opacity: 0, y: 20 }}
                        animate={{ opacity: 1, y: 0 }}
                        transition={{ delay: 0.6 }}
                        className="p-6 rounded-2xl bg-white/5 border border-white/10 mb-8 text-left"
                    >
                        <ul className="space-y-3">
                            {data.benefits.map((benefit, i) => (
                                <motion.li
                                    key={i}
                                    initial={{ opacity: 0, x: -20 }}
                                    animate={{ opacity: 1, x: 0 }}
                                    transition={{ delay: 0.7 + i * 0.1 }}
                                    className="flex items-center gap-3 text-gray-300"
                                >
                                    <span style={{ color: LESSON_CONFIG.accentColor }}>‚úì</span>
                                    {benefit}
                                </motion.li>
                            ))}
                        </ul>
                    </motion.div>

                    <motion.a
                        href={data.toolUrl}
                        target="_blank"
                        rel="noopener noreferrer"
                        initial={{ opacity: 0, y: 20 }}
                        animate={{ opacity: 1, y: 0 }}
                        transition={{ delay: 1 }}
                        className="inline-flex items-center gap-3 px-8 py-4 rounded-full font-semibold text-black transition-all hover:scale-105"
                        style={{ background: `linear-gradient(135deg, ${LESSON_CONFIG.accentColor}, ${LESSON_CONFIG.accentColor}80)` }}
                    >
                        {data.cta}
                        <span>‚Üí</span>
                    </motion.a>
                </div>
            </div>
        );

        const QuizSlide = ({ data, onAnswer, answered, selectedAnswer }) => {
            const [showFeedback, setShowFeedback] = useState(false);
            const correctAnswer = data.options.find(o => o.correct);
            const isCorrect = selectedAnswer === correctAnswer?.id;

            const handleAnswer = (optionId) => {
                if (answered) return;
                onAnswer(optionId);
                setShowFeedback(true);
            };

            const feedbackGif = isCorrect
                ? celebrationGifs[Math.floor(Math.random() * celebrationGifs.length)]
                : empathyGifs[Math.floor(Math.random() * empathyGifs.length)];

            return (
                <div className="slide-container flex items-center justify-center bg-gradient-to-br from-gray-900 to-black">
                    <div className="text-center px-8 max-w-4xl w-full">
                        <motion.div
                            initial={{ opacity: 0, y: -20 }}
                            animate={{ opacity: 1, y: 0 }}
                            className="mb-4"
                        >
                            <span className="inline-block px-4 py-2 rounded-full text-sm font-semibold"
                                style={{ background: `${LESSON_CONFIG.accentColor}20`, color: LESSON_CONFIG.accentColor }}>
                                Quick Check
                            </span>
                        </motion.div>

                        <motion.h2
                            initial={{ opacity: 0, y: 20 }}
                            animate={{ opacity: 1, y: 0 }}
                            transition={{ delay: 0.1 }}
                            className="text-2xl md:text-3xl font-bold text-white mb-10"
                        >
                            {data.question}
                        </motion.h2>

                        {showFeedback && (
                            <motion.div
                                initial={{ opacity: 0, scale: 0.8 }}
                                animate={{ opacity: 1, scale: 1 }}
                                className="mb-8"
                            >
                                <img
                                    src={feedbackGif}
                                    alt="feedback"
                                    className="w-32 h-32 mx-auto rounded-2xl object-cover mb-4"
                                />
                                <p className={`text-xl font-bold ${isCorrect ? 'text-green-400' : 'text-yellow-400'}`}>
                                    {isCorrect ? 'üéâ Correct!' : 'üí° Not quite!'}
                                </p>
                            </motion.div>
                        )}

                        <div className="grid grid-cols-2 gap-4 mb-8">
                            {data.options.map((option, index) => {
                                const isSelected = selectedAnswer === option.id;
                                const isCorrectOption = option.correct;
                                const showResult = answered && (isSelected || isCorrectOption);

                                return (
                                    <motion.button
                                        key={option.id}
                                        initial={{ opacity: 0, y: 20 }}
                                        animate={{ opacity: 1, y: 0 }}
                                        transition={{ delay: 0.2 + index * 0.1 }}
                                        onClick={() => handleAnswer(option.id)}
                                        disabled={answered}
                                        className={`p-6 rounded-2xl text-left transition-all ${
                                            showResult
                                                ? isCorrectOption
                                                    ? 'bg-green-500/20 border-2 border-green-500'
                                                    : isSelected
                                                        ? 'bg-red-500/20 border-2 border-red-500'
                                                        : 'bg-white/5 border border-white/10'
                                                : 'bg-white/5 border border-white/10 hover:bg-white/10 hover:border-white/30'
                                        }`}
                                    >
                                        <span className="text-lg text-white">{option.text}</span>
                                    </motion.button>
                                );
                            })}
                        </div>

                        {answered && (
                            <motion.div
                                initial={{ opacity: 0, y: 20 }}
                                animate={{ opacity: 1, y: 0 }}
                                className="p-6 rounded-2xl bg-white/5 border border-white/10"
                            >
                                <p className="text-gray-300">{data.explanation}</p>
                            </motion.div>
                        )}
                    </div>
                </div>
            );
        };

        const CompletionSlide = ({ data }) => (
            <div className="slide-container flex items-center justify-center bg-gradient-to-br from-gray-900 via-black to-gray-900">
                <div className="text-center px-8 max-w-4xl">
                    <motion.div
                        initial={{ scale: 0 }}
                        animate={{ scale: 1 }}
                        transition={{ type: "spring", duration: 0.8 }}
                        className="mb-8"
                    >
                        <div className="w-24 h-24 mx-auto rounded-full flex items-center justify-center green-glow"
                            style={{ background: `linear-gradient(135deg, ${LESSON_CONFIG.accentColor}, ${LESSON_CONFIG.accentColor}80)` }}>
                            <span className="text-5xl">üíé</span>
                        </div>
                    </motion.div>

                    <motion.h2
                        initial={{ opacity: 0, y: 20 }}
                        animate={{ opacity: 1, y: 0 }}
                        transition={{ delay: 0.3 }}
                        className="text-4xl md:text-5xl font-black text-white mb-4"
                    >
                        {data.title}
                    </motion.h2>

                    <motion.p
                        initial={{ opacity: 0, y: 20 }}
                        animate={{ opacity: 1, y: 0 }}
                        transition={{ delay: 0.4 }}
                        className="text-xl text-gray-400 mb-10"
                    >
                        {data.subtitle}
                    </motion.p>

                    <motion.div
                        initial={{ opacity: 0, y: 30 }}
                        animate={{ opacity: 1, y: 0 }}
                        transition={{ delay: 0.5 }}
                        className="p-8 rounded-3xl bg-white/5 border border-white/10 mb-10 text-left"
                    >
                        <h3 className="text-lg font-bold text-white mb-6 flex items-center gap-2">
                            <span style={{ color: LESSON_CONFIG.accentColor }}>‚ö°</span> Key Takeaways
                        </h3>
                        <ul className="space-y-4">
                            {data.keyTakeaways.map((item, index) => (
                                <motion.li
                                    key={index}
                                    initial={{ opacity: 0, x: -20 }}
                                    animate={{ opacity: 1, x: 0 }}
                                    transition={{ delay: 0.6 + index * 0.1 }}
                                    className="flex items-start gap-3 text-gray-300"
                                >
                                    <span style={{ color: LESSON_CONFIG.accentColor }}>‚úì</span>
                                    {item}
                                </motion.li>
                            ))}
                        </ul>
                    </motion.div>

                    {data.nextLesson && (
                        <motion.a
                            href={`/lessons/${data.nextLesson.id}/lesson.html`}
                            initial={{ opacity: 0, y: 20 }}
                            animate={{ opacity: 1, y: 0 }}
                            transition={{ delay: 1.1 }}
                            className="inline-flex items-center gap-3 px-8 py-4 rounded-full font-semibold text-black transition-all hover:scale-105"
                            style={{ background: `linear-gradient(135deg, ${LESSON_CONFIG.accentColor}, ${LESSON_CONFIG.accentColor}80)` }}
                        >
                            Next: {data.nextLesson.title}
                            <span>‚Üí</span>
                        </motion.a>
                    )}
                </div>
            </div>
        );

        // ============================================
        // MAIN APP
        // ============================================
        const LessonApp = () => {
            const [currentSlide, setCurrentSlide] = useState(0);
            const [quizAnswers, setQuizAnswers] = useState({});
            const [touchStart, setTouchStart] = useState(null);

            const nextSlide = useCallback(() => {
                if (currentSlide < slides.length - 1) {
                    setCurrentSlide(prev => prev + 1);
                }
            }, [currentSlide]);

            const prevSlide = useCallback(() => {
                if (currentSlide > 0) {
                    setCurrentSlide(prev => prev - 1);
                }
            }, [currentSlide]);

            const handleQuizAnswer = (answer) => {
                setQuizAnswers(prev => ({ ...prev, [currentSlide]: answer }));
            };

            // Keyboard navigation
            useEffect(() => {
                const handleKeyDown = (e) => {
                    if (e.key === 'ArrowRight' || e.key === ' ') {
                        nextSlide();
                    } else if (e.key === 'ArrowLeft') {
                        prevSlide();
                    }
                };
                window.addEventListener('keydown', handleKeyDown);
                return () => window.removeEventListener('keydown', handleKeyDown);
            }, [nextSlide, prevSlide]);

            // Touch navigation
            const handleTouchStart = (e) => {
                setTouchStart(e.touches[0].clientX);
            };

            const handleTouchEnd = (e) => {
                if (!touchStart) return;
                const touchEnd = e.changedTouches[0].clientX;
                const diff = touchStart - touchEnd;
                if (Math.abs(diff) > 50) {
                    if (diff > 0) nextSlide();
                    else prevSlide();
                }
                setTouchStart(null);
            };

            const renderSlide = () => {
                const slide = slides[currentSlide];
                const props = { data: slide, key: currentSlide };

                switch (slide.type) {
                    case 'welcome': return <WelcomeSlide {...props} />;
                    case 'hook': return <HookSlide {...props} />;
                    case 'content': return <ContentSlide {...props} />;
                    case 'example': return <ExampleSlide {...props} />;
                    case 'visual': return <VisualSlide {...props} />;
                    case 'cards': return <CardsSlide {...props} />;
                    case 'tool': return <ToolSlide {...props} />;
                    case 'quiz': return (
                        <QuizSlide
                            {...props}
                            onAnswer={handleQuizAnswer}
                            answered={quizAnswers[currentSlide] !== undefined}
                            selectedAnswer={quizAnswers[currentSlide]}
                        />
                    );
                    case 'completion': return <CompletionSlide {...props} />;
                    default: return <ContentSlide {...props} />;
                }
            };

            const progress = ((currentSlide + 1) / slides.length) * 100;

            return (
                <div
                    className="relative"
                    onTouchStart={handleTouchStart}
                    onTouchEnd={handleTouchEnd}
                >
                    <div className="progress-bar" style={{ width: `${progress}%` }} />

                    <AnimatePresence mode="wait">
                        <motion.div
                            key={currentSlide}
                            initial={{ opacity: 0, x: 50 }}
                            animate={{ opacity: 1, x: 0 }}
                            exit={{ opacity: 0, x: -50 }}
                            transition={{ duration: 0.3 }}
                        >
                            {renderSlide()}
                        </motion.div>
                    </AnimatePresence>

                    <button
                        onClick={prevSlide}
                        disabled={currentSlide === 0}
                        className="nav-button prev"
                    >
                        ‚Üê
                    </button>

                    <button
                        onClick={nextSlide}
                        disabled={currentSlide === slides.length - 1}
                        className="nav-button next"
                    >
                        ‚Üí
                    </button>

                    <div className="slide-counter">
                        {currentSlide + 1} / {slides.length}
                    </div>
                </div>
            );
        };

        ReactDOM.createRoot(document.getElementById('root')).render(<LessonApp />);
    </script>
</body>
</html>
