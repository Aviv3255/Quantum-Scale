<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Asymmetric Monopoly | Quantum Scale</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.12.16/dist/framer-motion.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', sans-serif; background: #000; overflow: hidden; }
        .slide-container { width: 100vw; height: 100vh; position: relative; }
        .progress-bar { position: fixed; top: 0; left: 0; height: 3px; background: linear-gradient(90deg, #f59e0b, #fbbf24); z-index: 100; transition: width 0.3s ease; }
        .nav-button { position: fixed; top: 50%; transform: translateY(-50%); z-index: 50; width: 48px; height: 48px; border-radius: 50%; background: rgba(255,255,255,0.1); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.2); color: white; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.2s; }
        .nav-button:hover { background: rgba(255,255,255,0.2); }
        .nav-button:disabled { opacity: 0.3; cursor: not-allowed; }
        .nav-button.prev { left: 20px; }
        .nav-button.next { right: 20px; }
        .slide-counter { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%); color: rgba(255,255,255,0.5); font-size: 14px; z-index: 50; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .animate-pulse { animation: pulse 2s ease-in-out infinite; }
        @keyframes float { 0%, 100% { transform: translateY(0px); } 50% { transform: translateY(-10px); } }
        .animate-float { animation: float 3s ease-in-out infinite; }
        .gold-glow { box-shadow: 0 0 60px rgba(245, 158, 11, 0.3); }
        .text-gradient { background: linear-gradient(135deg, #f59e0b 0%, #fbbf24 50%, #f59e0b 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useCallback } = React;
        const { motion, AnimatePresence } = Motion;

        // ============================================
        // LESSON CONFIGURATION
        // ============================================
        const LESSON_CONFIG = {
            id: 'biz-asymmetric-monopoly',
            title: 'The Asymmetric Monopoly',
            description: 'How to create a legal monopoly through LTV:CAC dominance',
            accentColor: '#f59e0b',
            accentColorLight: '#fef3c7',
            duration: '6 min',
            category: 'Business',
            nextLesson: {
                id: 'biz-lifetime-gross-profit',
                title: 'Lifetime Gross Profit'
            }
        };

        // Celebration GIFs for correct answers
        const celebrationGifs = [
            'https://media.giphy.com/media/3o7TKDMYAHqQy8c1Ve/giphy.gif',
            'https://media.giphy.com/media/artj92V8o75VPL7AeQ/giphy.gif',
            'https://media.giphy.com/media/l0MYt5jPR6QX5pnqM/giphy.gif',
            'https://media.giphy.com/media/xT0xezQGU5xCDJuCPe/giphy.gif'
        ];

        // Empathy GIFs for wrong answers
        const empathyGifs = [
            'https://media.giphy.com/media/3o7TKnO6Wve6502iJ2/giphy.gif',
            'https://media.giphy.com/media/l0HlvtIPzPdt2usKs/giphy.gif'
        ];

        // ============================================
        // SLIDE DATA
        // ============================================
        const slides = [
            // Slide 1: Welcome
            {
                type: 'welcome',
                category: LESSON_CONFIG.category,
                title: 'The Asymmetric Monopoly',
                subtitle: 'The legal way to destroy all competition',
                duration: LESSON_CONFIG.duration,
                icon: 'üëë'
            },

            // Slide 2: Hook
            {
                type: 'hook',
                hookType: 'question',
                content: "What if you could outspend every competitor... and STILL be the most profitable?",
                subtext: "There's a ratio that creates untouchable businesses."
            , brandImage: 'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/framer-1.svg', brandName: 'Framer'},

            // Slide 3: The Problem
            {
                type: 'content',
                title: 'The Advertising Problem',
                content: "Advertising is an AUCTION. Highest bidder wins. Most businesses compete on the same playing field...",
                highlight: "But what if you could afford to pay 10x more per customer?",
                icon: 'üéØ'
            },

            // Slide 4: The Ratio
            {
                type: 'visual',
                visualType: 'stats',
                title: 'The Magic Ratio',
                stats: [
                    { label: 'Average Business', value: '3:1', sublabel: 'LTV:CAC' },
                    { label: 'Great Business', value: '10:1', sublabel: 'LTV:CAC' },
                    { label: 'Monopoly', value: '100:1+', sublabel: 'LTV:CAC', highlight: true }
                ]
            },

            // Slide 5: What It Means
            {
                type: 'content',
                title: 'What This Means',
                content: "When your LTV:CAC is 100:1, you can spend 10x what competitors spend... and STILL make 10x their profit.",
                highlight: "You're not playing the same game anymore.",
                icon: 'üí∞'
            },

            // Slide 6: Starbucks Case
            {
                type: 'example',
                title: 'The Starbucks Example',
                company: 'Starbucks',
                stats: [
                    { label: 'Lifetime Value', value: '$14,099' },
                    { label: 'Cost to Acquire', value: '<$10' },
                    { label: 'LTV:CAC Ratio', value: '1,400:1', highlight: true }
                ],
                insight: "They don't compete. They DOMINATE."
            },

            // Slide 7: Power 1
            {
                type: 'content',
                title: 'Power #1: Outspend Everyone',
                content: "When you can afford $100 per customer and competitors can only afford $10...",
                highlight: "You get EVERY customer. They get the leftovers.",
                icon: 'üíé'
            },

            // Slide 8: Power 2
            {
                type: 'content',
                title: 'Power #2: Absorb Inefficiency',
                content: "As you scale, things get messy. Margins slip. Costs rise. Normal businesses BREAK.",
                highlight: "With 100:1 ratio? You don't even feel it.",
                icon: 'üõ°Ô∏è'
            },

            // Slide 9: Power 3
            {
                type: 'content',
                title: 'Power #3: Enter New Channels',
                content: "Expensive channel that costs $500 per customer? Competitors can't touch it.",
                highlight: "YOU can. And you own it alone.",
                icon: 'üöÄ'
            },

            // Slide 10: Visual Comparison
            {
                type: 'visual',
                visualType: 'comparison',
                title: 'Same Market, Different Reality',
                left: {
                    title: 'Normal Business',
                    items: ['Fights for scraps', 'Stressed about CAC', 'Breaks when scaling', 'Competes on price'],
                    mood: 'negative'
                },
                right: {
                    title: 'Asymmetric Monopoly',
                    items: ['Takes everything', 'CAC is irrelevant', 'Gets stronger at scale', 'Competes on VALUE'],
                    mood: 'positive'
                }
            },

            // Slide 11: How To Build It
            {
                type: 'cards',
                title: 'How To Build Your Monopoly',
                cards: [
                    { icon: 'üìà', title: 'Maximize LTV', description: 'Repeat purchases, upsells, longer retention' },
                    { icon: 'üìâ', title: 'Minimize CAC', description: 'Referrals, content, word-of-mouth' },
                    { icon: 'üîÑ', title: 'Compound', description: 'Reinvest profits into both sides' }
                ]
            },

            // Slide 12: Quiz
            {
                type: 'quiz',
                question: 'What makes the Asymmetric Monopoly "legal"?',
                options: [
                    { id: 'a', text: 'Government protection' },
                    { id: 'b', text: 'Superior LTV:CAC ratio', correct: true },
                    { id: 'c', text: 'Patents and trademarks' },
                    { id: 'd', text: 'Exclusive supplier deals' }
                ],
                explanation: "It's a monopoly built on ECONOMICS, not regulation. When you can outspend everyone profitably, competition becomes irrelevant."
            },

            // Slide 13: The Truth
            {
                type: 'content',
                title: 'The Hidden Truth',
                content: "Most entrepreneurs obsess over products. Over ads. Over tactics. But the REAL game?",
                highlight: "It's building an LTV:CAC ratio so extreme that competition becomes OPTIONAL.",
                icon: 'üéØ'
            },

            // Slide 14: Completion
            {
                type: 'completion',
                title: 'Monopoly Blueprint Unlocked',
                subtitle: "You now understand how businesses become untouchable",
                keyTakeaways: [
                    'LTV:CAC ratio determines your competitive power',
                    '100:1 or higher creates asymmetric advantages',
                    'Focus on maximizing LTV AND minimizing CAC',
                    'At scale, high ratio businesses are unstoppable'
                ],
                nextLesson: LESSON_CONFIG.nextLesson
            }
        ];

        // ============================================
        // SLIDE COMPONENTS
        // ============================================

        const WelcomeSlide = ({ data }) => (
            <div className="slide-container flex items-center justify-center bg-gradient-to-br from-gray-900 via-black to-gray-900">
                <div className="text-center px-8 max-w-4xl">
                    <motion.div
                        initial={{ scale: 0 }}
                        animate={{ scale: 1 }}
                        transition={{ type: "spring", duration: 0.8 }}
                        className="mb-8"
                    >
                        <span className="text-8xl">{data.icon}</span>
                    </motion.div>

                    <motion.span
                        initial={{ opacity: 0, y: 20 }}
                        animate={{ opacity: 1, y: 0 }}
                        transition={{ delay: 0.3 }}
                        className="inline-block px-4 py-2 rounded-full text-sm font-semibold mb-6"
                        style={{ background: `${LESSON_CONFIG.accentColor}20`, color: LESSON_CONFIG.accentColor }}
                    >
                        {data.category} ‚Ä¢ {data.duration}
                    </motion.span>

                    <motion.h1
                        initial={{ opacity: 0, y: 30 }}
                        animate={{ opacity: 1, y: 0 }}
                        transition={{ delay: 0.4 }}
                        className="text-5xl md:text-7xl font-black text-white mb-6"
                    >
                        {data.title}
                    </motion.h1>

                    <motion.p
                        initial={{ opacity: 0, y: 20 }}
                        animate={{ opacity: 1, y: 0 }}
                        transition={{ delay: 0.6 }}
                        className="text-xl md:text-2xl text-gray-400"
                    >
                        {data.subtitle}
                    </motion.p>

                    <motion.div
                        initial={{ opacity: 0 }}
                        animate={{ opacity: 1 }}
                        transition={{ delay: 1 }}
                        className="mt-12 flex items-center justify-center gap-2 text-gray-500"
                    >
                        <span className="text-sm">Swipe or use arrows to navigate</span>
                        <motion.span
                            animate={{ x: [0, 10, 0] }}
                            transition={{ duration: 1.5, repeat: Infinity }}
                        >
                            ‚Üí
                        </motion.span>
                    </motion.div>
                </div>
            </div>
        );

        const HookSlide = ({ data }) => (
      <div className="h-full relative overflow-hidden">
        <div className="h-full flex flex-col justify-center px-8 md:px-16 max-w-3xl mx-auto slide-scroll overflow-y-auto py-10 relative z-10">
          <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className="mb-6">
            <span className="inline-block px-3 py-1 rounded-full text-xs font-semibold mb-4" style={{ background: `rgba(var(--accent-rgb), 0.1)`, color: 'var(--accent)' }}>The Hook</span>
            <h2 className="slide-title text-3xl md:text-4xl lg:text-5xl text-black leading-tight">{data.headline}</h2>
          </motion.div>
          <motion.p initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.15 }} className="text-lg md:text-xl text-neutral-600 leading-relaxed">{data.subtext}</motion.p>
        </div>
        {data.brandImage && (
          <motion.div initial={{ opacity: 0, x: 30 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.3, duration: 0.5 }}
            className="absolute bottom-0 right-0 z-0 pointer-events-none" style={{ height: '30%', maxHeight: '200px', marginRight: '3%', marginBottom: '5%' }}>
            <img src={data.brandImage} alt={data.brandName || ''} className="h-full w-auto object-contain" style={{ opacity: 0.2 }} />
          </motion.div>
        )}
      </div>
    );

        const ContentSlide = ({ data }) => (
            <div className="slide-container flex items-center justify-center bg-gradient-to-br from-gray-900 to-black">
                <div className="text-center px-8 max-w-4xl">
                    <motion.span
                        initial={{ scale: 0 }}
                        animate={{ scale: 1 }}
                        transition={{ type: "spring" }}
                        className="text-6xl mb-8 block"
                    >
                        {data.icon}
                    </motion.span>

                    <motion.h2
                        initial={{ opacity: 0, y: 20 }}
                        animate={{ opacity: 1, y: 0 }}
                        transition={{ delay: 0.2 }}
                        className="text-3xl md:text-4xl font-bold text-white mb-8"
                    >
                        {data.title}
                    </motion.h2>

                    <motion.p
                        initial={{ opacity: 0, y: 20 }}
                        animate={{ opacity: 1, y: 0 }}
                        transition={{ delay: 0.4 }}
                        className="text-xl md:text-2xl text-gray-300 mb-8 leading-relaxed"
                    >
                        {data.content}
                    </motion.p>

                    {data.highlight && (
                        <motion.div
                            initial={{ opacity: 0, scale: 0.9 }}
                            animate={{ opacity: 1, scale: 1 }}
                            transition={{ delay: 0.6 }}
                            className="inline-block px-8 py-4 rounded-2xl gold-glow"
                            style={{ background: `linear-gradient(135deg, ${LESSON_CONFIG.accentColor}20, ${LESSON_CONFIG.accentColor}10)`, border: `2px solid ${LESSON_CONFIG.accentColor}40` }}
                        >
                            <p className="text-xl md:text-2xl font-bold text-gradient">
                                {data.highlight}
                            </p>
                        </motion.div>
                    )}
                </div>
            </div>
        );

        const ExampleSlide = ({ data }) => (
            <div className="slide-container flex items-center justify-center bg-gradient-to-br from-gray-900 via-black to-gray-900">
                <div className="text-center px-8 max-w-4xl">
                    <motion.div
                        initial={{ opacity: 0, y: -20 }}
                        animate={{ opacity: 1, y: 0 }}
                        className="mb-6"
                    >
                        <span className="text-6xl">‚òï</span>
                    </motion.div>

                    <motion.h2
                        initial={{ opacity: 0, y: 20 }}
                        animate={{ opacity: 1, y: 0 }}
                        transition={{ delay: 0.2 }}
                        className="text-3xl md:text-4xl font-bold text-white mb-8"
                    >
                        {data.title}
                    </motion.h2>

                    <div className="grid grid-cols-3 gap-6 mb-8">
                        {data.stats.map((stat, index) => (
                            <motion.div
                                key={index}
                                initial={{ opacity: 0, y: 30 }}
                                animate={{ opacity: 1, y: 0 }}
                                transition={{ delay: 0.3 + index * 0.15 }}
                                className={`p-6 rounded-2xl ${stat.highlight ? 'gold-glow' : ''}`}
                                style={{
                                    background: stat.highlight
                                        ? `linear-gradient(135deg, ${LESSON_CONFIG.accentColor}30, ${LESSON_CONFIG.accentColor}10)`
                                        : 'rgba(255,255,255,0.05)',
                                    border: stat.highlight ? `2px solid ${LESSON_CONFIG.accentColor}` : '1px solid rgba(255,255,255,0.1)'
                                }}
                            >
                                <p className="text-gray-400 text-sm mb-2">{stat.label}</p>
                                <p className={`text-3xl md:text-4xl font-black ${stat.highlight ? 'text-gradient' : 'text-white'}`}>
                                    {stat.value}
                                </p>
                            </motion.div>
                        ))}
                    </div>

                    <motion.p
                        initial={{ opacity: 0 }}
                        animate={{ opacity: 1 }}
                        transition={{ delay: 0.8 }}
                        className="text-xl text-gray-300 italic"
                    >
                        "{data.insight}"
                    </motion.p>
                </div>
            </div>
        );

        const VisualSlide = ({ data }) => {
            if (data.visualType === 'stats') {
                return (
                    <div className="slide-container flex items-center justify-center bg-gradient-to-br from-gray-900 to-black">
                        <div className="text-center px-8 max-w-5xl w-full">
                            <motion.h2
                                initial={{ opacity: 0, y: 20 }}
                                animate={{ opacity: 1, y: 0 }}
                                className="text-3xl md:text-4xl font-bold text-white mb-12"
                            >
                                {data.title}
                            </motion.h2>

                            <div className="grid grid-cols-3 gap-8">
                                {data.stats.map((stat, index) => (
                                    <motion.div
                                        key={index}
                                        initial={{ opacity: 0, y: 40 }}
                                        animate={{ opacity: 1, y: 0 }}
                                        transition={{ delay: 0.2 + index * 0.2 }}
                                        className={`p-8 rounded-3xl ${stat.highlight ? 'gold-glow animate-float' : ''}`}
                                        style={{
                                            background: stat.highlight
                                                ? `linear-gradient(135deg, ${LESSON_CONFIG.accentColor}25, ${LESSON_CONFIG.accentColor}10)`
                                                : 'rgba(255,255,255,0.05)',
                                            border: stat.highlight ? `3px solid ${LESSON_CONFIG.accentColor}` : '1px solid rgba(255,255,255,0.1)'
                                        }}
                                    >
                                        <p className="text-gray-400 text-sm mb-3">{stat.label}</p>
                                        <p className={`text-4xl md:text-5xl font-black mb-2 ${stat.highlight ? 'text-gradient' : 'text-white'}`}>
                                            {stat.value}
                                        </p>
                                        <p className="text-gray-500 text-sm">{stat.sublabel}</p>
                                    </motion.div>
                                ))}
                            </div>
                        </div>
                    </div>
                );
            }

            if (data.visualType === 'comparison') {
                return (
                    <div className="slide-container flex items-center justify-center bg-gradient-to-br from-gray-900 to-black">
                        <div className="text-center px-8 max-w-5xl w-full">
                            <motion.h2
                                initial={{ opacity: 0, y: 20 }}
                                animate={{ opacity: 1, y: 0 }}
                                className="text-3xl md:text-4xl font-bold text-white mb-12"
                            >
                                {data.title}
                            </motion.h2>

                            <div className="grid grid-cols-2 gap-8">
                                <motion.div
                                    initial={{ opacity: 0, x: -50 }}
                                    animate={{ opacity: 1, x: 0 }}
                                    transition={{ delay: 0.3 }}
                                    className="p-8 rounded-3xl bg-gradient-to-br from-red-900/20 to-red-900/5 border border-red-500/30"
                                >
                                    <h3 className="text-2xl font-bold text-red-400 mb-6">{data.left.title}</h3>
                                    <ul className="space-y-4">
                                        {data.left.items.map((item, i) => (
                                            <motion.li
                                                key={i}
                                                initial={{ opacity: 0, x: -20 }}
                                                animate={{ opacity: 1, x: 0 }}
                                                transition={{ delay: 0.5 + i * 0.1 }}
                                                className="flex items-center gap-3 text-gray-300"
                                            >
                                                <span className="text-red-500">‚úó</span>
                                                {item}
                                            </motion.li>
                                        ))}
                                    </ul>
                                </motion.div>

                                <motion.div
                                    initial={{ opacity: 0, x: 50 }}
                                    animate={{ opacity: 1, x: 0 }}
                                    transition={{ delay: 0.3 }}
                                    className="p-8 rounded-3xl gold-glow"
                                    style={{
                                        background: `linear-gradient(135deg, ${LESSON_CONFIG.accentColor}20, ${LESSON_CONFIG.accentColor}05)`,
                                        border: `2px solid ${LESSON_CONFIG.accentColor}50`
                                    }}
                                >
                                    <h3 className="text-2xl font-bold text-gradient mb-6">{data.right.title}</h3>
                                    <ul className="space-y-4">
                                        {data.right.items.map((item, i) => (
                                            <motion.li
                                                key={i}
                                                initial={{ opacity: 0, x: 20 }}
                                                animate={{ opacity: 1, x: 0 }}
                                                transition={{ delay: 0.5 + i * 0.1 }}
                                                className="flex items-center gap-3 text-gray-200"
                                            >
                                                <span style={{ color: LESSON_CONFIG.accentColor }}>‚úì</span>
                                                {item}
                                            </motion.li>
                                        ))}
                                    </ul>
                                </motion.div>
                            </div>
                        </div>
                    </div>
                );
            }

            return null;
        };

        const CardsSlide = ({ data }) => (
            <div className="slide-container flex items-center justify-center bg-gradient-to-br from-gray-900 to-black">
                <div className="text-center px-8 max-w-5xl w-full">
                    <motion.h2
                        initial={{ opacity: 0, y: 20 }}
                        animate={{ opacity: 1, y: 0 }}
                        className="text-3xl md:text-4xl font-bold text-white mb-12"
                    >
                        {data.title}
                    </motion.h2>

                    <div className="grid grid-cols-3 gap-6">
                        {data.cards.map((card, index) => (
                            <motion.div
                                key={index}
                                initial={{ opacity: 0, y: 40 }}
                                animate={{ opacity: 1, y: 0 }}
                                transition={{ delay: 0.2 + index * 0.15 }}
                                whileHover={{ scale: 1.05, y: -5 }}
                                className="p-8 rounded-3xl bg-gradient-to-br from-white/10 to-white/5 border border-white/10 hover:border-white/30 transition-all cursor-pointer"
                            >
                                <span className="text-5xl mb-6 block">{card.icon}</span>
                                <h3 className="text-xl font-bold text-white mb-3">{card.title}</h3>
                                <p className="text-gray-400">{card.description}</p>
                            </motion.div>
                        ))}
                    </div>
                </div>
            </div>
        );

        const QuizSlide = ({ data, onAnswer, answered, selectedAnswer }) => {
            const [showFeedback, setShowFeedback] = useState(false);
            const correctAnswer = data.options.find(o => o.correct);
            const isCorrect = selectedAnswer === correctAnswer?.id;

            const handleAnswer = (optionId) => {
                if (answered) return;
                onAnswer(optionId);
                setShowFeedback(true);
            };

            const feedbackGif = isCorrect
                ? celebrationGifs[Math.floor(Math.random() * celebrationGifs.length)]
                : empathyGifs[Math.floor(Math.random() * empathyGifs.length)];

            return (
                <div className="slide-container flex items-center justify-center bg-gradient-to-br from-gray-900 to-black">
                    <div className="text-center px-8 max-w-4xl w-full">
                        <motion.div
                            initial={{ opacity: 0, y: -20 }}
                            animate={{ opacity: 1, y: 0 }}
                            className="mb-4"
                        >
                            <span className="inline-block px-4 py-2 rounded-full text-sm font-semibold"
                                style={{ background: `${LESSON_CONFIG.accentColor}20`, color: LESSON_CONFIG.accentColor }}>
                                Quick Check
                            </span>
                        </motion.div>

                        <motion.h2
                            initial={{ opacity: 0, y: 20 }}
                            animate={{ opacity: 1, y: 0 }}
                            transition={{ delay: 0.1 }}
                            className="text-2xl md:text-3xl font-bold text-white mb-10"
                        >
                            {data.question}
                        </motion.h2>

                        {showFeedback && (
                            <motion.div
                                initial={{ opacity: 0, scale: 0.8 }}
                                animate={{ opacity: 1, scale: 1 }}
                                className="mb-8"
                            >
                                <img
                                    src={feedbackGif}
                                    alt="feedback"
                                    className="w-32 h-32 mx-auto rounded-2xl object-cover mb-4"
                                />
                                <p className={`text-xl font-bold ${isCorrect ? 'text-green-400' : 'text-yellow-400'}`}>
                                    {isCorrect ? 'üéâ Correct!' : 'üí° Not quite!'}
                                </p>
                            </motion.div>
                        )}

                        <div className="grid grid-cols-2 gap-4 mb-8">
                            {data.options.map((option, index) => {
                                const isSelected = selectedAnswer === option.id;
                                const isCorrectOption = option.correct;
                                const showResult = answered && (isSelected || isCorrectOption);

                                return (
                                    <motion.button
                                        key={option.id}
                                        initial={{ opacity: 0, y: 20 }}
                                        animate={{ opacity: 1, y: 0 }}
                                        transition={{ delay: 0.2 + index * 0.1 }}
                                        onClick={() => handleAnswer(option.id)}
                                        disabled={answered}
                                        className={`p-6 rounded-2xl text-left transition-all ${
                                            showResult
                                                ? isCorrectOption
                                                    ? 'bg-green-500/20 border-2 border-green-500'
                                                    : isSelected
                                                        ? 'bg-red-500/20 border-2 border-red-500'
                                                        : 'bg-white/5 border border-white/10'
                                                : 'bg-white/5 border border-white/10 hover:bg-white/10 hover:border-white/30'
                                        }`}
                                    >
                                        <span className="text-lg text-white">{option.text}</span>
                                    </motion.button>
                                );
                            })}
                        </div>

                        {answered && (
                            <motion.div
                                initial={{ opacity: 0, y: 20 }}
                                animate={{ opacity: 1, y: 0 }}
                                className="p-6 rounded-2xl bg-white/5 border border-white/10"
                            >
                                <p className="text-gray-300">{data.explanation}</p>
                            </motion.div>
                        )}
                    </div>
                </div>
            );
        };

        const CompletionSlide = ({ data }) => (
            <div className="slide-container flex items-center justify-center bg-gradient-to-br from-gray-900 via-black to-gray-900">
                <div className="text-center px-8 max-w-4xl">
                    <motion.div
                        initial={{ scale: 0 }}
                        animate={{ scale: 1 }}
                        transition={{ type: "spring", duration: 0.8 }}
                        className="mb-8"
                    >
                        <div className="w-24 h-24 mx-auto rounded-full flex items-center justify-center gold-glow"
                            style={{ background: `linear-gradient(135deg, ${LESSON_CONFIG.accentColor}, ${LESSON_CONFIG.accentColor}80)` }}>
                            <span className="text-5xl">üëë</span>
                        </div>
                    </motion.div>

                    <motion.h2
                        initial={{ opacity: 0, y: 20 }}
                        animate={{ opacity: 1, y: 0 }}
                        transition={{ delay: 0.3 }}
                        className="text-4xl md:text-5xl font-black text-white mb-4"
                    >
                        {data.title}
                    </motion.h2>

                    <motion.p
                        initial={{ opacity: 0, y: 20 }}
                        animate={{ opacity: 1, y: 0 }}
                        transition={{ delay: 0.4 }}
                        className="text-xl text-gray-400 mb-10"
                    >
                        {data.subtitle}
                    </motion.p>

                    <motion.div
                        initial={{ opacity: 0, y: 30 }}
                        animate={{ opacity: 1, y: 0 }}
                        transition={{ delay: 0.5 }}
                        className="p-8 rounded-3xl bg-white/5 border border-white/10 mb-10 text-left"
                    >
                        <h3 className="text-lg font-bold text-white mb-6 flex items-center gap-2">
                            <span style={{ color: LESSON_CONFIG.accentColor }}>‚ö°</span> Key Takeaways
                        </h3>
                        <ul className="space-y-4">
                            {data.keyTakeaways.map((item, index) => (
                                <motion.li
                                    key={index}
                                    initial={{ opacity: 0, x: -20 }}
                                    animate={{ opacity: 1, x: 0 }}
                                    transition={{ delay: 0.6 + index * 0.1 }}
                                    className="flex items-start gap-3 text-gray-300"
                                >
                                    <span style={{ color: LESSON_CONFIG.accentColor }}>‚úì</span>
                                    {item}
                                </motion.li>
                            ))}
                        </ul>
                    </motion.div>

                    {data.nextLesson && (
                        <motion.a
                            href={`/lessons/${data.nextLesson.id}/lesson.html`}
                            initial={{ opacity: 0, y: 20 }}
                            animate={{ opacity: 1, y: 0 }}
                            transition={{ delay: 0.9 }}
                            className="inline-flex items-center gap-3 px-8 py-4 rounded-full font-semibold text-black transition-all hover:scale-105"
                            style={{ background: `linear-gradient(135deg, ${LESSON_CONFIG.accentColor}, ${LESSON_CONFIG.accentColor}80)` }}
                        >
                            Next: {data.nextLesson.title}
                            <span>‚Üí</span>
                        </motion.a>
                    )}
                </div>
            </div>
        );

        // ============================================
        // MAIN APP
        // ============================================
        const LessonApp = () => {
            const [currentSlide, setCurrentSlide] = useState(0);
            const [quizAnswers, setQuizAnswers] = useState({});
            const [touchStart, setTouchStart] = useState(null);

            const nextSlide = useCallback(() => {
                if (currentSlide < slides.length - 1) {
                    setCurrentSlide(prev => prev + 1);
                }
            }, [currentSlide]);

            const prevSlide = useCallback(() => {
                if (currentSlide > 0) {
                    setCurrentSlide(prev => prev - 1);
                }
            }, [currentSlide]);

            const handleQuizAnswer = (answer) => {
                setQuizAnswers(prev => ({ ...prev, [currentSlide]: answer }));
            };

            // Keyboard navigation
            useEffect(() => {
                const handleKeyDown = (e) => {
                    if (e.key === 'ArrowRight' || e.key === ' ') {
                        nextSlide();
                    } else if (e.key === 'ArrowLeft') {
                        prevSlide();
                    }
                };
                window.addEventListener('keydown', handleKeyDown);
                return () => window.removeEventListener('keydown', handleKeyDown);
            }, [nextSlide, prevSlide]);

            // Touch navigation
            const handleTouchStart = (e) => {
                setTouchStart(e.touches[0].clientX);
            };

            const handleTouchEnd = (e) => {
                if (!touchStart) return;
                const touchEnd = e.changedTouches[0].clientX;
                const diff = touchStart - touchEnd;
                if (Math.abs(diff) > 50) {
                    if (diff > 0) nextSlide();
                    else prevSlide();
                }
                setTouchStart(null);
            };

            const renderSlide = () => {
                const slide = slides[currentSlide];
                const props = { data: slide, key: currentSlide };

                switch (slide.type) {
                    case 'welcome': return <WelcomeSlide {...props} />;
                    case 'hook': return <HookSlide {...props} />;
                    case 'content': return <ContentSlide {...props} />;
                    case 'example': return <ExampleSlide {...props} />;
                    case 'visual': return <VisualSlide {...props} />;
                    case 'cards': return <CardsSlide {...props} />;
                    case 'quiz': return (
                        <QuizSlide
                            {...props}
                            onAnswer={handleQuizAnswer}
                            answered={quizAnswers[currentSlide] !== undefined}
                            selectedAnswer={quizAnswers[currentSlide]}
                        />
                    );
                    case 'completion': return <CompletionSlide {...props} />;
                    default: return <ContentSlide {...props} />;
                }
            };

            const progress = ((currentSlide + 1) / slides.length) * 100;

            return (
                <div
                    className="relative"
                    onTouchStart={handleTouchStart}
                    onTouchEnd={handleTouchEnd}
                >
                    <div className="progress-bar" style={{ width: `${progress}%` }} />

                    <AnimatePresence mode="wait">
                        <motion.div
                            key={currentSlide}
                            initial={{ opacity: 0, x: 50 }}
                            animate={{ opacity: 1, x: 0 }}
                            exit={{ opacity: 0, x: -50 }}
                            transition={{ duration: 0.3 }}
                        >
                            {renderSlide()}
                        </motion.div>
                    </AnimatePresence>

                    <button
                        onClick={prevSlide}
                        disabled={currentSlide === 0}
                        className="nav-button prev"
                    >
                        ‚Üê
                    </button>

                    <button
                        onClick={nextSlide}
                        disabled={currentSlide === slides.length - 1}
                        className="nav-button next"
                    >
                        ‚Üí
                    </button>

                    <div className="slide-counter">
                        {currentSlide + 1} / {slides.length}
                    </div>
                </div>
            );
        };

        ReactDOM.createRoot(document.getElementById('root')).render(<LessonApp />);
    </script>
</body>
</html>
