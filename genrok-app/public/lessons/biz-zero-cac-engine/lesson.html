<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>The $0 CAC Engine | Quantum Scale</title>
  <script src="https://cdn.tailwindcss.com" defer></script>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" defer></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" defer></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js" defer></script>
  <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js" defer></script>
  <script src="../shared/greetings.js" defer></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fraunces:wght@400;500;600;700;800;900&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --accent: #D4A017; --accent-dark: #B8860B; --accent-light: #F4D03F; --accent-rgb: 212, 160, 23;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: 'Inter', sans-serif; background: transparent; -webkit-font-smoothing: antialiased; }
    .title-font { font-family: 'Fraunces', serif; font-weight: 900; letter-spacing: -0.02em; line-height: 1.1; }
    h1, h2, h3, .slide-title { font-family: 'Fraunces', serif; font-weight: 900; letter-spacing: -0.02em; line-height: 1.1; }
    ::selection { background: var(--accent); color: white; }
    .slide-scroll::-webkit-scrollbar { display: none; }
    .slide-scroll { -ms-overflow-style: none; scrollbar-width: none; }
  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState, useEffect, useMemo, useCallback, useRef } = React;
    const { motion, AnimatePresence } = window.Motion;

    const LESSON_CONFIG = {
      id: 'biz-zero-cac-engine',
      title: 'The $0 CAC Engine',
      accentColor: '#D4A017',
      duration: '6 min',
      nextLesson: { id: 'biz-creative-targeting', title: 'Creative is the New Targeting', teaser: 'Learn why creative volume beats audience targeting in 2024.' }
    };

    const celebrationGifs = [
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_doing_a_quick_victory_dance_move_high_energy_c_d03b798b-a518-4e6c-bcae-d69b2dd50486_2.mp4',
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_jumping_in_the_air_arms_raised_high_YESSS_cele_201477e8-3df4-405a-bc81-81d1747e5c6c_2.mp4',
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_giving_a_double_thumbs_up_huge_grin_leaning_sl_14c9727f-6fe9-43d1-9d6d-59fc30831817_2.mp4',
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_doing_a_mini_celebration_fist_bump_to_the_sky__ca048b03-4638-44da-b995-bffdb6e16c60_2.mp4',
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_giving_an_encouraging_nod_with_a_slight_smile__9399498c-7bb5-4e58-9541-09b5207832f1_2.mp4'
    ];
    const empathyGifs = [
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_thumbs_down_with_encouraging_nod_close_keep_go_613e541f-c072-436f-aee7-f99cd6f834fc_2.mp4',
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_shrugging_casually_with_a_knowing_smile_Its_o_e1c91bfc-ed8e-4d00-b5fd-adaa5b52c53b_2.mp4',
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_doing_a_so-so_hand_gesture_with_encouraging_ex_e8d19ac3-3d26-4442-9c4f-2b6eb0e0e7ee_2.mp4'
    ];
    const getRandomGif = (gifs) => gifs[Math.floor(Math.random() * gifs.length)];

    const Icons = {
      Clock: () => (<svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" strokeWidth="2"/><path strokeWidth="2" d="M12 6v6l4 2"/></svg>),
      ChevronLeft: () => (<svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M15 19l-7-7 7-7"/></svg>),
      ChevronRight: () => (<svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9 5l7 7-7 7"/></svg>),
      Check: () => (<svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2.5" d="M5 13l4 4L19 7"/></svg>),
      X: () => (<svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2.5" d="M6 18L18 6M6 6l12 12"/></svg>),
      Sparkles: () => (<svg className="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456z"/></svg>),
      ArrowRight: () => (<svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/></svg>),
      Quote: () => (<svg className="w-8 h-8" fill="currentColor" viewBox="0 0 24 24"><path d="M14.017 21v-7.391c0-5.704 3.731-9.57 8.983-10.609l.995 2.151c-2.432.917-3.995 3.638-3.995 5.849h4v10h-9.983zm-14.017 0v-7.391c0-5.704 3.748-9.57 9-10.609l.996 2.151c-2.433.917-3.996 3.638-3.996 5.849h3.983v10h-9.983z"/></svg>),
      Video: () => (<svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"/></svg>),
      Fire: () => (<svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-5 2.986-7C14 5 16.09 5.777 17.656 7.343A7.975 7.975 0 0120 13a7.975 7.975 0 01-2.343 5.657z"/><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9.879 16.121A3 3 0 1012.015 11L11 14H9c0 .768.293 1.536.879 2.121z"/></svg>),
      Target: () => (<svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" strokeWidth="2"/><circle cx="12" cy="12" r="6" strokeWidth="2"/><circle cx="12" cy="12" r="2" strokeWidth="2"/></svg>),
      TrendingUp: () => (<svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"/></svg>),
      DollarSign: () => (<svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><line x1="12" y1="1" x2="12" y2="23" strokeWidth="2" strokeLinecap="round"/><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M17 5H9.5a3.5 3.5 0 000 7h5a3.5 3.5 0 010 7H6"/></svg>),
      Zap: () => (<svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/></svg>)
    };

    const slides = [
      { type: 'welcome', learningGoals: ['Why organic content beats paid ads early on', 'How to use organic as your R&D lab', 'The $0 to $10M roadmap'] },
      { type: 'hook', headline: 'Stop burning money on ads.', subtext: 'Every dollar spent before mastering organic is a dollar wasted.' },
      { type: 'quote', text: '"If you\'re starting, don\'t spend money on ads. Get really good at short form content. That can take you to $10M in sales."', author: 'Sean Frank', role: 'CEO of Ridge ($200M+ Revenue)', image: 'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/tGs7erOT_400x400-removebg-preview.png' },
      { type: 'stats', title: 'The Brutal Truth About Paid Ads', subtitle: 'Most founders waste money because they skip the proving ground', stats: [
        { value: '$10K-$50K', label: 'Wasted on ads that don\'t work', color: '#ef4444' },
        { value: '100+', label: 'Videos before you find what works', color: '#22c55e' },
        { value: '3 sec', label: 'To stop someone from scrolling', color: 'var(--accent)' },
        { value: '$0', label: 'Cost to test with organic', color: '#3b82f6' }
      ] },
      { type: 'content', title: 'The Expensive Mistake', body: "If people scroll past your organic content for free, they'll scroll past your paid ad even faster. You're paying money to show content nobody wants to watch.", highlight: "Master attention for free first. Then buy more of it." },
      { type: 'example', title: 'Two Paths to Revenue', before: { label: 'The Expensive Way', items: ['Spend $10K-$50K testing ads', 'Guess what hooks work', 'Burn through budget fast', 'No learning, just loss'] }, after: { label: 'The $0 CAC Way', items: ['Post 100+ videos for free', 'See what hooks stop scroll', 'Validate before spending', 'Turn winners into ads'] } },
      { type: 'content', title: 'Organic = Free R&D Lab', body: "Think of organic content as free market research. Every video is a test: Does this hook stop the scroll? Does this angle resonate? You get instant feedback without spending a cent.", highlight: "Once you find hooks that work organically, those are your paid ad winners." },
      { type: 'cards', title: 'The $0 CAC Playbook', cards: [
        { icon: 'Video', title: '100+ Videos/Month', desc: 'Volume is the game. Test relentlessly.' },
        { icon: 'Fire', title: '3-7 Second Hooks', desc: 'You have 3 seconds to stop the scroll.' },
        { icon: 'Target', title: '10+ Angles', desc: 'Same product, different pain points.' },
        { icon: 'TrendingUp', title: '$10M Ceiling', desc: 'Where organic taps out, paid begins.' }
      ] },
      { type: 'roadmap', title: 'The $0 to $10M Roadmap', phases: [
        { phase: '1', name: 'Content Grind', timeline: 'Months 1-6', desc: 'Post 3-5 videos daily. Track what works.' },
        { phase: '2', name: 'Double Down', timeline: 'Months 6-12', desc: 'Scale winning formats. Build audience.' },
        { phase: '3', name: 'Organic Ceiling', timeline: 'Year 1-2', desc: 'Hit $10M organic. Max out reach.' },
        { phase: '4', name: 'Layer Paid', timeline: 'Post $10M', desc: 'Turn top content into paid ads.' }
      ] },
      { type: 'quiz', question: 'When should you start spending on paid ads?', options: ['Day 1 - Need sales immediately', 'After you have proven organic content that performs', 'When you hit $1M in revenue', 'Never - organic is enough'], correctIndex: 1, feedback: { correct: "Exactly! Paid ads scale what already works organically. Prove it first, then pour gas on the fire.", incorrect: "Not quite. Paid ads should scale proven winners, not discover them." } },
      { type: 'content', title: 'Why This Works', body: "Organic forces you to be GOOD. No budget to hide behind. You either capture attention or you don't. This discipline builds muscle. When you finally run ads, you're scaling machines you've already built.", highlight: "Paid ads amplify signal. Organic creates signal." },
      { type: 'action-checklist', title: 'Build Your $0 CAC Engine', items: ['Start posting 3-5 short-form videos per day', 'Track which hooks get the most engagement', 'Build a swipe file of your top performers', 'After $10M organic, layer in paid using winners'] },
      { type: 'completion' }
    ];

    const WelcomeSlide = ({ data, onStart, userName, onShowGif, onHideGif }) => {
      const welcomeData = useMemo(() => getTimeBasedWelcome(), []);
      const gifSide = useMemo(() => Math.random() > 0.5 ? 'left' : 'right', []);
      useEffect(() => { onShowGif(welcomeData.gif, '65%', gifSide); return () => onHideGif(); }, [welcomeData.gif, gifSide, onShowGif, onHideGif]);

      return (
        <div className="h-full w-full relative overflow-hidden">
          <div className="h-full flex flex-col items-center justify-center text-center px-6 py-4 relative z-20">
            <motion.h1 initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className="title-font text-3xl sm:text-4xl md:text-5xl lg:text-6xl text-black mb-2 md:mb-3">{LESSON_CONFIG.title}</motion.h1>
            <motion.p initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.1 }} className="text-neutral-600 text-base md:text-lg lg:text-xl mb-2 md:mb-3 max-w-lg leading-relaxed" dangerouslySetInnerHTML={{ __html: formatGreeting(welcomeData.greeting, `<span class="font-bold text-neutral-900">${userName}</span>`) }} />
            <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.15 }} className="flex items-center justify-center gap-1.5 text-neutral-400 text-[10px] md:text-xs mb-2 md:mb-3"><Icons.Clock /><span>{LESSON_CONFIG.duration}</span></motion.div>
            <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.2 }} className="bg-neutral-900 rounded-xl md:rounded-2xl p-3 md:p-5 mb-3 md:mb-4 max-w-sm w-full mx-auto">
              <p className="text-neutral-500 text-[9px] md:text-[11px] uppercase tracking-wider mb-2 md:mb-3">In this lesson</p>
              <ul className="space-y-1.5 md:space-y-2">
                {data.learningGoals.map((goal, i) => (
                  <motion.li key={i} initial={{ opacity: 0, x: -10 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.25 + i * 0.05 }} className="flex items-start gap-2 text-left">
                    <span className="w-5 h-5 rounded-md flex items-center justify-center text-[9px] font-bold text-white flex-shrink-0 mt-0.5" style={{ background: `linear-gradient(135deg, var(--accent), var(--accent-dark))` }}>{i + 1}</span>
                    <span className="text-neutral-300 text-[11px] md:text-sm leading-snug">{goal}</span>
                  </motion.li>
                ))}
              </ul>
            </motion.div>
            <motion.button initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.45 }} onClick={onStart} whileHover={{ scale: 1.02 }} whileTap={{ scale: 0.98 }} className="px-6 md:px-7 py-2.5 md:py-3 rounded-xl text-white font-semibold text-sm md:text-base" style={{ background: `linear-gradient(135deg, var(--accent), var(--accent-dark))` }}>Let's Go</motion.button>
          </div>
        </div>
      );
    };

    const HookSlide = ({ data }) => (
      <div className="h-full flex flex-col justify-center px-8 md:px-16 max-w-3xl mx-auto hide-scrollbar overflow-y-auto py-10">
        <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className="mb-6">
          <span className="inline-block px-3 py-1 rounded-full text-xs font-semibold mb-4" style={{ background: 'rgba(var(--accent-rgb), 0.1)', color: 'var(--accent)' }}>The Hook</span>
          <h2 className="slide-title text-3xl md:text-4xl lg:text-5xl text-black leading-tight">{data.headline}</h2>
        </motion.div>
        <motion.p initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.15 }} className="text-lg md:text-xl text-neutral-600 leading-relaxed">{data.subtext}</motion.p>
      </div>
    );

    const QuoteSlide = ({ data }) => (
      <div className="h-full flex flex-col justify-center px-8 md:px-16 max-w-3xl mx-auto hide-scrollbar overflow-y-auto py-10 relative">
        <motion.div initial={{ opacity: 0, scale: 0.95 }} animate={{ opacity: 1, scale: 1 }} className="relative">
          <div className="text-6xl md:text-8xl absolute -top-4 -left-2 opacity-20" style={{ color: 'var(--accent)' }}>"</div>
          <motion.p initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.1 }} className="text-xl md:text-2xl lg:text-3xl text-neutral-800 leading-relaxed mb-6 pl-8">{data.text}</motion.p>
          <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.2 }} className="flex items-center gap-4 pl-8">
            <div>
              <p className="font-bold text-neutral-900">{data.author}</p>
              <p className="text-sm text-neutral-500">{data.role}</p>
            </div>
          </motion.div>
        </motion.div>
        {data.image && (
          <motion.div initial={{ opacity: 0, y: 30 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.3 }} className="absolute right-4 md:right-8 bottom-0" style={{ height: '60%', zIndex: 15 }}>
            <img src={data.image} alt={data.author} className="h-full w-auto object-contain object-bottom" />
          </motion.div>
        )}
      </div>
    );

    const StatsSlide = ({ data }) => (
      <div className="h-full flex flex-col items-center justify-center px-6 py-12 overflow-y-auto hide-scrollbar">
        <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className="max-w-4xl w-full">
          <h2 className="slide-title text-3xl md:text-4xl text-black text-center mb-2">{data.title}</h2>
          <p className="text-neutral-500 text-center mb-8">{data.subtitle}</p>
          <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
            {data.stats.map((stat, i) => (
              <motion.div key={i} initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.1 * i }} className="bg-gradient-to-br from-neutral-900 to-neutral-800 rounded-2xl p-5 text-center">
                <motion.div initial={{ scale: 0 }} animate={{ scale: 1 }} transition={{ delay: 0.2 + i * 0.1, type: 'spring' }} className="text-3xl md:text-4xl font-black mb-2" style={{ color: stat.color }}>{stat.value}</motion.div>
                <p className="text-neutral-400 text-xs md:text-sm">{stat.label}</p>
              </motion.div>
            ))}
          </div>
        </motion.div>
      </div>
    );

    const ContentSlide = ({ data }) => (
      <div className="h-full flex flex-col items-center justify-center px-6 py-12 overflow-y-auto hide-scrollbar">
        <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className="max-w-2xl w-full">
          <h2 className="title-font text-3xl md:text-4xl font-black text-neutral-900 mb-6">{data.title}</h2>
          <p className="text-lg md:text-xl text-neutral-600 leading-relaxed mb-6">{data.body}</p>
          {data.highlight && (
            <motion.div initial={{ opacity: 0, y: 10 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.3 }} className="p-5 rounded-xl border-l-4" style={{ backgroundColor: 'rgba(var(--accent-rgb), 0.1)', borderColor: 'var(--accent)' }}>
              <p className="text-neutral-800 font-medium">{data.highlight}</p>
            </motion.div>
          )}
        </motion.div>
      </div>
    );

    const ExampleSlide = ({ data }) => (
      <div className="h-full flex flex-col items-center justify-center px-6 py-12 overflow-y-auto hide-scrollbar">
        <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className="max-w-4xl w-full">
          <h2 className="title-font text-3xl md:text-4xl font-black text-neutral-900 mb-8 text-center">{data.title}</h2>
          <div className="grid md:grid-cols-2 gap-6">
            <motion.div initial={{ opacity: 0, x: -20 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.2 }} className="bg-red-50 border-2 border-red-200 rounded-2xl p-6">
              <div className="flex items-center gap-2 mb-4">
                <span className="text-2xl">‚ùå</span>
                <span className="font-bold text-red-700 text-lg">{data.before.label}</span>
              </div>
              <ul className="space-y-3">{data.before.items.map((item, i) => (<li key={i} className="flex items-start gap-2 text-red-900"><span className="text-red-400 mt-1">‚Ä¢</span><span className="text-sm md:text-base">{item}</span></li>))}</ul>
            </motion.div>
            <motion.div initial={{ opacity: 0, x: 20 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.3 }} className="bg-green-50 border-2 border-green-200 rounded-2xl p-6">
              <div className="flex items-center gap-2 mb-4">
                <span className="text-2xl">‚úÖ</span>
                <span className="font-bold text-green-700 text-lg">{data.after.label}</span>
              </div>
              <ul className="space-y-3">{data.after.items.map((item, i) => (<li key={i} className="flex items-start gap-2 text-green-900"><span className="text-green-500 mt-1">‚Ä¢</span><span className="text-sm md:text-base">{item}</span></li>))}</ul>
            </motion.div>
          </div>
        </motion.div>
      </div>
    );

    const CardsSlide = ({ data }) => {
      const IconComponent = ({ name }) => {
        const icons = { Video: Icons.Video, Fire: Icons.Fire, Target: Icons.Target, TrendingUp: Icons.TrendingUp };
        const Icon = icons[name];
        return Icon ? <Icon /> : null;
      };
      return (
        <div className="h-full flex flex-col items-center justify-center px-6 py-12 overflow-y-auto hide-scrollbar">
          <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className="max-w-4xl w-full">
            <h2 className="title-font text-3xl md:text-4xl font-black text-neutral-900 mb-8 text-center">{data.title}</h2>
            <div className="grid grid-cols-2 gap-4">
              {data.cards.map((card, i) => (
                <motion.div key={i} initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.1 * i }} className="bg-white border border-neutral-200 rounded-xl p-4 md:p-5 shadow-sm hover:shadow-md transition-shadow">
                  <div className="w-10 h-10 rounded-xl flex items-center justify-center mb-3" style={{ backgroundColor: 'rgba(var(--accent-rgb), 0.15)', color: 'var(--accent-dark)' }}>
                    <IconComponent name={card.icon} />
                  </div>
                  <h3 className="font-bold text-neutral-900 text-sm md:text-base mb-1">{card.title}</h3>
                  <p className="text-neutral-500 text-xs md:text-sm">{card.desc}</p>
                </motion.div>
              ))}
            </div>
          </motion.div>
        </div>
      );
    };

    const RoadmapSlide = ({ data }) => (
      <div className="h-full flex flex-col items-center justify-center px-6 py-12 overflow-y-auto hide-scrollbar">
        <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className="max-w-3xl w-full">
          <h2 className="title-font text-3xl md:text-4xl font-black text-neutral-900 mb-8 text-center">{data.title}</h2>
          <div className="space-y-4">
            {data.phases.map((phase, i) => (
              <motion.div key={i} initial={{ opacity: 0, x: -20 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.15 * i }} className="flex items-stretch gap-4">
                <div className="flex flex-col items-center">
                  <div className="w-12 h-12 rounded-full flex items-center justify-center text-xl font-black text-neutral-900" style={{ backgroundColor: 'var(--accent)' }}>{phase.phase}</div>
                  {i < data.phases.length - 1 && <div className="w-0.5 flex-1 bg-neutral-200 my-2"></div>}
                </div>
                <div className="flex-1 bg-neutral-50 rounded-xl p-4 border border-neutral-200">
                  <div className="flex items-center justify-between mb-1">
                    <span className="font-bold text-neutral-900">{phase.name}</span>
                    <span className="text-xs font-medium px-2 py-1 rounded-full" style={{ backgroundColor: 'rgba(var(--accent-rgb), 0.15)', color: 'var(--accent-dark)' }}>{phase.timeline}</span>
                  </div>
                  <p className="text-neutral-600 text-sm">{phase.desc}</p>
                </div>
              </motion.div>
            ))}
          </div>
          <motion.p initial={{ opacity: 0 }} animate={{ opacity: 1 }} transition={{ delay: 0.6 }} className="text-center text-neutral-600 font-medium mt-6 px-4 py-3 rounded-xl" style={{ backgroundColor: 'rgba(var(--accent-rgb), 0.1)' }}>
            Your best organic content becomes your first ad creative.
          </motion.p>
        </motion.div>
      </div>
    );

    const QuizSlide = ({ data, onAnswer, showFeedback, selectedAnswer, onShowGif, onHideGif }) => {
      const isCorrect = selectedAnswer === data.correctIndex;
      useEffect(() => {
        if (showFeedback) {
          const gif = isCorrect ? getRandomGif(celebrationGifs) : getRandomGif(empathyGifs);
          const side = Math.random() > 0.5 ? 'left' : 'right';
          onShowGif(gif, '60%', side);
        }
        return () => { if (showFeedback) onHideGif(); };
      }, [showFeedback, isCorrect, onShowGif, onHideGif]);
      return (
        <div className="h-full flex flex-col items-center justify-center px-6 py-12 overflow-y-auto hide-scrollbar">
          <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className="max-w-2xl w-full">
            <div className="inline-flex items-center gap-2 px-4 py-2 rounded-full text-sm font-semibold mb-6" style={{ backgroundColor: 'rgba(var(--accent-rgb), 0.15)', color: 'var(--accent-dark)' }}><Icons.Sparkles /> Quick Check</div>
            <h2 className="title-font text-2xl md:text-3xl font-black text-neutral-900 mb-8">{data.question}</h2>
            <div className="space-y-3 mb-6">
              {data.options.map((option, i) => {
                const isSelected = selectedAnswer === i;
                const isCorrectOption = i === data.correctIndex;
                let btnClass = "w-full p-4 md:p-5 text-left rounded-xl border-2 transition-all ";
                if (showFeedback) {
                  if (isCorrectOption) btnClass += "border-green-500 bg-green-50";
                  else if (isSelected && !isCorrectOption) btnClass += "border-red-500 bg-red-50";
                  else btnClass += "border-neutral-200 opacity-50";
                } else {
                  btnClass += "border-neutral-200 hover:border-neutral-400 cursor-pointer";
                }
                return (
                  <motion.button key={i} onClick={() => !showFeedback && onAnswer(i)} disabled={showFeedback} className={btnClass}>
                    <div className="flex items-center gap-3">
                      <span className="flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold" style={{ backgroundColor: isSelected ? (isCorrectOption ? '#22c55e' : '#ef4444') : 'var(--accent)', color: isSelected ? 'white' : '#1a1a1a' }}>
                        {showFeedback && isSelected ? (isCorrectOption ? <Icons.Check /> : <Icons.X />) : String.fromCharCode(65 + i)}
                      </span>
                      <span className="text-sm md:text-base text-neutral-700">{option}</span>
                    </div>
                  </motion.button>
                );
              })}
            </div>
            <AnimatePresence>
              {showFeedback && (
                <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} exit={{ opacity: 0 }} className={`p-5 rounded-xl border-2 ${isCorrect ? 'bg-green-50 border-green-300' : 'bg-amber-50 border-amber-300'}`}>
                  <p className="font-bold mb-2 text-lg">{isCorrect ? 'üéâ Brilliant!' : 'üí™ Almost!'}</p>
                  <p className="text-neutral-700 text-sm md:text-base">{isCorrect ? data.feedback.correct : data.feedback.incorrect}</p>
                </motion.div>
              )}
            </AnimatePresence>
          </motion.div>
        </div>
      );
    };

    const ActionChecklistSlide = ({ data }) => (
      <div className="h-full flex flex-col items-center justify-center px-6 py-12 overflow-y-auto hide-scrollbar">
        <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className="max-w-2xl w-full">
          <h2 className="title-font text-3xl md:text-4xl font-black text-neutral-900 mb-8 text-center">{data.title}</h2>
          <div className="space-y-4">
            {data.items.map((item, i) => (
              <motion.div key={i} initial={{ opacity: 0, x: -20 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.1 * i }} className="flex items-start gap-4 p-4 bg-neutral-50 rounded-xl border border-neutral-200">
                <span className="flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold text-neutral-900" style={{ backgroundColor: 'var(--accent)' }}>{i + 1}</span>
                <p className="text-neutral-700 text-sm md:text-base pt-1">{item}</p>
              </motion.div>
            ))}
          </div>
        </motion.div>
      </div>
    );

    const CompletionSlide = ({ nextLesson }) => (
      <div className="h-full flex flex-col items-center justify-center text-center px-8 hide-scrollbar overflow-y-auto py-8">
        <motion.div initial={{ opacity: 0, scale: 0 }} animate={{ opacity: 1, scale: 1 }} transition={{ type: 'spring', duration: 0.5 }} className="w-16 h-16 rounded-xl flex items-center justify-center mb-4 text-white" style={{ background: 'linear-gradient(135deg, var(--accent), var(--accent-dark))', boxShadow: '0 6px 24px rgba(var(--accent-rgb), 0.35)' }}><Icons.Check /></motion.div>
        <motion.h2 initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.15 }} className="slide-title text-2xl md:text-3xl text-black mb-3">Lesson Complete</motion.h2>
        <motion.p initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.25 }} className="text-neutral-500 text-sm mb-5 max-w-md leading-relaxed">Master organic first. Find winning hooks for free. Then scale with paid ads. This is the path from $0 to $10M.</motion.p>
        {nextLesson && (
          <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.35 }} className="bg-neutral-900 rounded-xl p-5 max-w-md w-full mb-4">
            <p className="text-neutral-500 text-xs uppercase tracking-wider mb-2">Up Next</p>
            <h3 className="text-white font-bold text-lg mb-1">{nextLesson.title}</h3>
            <p className="text-neutral-400 text-xs">{nextLesson.teaser}</p>
          </motion.div>
        )}
      </div>
    );

    const LessonApp = () => {
      const [currentSlide, setCurrentSlide] = useState(0);
      const [direction, setDirection] = useState(0);
      const [userName] = useState('Builder');
      const [selectedAnswer, setSelectedAnswer] = useState(null);
      const [showFeedback, setShowFeedback] = useState(false);
      const [gifConfig, setGifConfig] = useState(null);

      const showGif = useCallback((url, height, side) => setGifConfig({ url, height, side }), []);
      const hideGif = useCallback(() => setGifConfig(null), []);

      const slide = slides[currentSlide];
      const isFirstSlide = currentSlide === 0;
      const isLastSlide = currentSlide === slides.length - 1;

      const nextSlide = useCallback(() => { if (!isLastSlide) { setDirection(1); setCurrentSlide(prev => prev + 1); setSelectedAnswer(null); setShowFeedback(false); hideGif(); } }, [isLastSlide, hideGif]);
      const prevSlide = useCallback(() => { if (!isFirstSlide) { setDirection(-1); setCurrentSlide(prev => prev - 1); setSelectedAnswer(null); setShowFeedback(false); hideGif(); } }, [isFirstSlide, hideGif]);
      const goToSlide = useCallback((index) => { if (index >= 0 && index < slides.length) { setDirection(index > currentSlide ? 1 : -1); setCurrentSlide(index); setSelectedAnswer(null); setShowFeedback(false); hideGif(); } }, [currentSlide, hideGif]);
      const handleAnswer = useCallback((index) => { setSelectedAnswer(index); setShowFeedback(true); }, []);

      useEffect(() => {
        const handleKeyDown = (e) => {
          if (e.key === 'ArrowRight' && !isLastSlide) nextSlide();
          if (e.key === 'ArrowLeft' && !isFirstSlide) prevSlide();
        };
        window.addEventListener('keydown', handleKeyDown);
        return () => window.removeEventListener('keydown', handleKeyDown);
      }, [nextSlide, prevSlide, isFirstSlide, isLastSlide]);

      const slideVariants = {
        enter: (d) => ({ x: d > 0 ? '100%' : '-100%', opacity: 0 }),
        center: { x: 0, opacity: 1 },
        exit: (d) => ({ x: d < 0 ? '100%' : '-100%', opacity: 0 })
      };

      const renderSlide = () => {
        switch(slide.type) {
          case 'welcome': return <WelcomeSlide data={slide} onStart={nextSlide} userName={userName} onShowGif={showGif} onHideGif={hideGif} />;
          case 'hook': return <HookSlide data={slide} />;
          case 'quote': return <QuoteSlide data={slide} />;
          case 'stats': return <StatsSlide data={slide} />;
          case 'content': return <ContentSlide data={slide} />;
          case 'example': return <ExampleSlide data={slide} />;
          case 'cards': return <CardsSlide data={slide} />;
          case 'roadmap': return <RoadmapSlide data={slide} />;
          case 'quiz': return <QuizSlide data={slide} onAnswer={handleAnswer} showFeedback={showFeedback} selectedAnswer={selectedAnswer} onShowGif={showGif} onHideGif={hideGif} />;
          case 'action-checklist': return <ActionChecklistSlide data={slide} />;
          case 'completion': return <CompletionSlide nextLesson={LESSON_CONFIG.nextLesson} />;
          default: return null;
        }
      };

      const showPrev = !isFirstSlide;
      const showNext = !isLastSlide && slide.type !== 'welcome';

      return (
        <div className="relative w-full h-screen flex flex-col bg-white overflow-hidden">
          <div className="flex-1 relative overflow-hidden">
            <AnimatePresence initial={false} custom={direction} mode="wait">
              <motion.div key={currentSlide} custom={direction} variants={slideVariants} initial="enter" animate="center" exit="exit" transition={{ type: 'spring', stiffness: 300, damping: 30 }} className="absolute inset-0">
                {renderSlide()}
              </motion.div>
            </AnimatePresence>
          </div>

          {showPrev && (<button onClick={prevSlide} className="absolute left-5 top-1/2 -translate-y-1/2 w-12 h-12 rounded-full bg-white shadow-lg border border-neutral-200 flex items-center justify-center text-neutral-600 hover:text-neutral-900 hover:scale-110 transition-all z-20"><Icons.ChevronLeft /></button>)}
          {showNext && (<button onClick={nextSlide} className="absolute right-5 top-1/2 -translate-y-1/2 w-12 h-12 rounded-full shadow-lg flex items-center justify-center text-neutral-900 hover:scale-110 transition-all z-20" style={{ backgroundColor: 'var(--accent)' }}><Icons.ChevronRight /></button>)}

          <AnimatePresence>
            {gifConfig && (
              <motion.div initial={{ opacity: 0, y: 50 }} animate={{ opacity: 1, y: 0 }} exit={{ opacity: 0, y: 50 }} className={`absolute ${gifConfig.side === 'left' ? 'left-4 md:left-8' : 'right-4 md:right-8'} bottom-0 pointer-events-none`} style={{ zIndex: 15, height: gifConfig.height }}>
                <video autoPlay loop muted playsInline className="h-full w-auto object-contain object-bottom">
                  <source src={gifConfig.url} type="video/mp4" />
                </video>
              </motion.div>
            )}
          </AnimatePresence>

          <div className="px-6 md:px-8 py-5 border-t border-neutral-100 flex-shrink-0 relative z-10">
            <div className="flex items-center justify-center gap-2.5">
              {slides.map((_, i) => (<button key={i} onClick={() => goToSlide(i)} className={`w-2.5 h-2.5 rounded-full transition-all ${i === currentSlide ? 'scale-125' : 'bg-neutral-300 hover:bg-neutral-400'}`} style={i === currentSlide ? { backgroundColor: 'var(--accent)' } : {}} />))}
            </div>
          </div>
        </div>
      );
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<LessonApp />);
  </script>
</body>
</html>
