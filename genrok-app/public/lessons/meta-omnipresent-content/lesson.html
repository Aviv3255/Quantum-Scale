<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Omnipresent Content: Become Famous in Your Niche | Quantum Scale</title>
  <script src="https://cdn.tailwindcss.com" defer></script>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" defer></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" defer></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js" defer></script>
  <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js" defer></script>
  <script src="../shared/greetings.js" defer></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://unpkg.com" crossorigin>
  <link rel="preconnect" href="https://cdn.tailwindcss.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fraunces:wght@400;500;600;700;800;900&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root { --accent: #3b82f6; --accent-dark: #2563eb; --accent-light: #93c5fd; --accent-rgb: 59, 130, 246; }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: 'Inter', sans-serif; background: transparent; -webkit-font-smoothing: antialiased; }
    .title-font { font-family: 'Fraunces', serif; font-weight: 900; letter-spacing: -0.02em; line-height: 1.1; }
    h1, h2, h3, .slide-title { font-family: 'Fraunces', serif; font-weight: 900; letter-spacing: -0.02em; line-height: 1.1; }
    ::selection { background: var(--accent); color: white; }
    .slide-scroll::-webkit-scrollbar { display: none; }
    .slide-scroll { -ms-overflow-style: none; scrollbar-width: none; }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { motion, AnimatePresence } = window.Motion;
    const { useState, useEffect, useCallback, useMemo } = React;

    const getUserName = () => { const params = new URLSearchParams(window.location.search); return params.get('userName') || 'Builder'; };

    const LESSON_CONFIG = {
      id: 'meta-omnipresent-content',
      title: 'Omnipresent Content: Become Famous in Your Niche',
      description: 'The master strategy for high-LTV businesses: 14 ad sets, frequency cap 1/7 days, 2 unique touchpoints daily. Here\'s how to build deep relationships without ad fatigue.',
      accentColor: '#3b82f6',
      duration: '5 min',
      nextLesson: { id: 'meta-hybrid-adset', title: 'The Hybrid Adset Strategy', teaser: 'Learn how to teach AI your perfect customer.' }
    };

    const celebrationGifs = [
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_doing_a_quick_victory_dance_move_high_energy_c_d03b798b-a518-4e6c-bcae-d69b2dd50486_2.mp4',
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_jumping_in_the_air_arms_raised_high_YESSS_cele_201477e8-3df4-405a-bc81-81d1747e5c6c_2.mp4',
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_playing_air_guitar_light_headbanging_rockstar__0702007e-9e84-4d9e-8f99-8ee23d0b65f8_2.mp4',
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_doing_the_running_man_dance_move_vintage_cool__25682b0f-cf4c-4e93-8dcb-6c3dac8135cd_0.mp4',
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_standing_and_clapping_enthusiastically_mouth_o_992ac4fd-9a0e-4963-bbcc-a5271f25f4fd_3.mp4'
    ];
    const getRandomCelebrationGif = () => celebrationGifs[Math.floor(Math.random() * celebrationGifs.length)];

    const empathyGifs = [
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_thumbs_down_with_encouraging_nod_close_keep_go_613e541f-c072-436f-aee7-f99cd6f834fc_2.mp4',
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_shaking_head_side_to_side_sadly_disappointed_e_c4a4be22-6a70-4738-8612-3039454fef37_1.mp4',
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_covering_face_with_palm_facepalm_gesture_disap_211b0566-078f-4d42-9c41-547b14f5827c_0.mp4',
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_looking_down_sadly_shoulders_slumped_disappoin_790d48bd-e49e-40ea-9979-d3e86fa3a422_2.mp4'
    ];
    const getRandomEmpathyGif = () => empathyGifs[Math.floor(Math.random() * empathyGifs.length)];

    const slides = [
      { type: 'welcome', learningGoals: ['Why omnipresent content works for high-LTV businesses ($1,000+ customer value)', 'The exact structure: 14 ad sets, 1 ad each, frequency cap 1/7 days', 'How this creates 2 unique touchpoints daily without ad fatigue'] },
      { type: 'hook', headline: 'Your prospects see you everywhere. Not annoying. Not spammy. Just... present. Value. Proof. Testimonial. Brand. Different messages. Different angles. Every single day. Until you\'re the only logical choice when they\'re ready to buy.', subtext: 'This is Omnipresent Content - a framework designed to build deep relationships with your target audience over time. It\'s not about immediate conversion. It\'s about becoming famous within your niche by delivering consistent value, building unshakeable trust, and being perpetually top-of-mind.' , brandImage: 'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/Meta_Platforms_Inc._logo_(cropped).svg.png', brandName: 'Facebook' },
      { type: 'content', title: 'The Strategy: Omnipresent Content', body: 'The Omnipresent Content strategy is a framework designed to build a deep relationship with your target audience over time. It\'s not about immediate conversion; it\'s about becoming the only logical choice when they are ready to buy.\n\nBest suited for:\n• Businesses with a customer lifetime value greater than $1,000\n• Expertise-based services (coaches, consultants, agencies)\n• High-end or bespoke products with longer sales cycles' , characterVideo: 'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_drawing_a_strategy_whiteboardplanning_100_pure_95302861-8c44-460f-bcd1-7faa302067c4_3.mp4', characterPosition: 'left'},
      { type: 'content', title: 'The Goal of Omnipresence', body: 'To become "famous" within your niche audience by delivering consistent value, building unshakeable trust, and being perpetually top-of-mind.\n\nThis is a marathon, not a sprint. The returns compound over time as your brand becomes synonymous with expertise in your space.\n\nWhen someone in your niche needs what you offer, you\'re the first (and often only) name that comes to mind.' },
      { type: 'content', title: 'Why This Works for High-LTV Businesses', body: 'When your customer is worth $1,000, $5,000, or $10,000+, the math changes completely.\n\nYou can afford to invest in relationship-building. A $2,000 ad spend to acquire a $10,000 client is profitable. Most advertisers are chasing $50 sales and can\'t afford this strategy.' },
      { type: 'content', title: 'The Trust Advantage', body: 'Longer sales cycles need trust. High-ticket buyers don\'t impulse purchase. They research. They compare. They need to KNOW you before they buy from you.\n\nOmnipresence builds category dominance. When someone sees your ads consistently for weeks, you become the expert in their mind. When they\'re ready to buy, they don\'t even consider competitors.' },
      { type: 'content', title: 'Teaching the Algorithm', body: 'This strategy teaches GEM that your brand is valuable and welcome in the user\'s daily experience, not an annoyance.\n\nThe gentle, persistent presence signals quality and builds positive associations. The AI learns that your content adds value to the user\'s feed, not disrupts it.' },
      { type: 'mockup', title: 'The Architecture of Omnipresence', description: '1 Campaign (Awareness/Engagement Objective) with 14 Ad Sets (identical targeting & budget). Each ad set contains 1 unique ad. Frequency cap: 1 impression per 7 days per ad set.', mockupType: 'campaign-structure' },
      { type: 'content', title: 'The Critical Setting: Frequency Cap', body: 'Frequency Cap: 1 Impression per 7 Days (per ad set).\n\nThis is the secret sauce. Without this setting, Meta would show the same ad repeatedly and burn out your audience in days.\n\nWith 14 ad sets and a frequency cap of 1/7 days, here\'s what happens:\n\nEach prospect sees a maximum of 14 DIFFERENT ads from you over 7 days. This averages to two unique, non-fatiguing touchpoints every single day.\n\nThey never see the same ad twice in a week. Fresh messages. New angles. Different value propositions. No fatigue.\n\nThe result: Your brand becomes part of their daily scroll, but never feels repetitive or annoying. You\'re present without being pushy.' },
      { type: 'stats-comparison', title: 'The Resulting Experience for the Prospect', comparison: {
        left: { label: 'Without Frequency Cap', value: 'Same ad 20x in 2 days', result: 'Instant fatigue, negative brand perception', color: '#ef4444' },
        right: { label: 'With Frequency Cap (1/7)', value: '14 different ads in 7 days', result: '2 unique touchpoints daily, no fatigue', color: '#10b981' }
      }},
      { type: 'content', title: 'Four Pillars of Trust', body: 'The 14 ads are not random. They are organized into four categories, each designed to build a different facet of the customer relationship and teach the AI a different aspect of your value proposition.\n\nEach pillar serves a specific purpose in the buyer\'s journey and sends a unique signal to the algorithm about your brand\'s value.' },
      { type: 'content', title: 'Pillar 1 & 2: Value and Demonstration', body: 'Pillar 1: Value Ads (4 Ads)\nDeliver helpful, valuable information that solves a problem for your prospect.\nTeaches the AI: "My brand is a source of expertise and help."\n\nPillar 2: Demonstration Ads (4 Ads)\nShow exactly how your product or service works, what the process looks like, and what to expect.\nTeaches the AI: "My brand delivers a clear, tangible solution."' },
      { type: 'content', title: 'Pillar 3 & 4: Testimonial and Call-to-Action', body: 'Pillar 3: Testimonial Ads (4 Ads)\nProvide social proof, case studies, and reviews to build credibility and reduce risk.\nTeaches the AI: "My brand is trusted and delivers proven results."\n\nPillar 4: Call-to-Action Ads (2 Ads)\nClearly and gently state the next logical step for a prospect who is ready.\nTeaches the AI: "This is the ultimate conversion action we are optimizing for."' },
      { type: 'mockup', title: 'The Four Pillars Structure', description: 'Each pillar teaches GEM a different aspect of your value: expertise, solution delivery, trust, and conversion action.', mockupType: 'four-pillars' },
      { type: 'content', title: 'How GEM Learns from Your Content', body: 'This gentle, persistent presence teaches the algorithm that your brand is a valuable and welcome part of the user\'s daily experience, not an annoyance.\n\nGEM learns from engagement patterns across all 14 ads. When users engage with value content, watch demonstrations, and read testimonials without negative feedback, GEM understands your brand differently.' },
      { type: 'content', title: 'The AI Recognition Pattern', body: 'The AI recognizes: This brand educates. This brand demonstrates value. This brand has social proof. This brand has a clear conversion action.\n\nOver time, GEM becomes better at finding people who respond positively to your omnipresent approach. It identifies patterns in who engages with which pillar, and optimizes delivery accordingly.\n\nThe result: Your ads get shown to people who actually appreciate seeing them. Lower CPMs. Higher engagement. Better conversion rates when they\'re finally ready to buy.' },
      { type: 'quote', data: {
        quote: 'This is a marathon, not a sprint. It will not have a high direct ROAS in Ads Manager, and that\'s by design. Its true impact is measured by its effect on your entire ecosystem.',
        context: 'Redefining success metrics for omnipresent content'
      }},
      { type: 'content', title: 'Measuring Success: The Real KPIs', body: 'Omnipresent Content is a long-term asset-building strategy. Don\'t judge it by immediate ROAS in Ads Manager. Look for these leading indicators instead:\n\nImproved Performance in Other Campaigns: A noticeable lift in conversion rates and ROAS in your separate, direct-response sales campaigns. Warm audiences convert better.\n\nQualitative Feedback: Prospects and new customers consistently say things like, "I see you guys everywhere." This is the goal.\n\nGrowth in Brand Metrics: A steady increase in social media follower counts and positive engagement on your ads and organic posts. You\'re building a community.\n\nIncreased Inbound Demand: More organic and direct traffic, and more leads saying they\'ve been "following you for a while." Trust has been built.\n\nThese are the signals that omnipresent content is working. You\'re not just running ads. You\'re building a brand that dominates your category in the minds of your ideal customers.' },
      { type: 'quiz', question: 'What is the PRIMARY benefit of the frequency cap (1 impression per 7 days per ad set) in Omnipresent Content?', options: ['It reduces overall ad spend significantly', 'It ensures each prospect sees 14 DIFFERENT ads over 7 days without repetition or fatigue', 'It increases the click-through rate of each individual ad', 'It allows Meta to show ads only during peak engagement hours'], correctIndex: 1, feedback: { correct: 'Exactly! The frequency cap is the secret sauce. With 14 ad sets each capped at 1 impression per 7 days, prospects see a maximum of 14 DIFFERENT ads from you over the week - averaging 2 unique, non-fatiguing touchpoints every single day. They never see the same ad twice. Fresh messages, new angles, different value propositions. No fatigue. Just persistent, valuable presence that builds trust without annoyance.', incorrect: 'Not quite. The frequency cap\'s magic is in VARIETY, not cost or timing. By capping each of the 14 ad sets at 1 impression per 7 days, you ensure prospects see 14 DIFFERENT ads over the week - averaging 2 unique touchpoints daily. They never see the same ad twice. No fatigue, just fresh value, proof, demonstrations, and brand messages. Without this cap, Meta would spam the same ad repeatedly and burn out your audience in 2 days. The cap creates omnipresence without annoyance.' }},
      { type: 'completion', sources: [{ name: 'Meta - The Meta Iceberg: Unlocking AI Mastery', url: 'https://www.facebook.com/business/' }] }
    ];

    const Icons = {
      Clock: () => <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>,
      Check: () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3"><polyline points="20 6 9 17 4 12"/></svg>,
      X: () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>,
      ArrowLeft: () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></svg>,
      ArrowRight: () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg>,
      Lightbulb: () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5"/><path d="M9 18h6"/><path d="M10 22h4"/></svg>,
      Layout: () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><line x1="3" y1="9" x2="21" y2="9"/><line x1="9" y1="21" x2="9" y2="9"/></svg>,
      Star: () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>,
      MessageCircle: () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"/></svg>,
    };

    const WelcomeSlide = ({ data, onStart, userName, onShowGif, onHideGif }) => {
      const welcomeData = useMemo(() => getTimeBasedWelcome(), []);
      const gifSide = useMemo(() => Math.random() > 0.5 ? 'left' : 'right', []);
      useEffect(() => { onShowGif(welcomeData.gif, '65%', gifSide); return () => onHideGif(); }, [welcomeData.gif, gifSide, onShowGif, onHideGif]);

      return (
        <div className="h-full w-full relative overflow-hidden">
          <div className="h-full flex flex-col items-center justify-center text-center px-6 py-4 relative z-20">
            <motion.h1 initial={{ opacity: 0, y: 40 }} animate={{ opacity: 1, y: 0 }} className="title-font text-3xl sm:text-4xl md:text-5xl lg:text-6xl text-black mb-2 md:mb-3">{LESSON_CONFIG.title}</motion.h1>
            <motion.p initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.1 }} className="text-neutral-600 text-base md:text-lg lg:text-xl mb-2 md:mb-3 max-w-lg leading-relaxed" dangerouslySetInnerHTML={{ __html: formatGreeting(welcomeData.greeting, `<span class="font-bold text-neutral-900">${userName}</span>`) }} />
            <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.15 }} className="flex items-center justify-center gap-1.5 text-neutral-400 text-[10px] md:text-xs mb-2 md:mb-3"><Icons.Clock /><span>{LESSON_CONFIG.duration}</span></motion.div>
            <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.2 }} className="bg-neutral-900 rounded-xl md:rounded-2xl p-3 md:p-5 mb-3 md:mb-4 max-w-sm w-full mx-auto">
              <p className="text-neutral-500 text-[9px] md:text-[11px] uppercase tracking-wider mb-2 md:mb-3">In this lesson</p>
              <ul className="space-y-1.5 md:space-y-2">
                {data.learningGoals.map((goal, i) => (
                  <motion.li key={i} initial={{ opacity: 0, x: -10 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.25 + i * 0.05 }} className="flex items-start gap-2 text-left">
                    <span className="w-5 h-5 rounded-md flex items-center justify-center text-[9px] font-bold text-white flex-shrink-0 mt-0.5" style={{ background: `linear-gradient(135deg, var(--accent), var(--accent-dark))` }}>{i + 1}</span>
                    <span className="text-neutral-300 text-[11px] md:text-sm leading-snug">{goal}</span>
                  </motion.li>
                ))}
              </ul>
            </motion.div>
            <motion.button initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.45 }} onClick={onStart} whileHover={{ scale: 1.02 }} whileTap={{ scale: 0.98 }} className="px-6 md:px-7 py-2.5 md:py-3 rounded-xl text-white font-semibold text-sm md:text-base" style={{ background: `linear-gradient(135deg, var(--accent), var(--accent-dark))` }}>Let's Go</motion.button>
          </div>
        </div>
      );
    };

    const HookSlide = ({ data }) => (
      <div className="h-full relative overflow-hidden">
        <div className="h-full flex flex-col justify-center px-8 md:px-16 max-w-3xl mx-auto slide-scroll overflow-y-auto py-10 relative z-10">
          <motion.div initial={{ opacity: 0, y: 40 }} animate={{ opacity: 1, y: 0 }} className="mb-6">
            <span className="inline-block px-3 py-1 rounded-full text-xs font-semibold mb-4" style={{ background: `rgba(var(--accent-rgb), 0.1)`, color: 'var(--accent)' }}>The Hook</span>
            <h2 className="slide-title text-3xl md:text-4xl lg:text-5xl text-black leading-tight">{data.headline}</h2>
          </motion.div>
          <motion.p initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.15 }} className="text-lg md:text-xl text-neutral-600 leading-relaxed">{data.subtext}</motion.p>
        </div>
        {data.brandImage && (
          <motion.div initial={{ opacity: 0, x: 30 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.3, duration: 0.5 }}
            className="absolute bottom-0 right-0 z-0 pointer-events-none" style={{ height: '30%', maxHeight: '200px', marginRight: '3%', marginBottom: '5%' }}>
            <img src={data.brandImage} alt={data.brandName || ''} className="h-full w-auto object-contain" style={{ opacity: 1 }} />
          </motion.div>
        )}
      </div>
    );

    const ContentSlide = ({ data }) => (
      <div className="h-full flex flex-col justify-center px-8 md:px-16 max-w-3xl mx-auto slide-scroll overflow-y-auto py-10">
        <motion.h2 initial={{ opacity: 0, y: 40 }} animate={{ opacity: 1, y: 0 }} className="slide-title text-2xl md:text-3xl lg:text-4xl text-black mb-6 relative z-10">{data.title}</motion.h2>
        <motion.p initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.1 }} className="text-base md:text-lg text-neutral-600 leading-relaxed whitespace-pre-line">{data.body}</motion.p>
      
        {data.characterVideo && (
          <motion.div
            initial={{ opacity: 0, y: 40 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ delay: 0.4, duration: 0.6 }}
            className={`absolute bottom-0 ${data.characterPosition === 'left' ? 'left-6' : 'right-6'} z-0 pointer-events-none`}
            style={{ height: '35%', maxHeight: '280px' }}>
            <video autoPlay loop muted playsInline className="h-full w-auto object-contain object-bottom">
              <source src={data.characterVideo} type="video/mp4" />
            </video>
          </motion.div>
        )}
      </div>
    );

    const MockupSlide = ({ data }) => {
      if (data.mockupType === 'campaign-structure') {
        return (
          <div className="h-full flex flex-col justify-center px-6 md:px-12 max-w-5xl mx-auto slide-scroll overflow-y-auto py-8">
            <motion.h2 initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} className="slide-title text-2xl md:text-3xl text-black text-center mb-4">{data.title}</motion.h2>
            <motion.p initial={{ opacity: 0, y: 10 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.1 }} className="text-sm text-neutral-600 text-center mb-8 max-w-3xl mx-auto">{data.description}</motion.p>
            <div className="space-y-6">
              <motion.div initial={{ opacity: 0, y: 40 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.2 }} className="bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl p-4 text-center text-white">
                <p className="text-sm font-semibold">1 Campaign (Awareness/Engagement Objective)</p>
              </motion.div>
              <motion.div initial={{ opacity: 0, y: 40 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.3 }} className="bg-gradient-to-r from-blue-400 to-blue-500 rounded-xl p-4 text-center text-white">
                <p className="text-sm font-semibold">14 Ad Sets (Identical Targeting & Budget)</p>
              </motion.div>
              <div className="grid grid-cols-7 gap-2">
                {Array.from({ length: 14 }).map((_, i) => (
                  <motion.div key={i} initial={{ opacity: 0, scale: 0 }} animate={{ opacity: 1, scale: 1 }} transition={{ delay: 0.4 + i * 0.05 }} className="aspect-square bg-white border-2 border-blue-300 rounded-lg flex items-center justify-center">
                    <span className="text-xs font-bold text-blue-600">{i + 1}</span>
                  </motion.div>
                ))}
              </div>
              <motion.div initial={{ opacity: 0, y: 40 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 1.2 }} className="bg-green-50 border-2 border-green-200 rounded-xl p-4 text-center">
                <p className="text-sm font-semibold text-green-700">1 Ad Per Ad Set (14 Unique Ads Total)</p>
                <p className="text-xs text-green-600 mt-1">Frequency Cap: 1 impression per 7 days</p>
              </motion.div>
            </div>
          </div>
        );
      }

      if (data.mockupType === 'four-pillars') {
        const pillars = [
          { icon: <Icons.Lightbulb />, label: 'Value', count: '4 Ads', color: '#3b82f6', description: 'Expertise & help' },
          { icon: <Icons.Layout />, label: 'Demonstration', count: '4 Ads', color: '#8b5cf6', description: 'Clear solution' },
          { icon: <Icons.Star />, label: 'Testimonial', count: '4 Ads', color: '#10b981', description: 'Proven results' },
          { icon: <Icons.MessageCircle />, label: 'Call-to-Action', count: '2 Ads', color: '#f59e0b', description: 'Conversion action' }
        ];

        return (
          <div className="h-full flex flex-col justify-center px-6 md:px-12 max-w-4xl mx-auto slide-scroll overflow-y-auto py-8">
            <motion.h2 initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} className="slide-title text-2xl md:text-3xl text-black text-center mb-4">{data.title}</motion.h2>
            <motion.p initial={{ opacity: 0, y: 10 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.1 }} className="text-sm text-neutral-600 text-center mb-8 max-w-2xl mx-auto">{data.description}</motion.p>
            <div className="grid md:grid-cols-2 gap-6">
              {pillars.map((pillar, i) => (
                <motion.div key={i} initial={{ opacity: 0, scale: 0.9 }} animate={{ opacity: 1, scale: 1 }} transition={{ delay: 0.2 + i * 0.15 }} className="bg-white border-2 rounded-xl p-6" style={{ borderColor: pillar.color }}>
                  <div className="flex items-center gap-3 mb-3">
                    <div className="w-12 h-12 rounded-lg flex items-center justify-center text-white" style={{ background: pillar.color }}>
                      {pillar.icon}
                    </div>
                    <div>
                      <h3 className="text-lg font-bold text-black">Pillar {i + 1}: {pillar.label}</h3>
                      <p className="text-xs text-neutral-500">{pillar.count}</p>
                    </div>
                  </div>
                  <p className="text-sm text-neutral-600">Teaches AI: "{pillar.description}"</p>
                </motion.div>
              ))}
            </div>
          </div>
        );
      }
    };

    const StatsComparisonSlide = ({ data }) => (
      <div className="h-full flex flex-col justify-center px-6 md:px-12 max-w-4xl mx-auto slide-scroll overflow-y-auto py-8">
        <motion.h2 initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} className="slide-title text-2xl md:text-3xl text-black text-center mb-8">{data.title}</motion.h2>
        <div className="grid md:grid-cols-2 gap-6">
          <motion.div initial={{ opacity: 0, x: -30 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.2 }} className="bg-white border-2 rounded-xl p-6" style={{ borderColor: data.comparison.left.color }}>
            <div className="inline-block px-3 py-1 rounded-full text-xs font-semibold mb-4" style={{ background: `${data.comparison.left.color}20`, color: data.comparison.left.color }}>{data.comparison.left.label}</div>
            <div className="text-3xl font-bold mb-3" style={{ color: data.comparison.left.color }}>{data.comparison.left.value}</div>
            <p className="text-sm text-neutral-600">{data.comparison.left.result}</p>
          </motion.div>
          <motion.div initial={{ opacity: 0, x: 30 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.2 }} className="bg-white border-2 rounded-xl p-6" style={{ borderColor: data.comparison.right.color }}>
            <div className="inline-block px-3 py-1 rounded-full text-xs font-semibold mb-4" style={{ background: `${data.comparison.right.color}20`, color: data.comparison.right.color }}>{data.comparison.right.label}</div>
            <div className="text-3xl font-bold mb-3" style={{ color: data.comparison.right.color }}>{data.comparison.right.value}</div>
            <p className="text-sm text-neutral-600">{data.comparison.right.result}</p>
          </motion.div>
        </div>
      </div>
    );

    const QuoteSlide = ({ data }) => (
      <div className="h-full flex flex-col justify-center px-8 md:px-16 max-w-3xl mx-auto slide-scroll overflow-y-auto py-10">
        <motion.div initial={{ opacity: 0, scale: 0.95 }} animate={{ opacity: 1, scale: 1 }} transition={{ duration: 0.5 }} className="bg-gradient-to-br from-blue-50 to-blue-100 border-2 border-blue-200 rounded-2xl p-8 md:p-12">
          <div className="text-6xl mb-6 text-center" style={{ color: 'var(--accent)' }}>"</div>
          <p className="text-xl md:text-2xl font-semibold text-black text-center mb-6 leading-relaxed">{data.data.quote}</p>
          <p className="text-sm text-neutral-500 text-center italic">{data.data.context}</p>
        </motion.div>
      </div>
    );

    const QuizSlide = ({ data, onAnswer, onShowGif, onHideGif }) => {
      const [selected, setSelected] = useState(null);
      const [answered, setAnswered] = useState(false);
      const handleSelect = (index) => {
        if (answered) return;
        setSelected(index);
        setAnswered(true);
        const isCorrect = index === data.correctIndex;
        const gif = isCorrect ? getRandomCelebrationGif() : getRandomEmpathyGif();
        onShowGif(gif, '50%', 'center');
        setTimeout(() => onHideGif(), 3000);
        onAnswer(isCorrect);
      };

      return (
        <div className="h-full flex flex-col justify-center px-6 md:px-12 max-w-3xl mx-auto slide-scroll overflow-y-auto py-8">
          <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} className="text-center mb-6">
            <span className="inline-block px-3 py-1 rounded-full text-xs font-semibold mb-3" style={{ background: `rgba(var(--accent-rgb), 0.1)`, color: 'var(--accent)' }}>Knowledge Check</span>
            <h2 className="slide-title text-xl md:text-2xl text-black">{data.question}</h2>
          </motion.div>
          <div className="space-y-3 mb-6">
            {data.options.map((option, i) => (
              <motion.button key={i} initial={{ opacity: 0, x: -20 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.1 + i * 0.05 }} onClick={() => handleSelect(i)} disabled={answered} className={`w-full text-left p-4 rounded-xl border-2 transition-all ${answered ? (i === data.correctIndex ? 'border-green-500 bg-green-50' : i === selected ? 'border-red-500 bg-red-50' : 'border-neutral-200 bg-neutral-50') : 'border-neutral-200 bg-white hover:border-blue-300 hover:bg-blue-50'}`}>
                <div className="flex items-center gap-3">
                  <div className={`w-6 h-6 rounded-full flex items-center justify-center flex-shrink-0 ${answered ? (i === data.correctIndex ? 'bg-green-500' : i === selected ? 'bg-red-500' : 'bg-neutral-300') : 'bg-neutral-200'}`}>
                    {answered && i === data.correctIndex && <Icons.Check className="text-white" />}
                    {answered && i === selected && i !== data.correctIndex && <Icons.X className="text-white" />}
                  </div>
                  <span className="text-sm md:text-base text-neutral-700">{option}</span>
                </div>
              </motion.button>
            ))}
          </div>
          <AnimatePresence>
            {answered && (
              <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} exit={{ opacity: 0 }} className={`rounded-xl p-4 ${selected === data.correctIndex ? 'bg-green-50 border-2 border-green-200' : 'bg-blue-50 border-2 border-blue-200'}`}>
                <p className="text-sm text-neutral-700 leading-relaxed">{selected === data.correctIndex ? data.feedback.correct : data.feedback.incorrect}</p>
              </motion.div>
            )}
          </AnimatePresence>
        </div>
      );
    };

    const CompletionSlide = ({ data }) => (
      <div className="h-full flex flex-col justify-center items-center text-center px-6 py-10">
        <motion.div initial={{ scale: 0 }} animate={{ scale: 1 }} transition={{ type: 'spring', duration: 0.6 }}>
          <div className="w-20 h-20 rounded-full flex items-center justify-center mb-4 mx-auto" style={{ background: `linear-gradient(135deg, var(--accent), var(--accent-dark))` }}>
            <Icons.Check className="text-white" />
          </div>
        </motion.div>
        <motion.h2 initial={{ opacity: 0, y: 40 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.2 }} className="slide-title text-3xl md:text-4xl text-black mb-3">Lesson Complete!</motion.h2>
        <motion.p initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.3 }} className="text-neutral-600 text-base md:text-lg mb-6 max-w-md">You now understand how to use Omnipresent Content to become famous in your niche through strategic, non-fatiguing brand building.</motion.p>
        {data.sources && data.sources.length > 0 && (
          <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.4 }} className="bg-neutral-50 rounded-xl p-4 max-w-md w-full mb-6">
            <p className="text-xs uppercase tracking-wider text-neutral-400 mb-2">Sources</p>
            {data.sources.map((source, i) => (
              <a key={i} href={source.url} target="_blank" rel="noopener noreferrer" className="text-sm hover:underline block mb-1" style={{ color: 'var(--accent)' }}>{source.name}</a>
            ))}
          </motion.div>
        )}
        <motion.button initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.5 }} onClick={() => window.location.href = '/dashboard'} className="px-6 py-3 rounded-xl text-white font-semibold" style={{ background: `linear-gradient(135deg, var(--accent), var(--accent-dark))` }}>Back to Dashboard</motion.button>
      </div>
    );

    const LessonApp = () => {
      const [currentSlide, setCurrentSlide] = useState(0);
      const [direction, setDirection] = useState(0);
      const [userName] = useState(getUserName());
      const [gif, setGif] = useState({ src: null, opacity: 0, side: 'center' });

      const showGif = useCallback((src, opacity, side) => { setGif({ src, opacity, side }); }, []);
      const hideGif = useCallback(() => { setGif(prev => ({ ...prev, opacity: 0 })); }, []);

      const nextSlide = useCallback(() => {
        if (currentSlide < slides.length - 1) {
          setDirection(1);
          setCurrentSlide(prev => prev + 1);
        }
      }, [currentSlide]);

      const prevSlide = useCallback(() => {
        if (currentSlide > 0) {
          setDirection(-1);
          setCurrentSlide(prev => prev - 1);
        }
      }, [currentSlide]);

      const startLesson = useCallback(() => {
        setDirection(1);
        setCurrentSlide(1);
      }, []);

      const handleAnswer = useCallback((correct) => {
        setTimeout(nextSlide, 3000);
      }, [nextSlide]);

      const renderSlide = (slide) => {
        switch (slide.type) {
          case 'welcome': return <WelcomeSlide data={slide} onStart={startLesson} userName={userName} onShowGif={showGif} onHideGif={hideGif} />;
          case 'hook': return <HookSlide data={slide} />;
          case 'content': return <ContentSlide data={slide} />;
          case 'mockup': return <MockupSlide data={slide} />;
          case 'stats-comparison': return <StatsComparisonSlide data={slide} />;
          case 'quote': return <QuoteSlide data={slide} />;
          case 'quiz': return <QuizSlide data={slide} onAnswer={handleAnswer} onShowGif={showGif} onHideGif={hideGif} />;
          case 'completion': return <CompletionSlide data={slide} />;
          default: return <ContentSlide data={slide} />;
        }
      };

      const showPrev = currentSlide > 0;
      const showNext = currentSlide < slides.length - 1 && slides[currentSlide].type !== 'welcome';

      return (
        <div className="w-full h-screen bg-white flex flex-col relative">
          <div className="flex-1 relative overflow-hidden z-20">
            <AnimatePresence mode="wait" custom={direction}>
              <motion.div key={currentSlide} custom={direction} initial={{ opacity: 0, x: direction > 0 ? 100 : -100 }} animate={{ opacity: 1, x: 0 }} exit={{ opacity: 0, x: direction > 0 ? -100 : 100 }} transition={{ duration: 0.3 }} className="absolute inset-0">
                {renderSlide(slides[currentSlide])}
              </motion.div>
            </AnimatePresence>
            {showPrev && <button onClick={prevSlide} className="absolute left-5 top-1/2 -translate-y-1/2 w-12 h-12 rounded-full bg-neutral-100 hover:bg-neutral-200 flex items-center justify-center text-neutral-500 hover:text-neutral-700 transition-all z-10"><Icons.ArrowLeft /></button>}
            {showNext && <button onClick={nextSlide} className="absolute right-5 top-1/2 -translate-y-1/2 w-12 h-12 rounded-full bg-neutral-100 hover:bg-neutral-200 flex items-center justify-center text-neutral-500 hover:text-neutral-700 transition-all z-10"><Icons.ArrowRight /></button>}
          </div>
          <div className="px-6 md:px-8 py-5 border-t border-neutral-100 flex-shrink-0 relative z-10">
            <div className="flex items-center justify-center gap-2.5">
              {slides.map((_, i) => <button key={i} onClick={() => { if (Math.abs(i - currentSlide) === 1 || i === currentSlide) { setDirection(i > currentSlide ? 1 : -1); setCurrentSlide(i); } }} className="w-2.5 h-2.5 rounded-full transition-all duration-300" style={{ background: i === currentSlide ? 'var(--accent)' : '#d4d4d4', transform: i === currentSlide ? 'scale(1.3)' : 'scale(1)' }} />)}
            </div>
          </div>
          <AnimatePresence>
            {gif.src && (
              <motion.div initial={{ opacity: 0, y: 30 }} animate={{ opacity: 1, y: 0 }} exit={{ opacity: 0, y: 30 }} transition={{ type: 'spring', stiffness: 100 }} className={`absolute ${gif.side === 'left' ? 'left-4 md:left-8' : 'right-4 md:right-8'} bottom-0 pointer-events-none`} style={{ zIndex: 15, height: gif.opacity }}>
                <video autoPlay loop muted playsInline className="h-full w-auto object-contain object-bottom" style={{ background: 'transparent', border: 'none', boxShadow: 'none' }}>
                  <source src={gif.src} type="video/mp4" />
                </video>
              </motion.div>
            )}
          </AnimatePresence>
        </div>
      );
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<LessonApp />);
  </script>
</body>
</html>