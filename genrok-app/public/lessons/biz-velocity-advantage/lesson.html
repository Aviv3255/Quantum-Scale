<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>The Velocity Advantage | Quantum Scale</title>
  <script src="https://cdn.tailwindcss.com" defer></script>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" defer></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" defer></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js" defer></script>
  <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js" defer></script>
  <script src="../shared/greetings.js" defer></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fraunces:wght@400;500;600;700;800;900&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root { --accent: #10b981; --accent-dark: #059669; --accent-light: #34d399; --accent-rgb: 16, 185, 129; }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: 'Inter', sans-serif; background: transparent; -webkit-font-smoothing: antialiased; }
    .title-font { font-family: 'Fraunces', serif; font-weight: 900; letter-spacing: -0.02em; line-height: 1.1; }
    h1, h2, h3, .slide-title { font-family: 'Fraunces', serif; font-weight: 900; letter-spacing: -0.02em; line-height: 1.1; }
    ::selection { background: var(--accent); color: white; }
    .slide-scroll::-webkit-scrollbar { display: none; }
    .slide-scroll { -ms-overflow-style: none; scrollbar-width: none; }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { motion, AnimatePresence } = window.Motion;
    const { useState, useEffect, useCallback, useMemo } = React;

    const getUserName = () => { const params = new URLSearchParams(window.location.search); return params.get('userName') || 'Builder'; };
    const getInitialSlide = () => { const params = new URLSearchParams(window.location.search); const slide = params.get('slide'); return slide ? parseInt(slide, 10) : 0; };

    const LESSON_CONFIG = {
      id: 'biz-velocity-advantage',
      title: 'The Velocity Advantage',
      description: 'Why speed is the biggest unfair advantage in business',
      accentColor: '#10b981',
      duration: '8 min',
      nextLesson: { id: 'biz-asset-not-job', title: 'Build an Asset, Not a Job', teaser: 'The $3 million difference between earning income and building wealth.' }
    };

    const celebrationGifs = [
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_doing_a_quick_victory_dance_move_high_energy_c_d03b798b-a518-4e6c-bcae-d69b2dd50486_2.mp4',
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_jumping_in_the_air_arms_raised_high_YESSS_cele_201477e8-3df4-405a-bc81-81d1747e5c6c_2.mp4',
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_clapping_above_head_world_champion_celebration_484bd560-f049-41ca-b3d1-c03d7468ab56_2.mp4'
    ];
    const getRandomCelebrationGif = () => celebrationGifs[Math.floor(Math.random() * celebrationGifs.length)];

    const empathyGifs = [
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_shaking_head_side_to_side_sadly_disappointed_e_c4a4be22-6a70-4738-8612-3039454fef37_1.mp4',
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_covering_face_with_palm_facepalm_gesture_disap_211b0566-078f-4d42-9c41-547b14f5827c_0.mp4'
    ];
    const getRandomEmpathyGif = () => empathyGifs[Math.floor(Math.random() * empathyGifs.length)];

    const slides = [
      { type: 'welcome', learningGoals: ['Why moving slow is the most dangerous place to be', 'How to reframe mistakes as paid research', 'The proven frameworks top founders use to move 10x faster'] },
      { type: 'hook', headline: 'Speed isn\'t reckless. Slow is dangerous.', subtext: 'Most entrepreneurs think moving slow is safer. They research for months. Perfect their product. Wait for certainty. Then they launch... and fail anyway. Why? Because slow businesses generate no data. Fast businesses learn. Adapt. Win.', brandImage: 'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/The_Oodie_logo.webp', brandName: 'Oodie' },
      { type: 'quote-spotlight', quote: 'The biggest unfair advantage in business isn\'t money, talent, or connections. It\'s how fast you operate.', author: 'Davie Fogarty', context: 'Founder, The Oodie ($400M+ brand)' },
      { type: 'speed-vs-slow', title: 'The Speed vs Slow Reality', slow: { label: 'SLOW OPERATOR', time: '6 Months', data: 0, outcome: 'Still guessing' }, fast: { label: 'FAST OPERATOR', time: '6 Weeks', data: 47, outcome: 'Already pivoted twice' }, insight: 'The most dangerous place in business is moving too slowly to learn.' },
      { type: 'data-generation', title: 'Slow = No Data', stats: [{ label: 'Assumptions', slow: 'Many', fast: '0' }, { label: 'Real feedback', slow: '0', fast: 'Constant' }, { label: 'Market validation', slow: 'Guessing', fast: 'Proven' }, { label: 'Iteration speed', slow: 'Months', fast: 'Days' }], insight: 'Every day you wait is a day without data. Data is oxygen.' },
      { type: 'mindset-transform', title: 'The Paradigm Shift', wrong: { label: 'WRONG MINDSET', items: ['Mistakes are failures', 'Avoid risk at all costs', 'Wait for perfect conditions'] }, right: { label: 'WINNER MINDSET', items: ['Mistakes are paid research', 'Risk is data collection', 'Ship at 80% confidence'] } },
      { type: 'case-study-elite', title: 'Case Study: The Oodie Launch', quote: 'Instead of waiting 6 months to carefully roll out a Pinterest, TikTok, and Snapchat strategy, I launched all three in a single week.', author: 'Davie Fogarty', result: 'That speed alone made me millions.', insight: 'Imperfect action beats perfect planning. Speed compounds.' },
      { type: 'eighty-percent-rule', title: 'The 80% Rule', gauge: { threshold: 80 }, explanation: 'Once you\'re roughly 80% confident in a decision, stop researching and move.', subtext: 'The final 20% of certainty costs more time and energy than acting and adjusting later. Perfect information doesn\'t exist. Act on good enough.' },
      { type: 'two-way-doors', title: 'One-Way vs Two-Way Doors', subtitle: 'Jeff Bezos\'s Decision Framework', twoWay: { label: 'TWO-WAY DOOR', description: 'Reversible decisions', action: 'MOVE FAST', examples: ['Pricing changes', 'Marketing channels', 'Product features'] }, oneWay: { label: 'ONE-WAY DOOR', description: 'Irreversible decisions', action: 'MOVE CAREFULLY', examples: ['Major hires', 'Large acquisitions', 'Core pivots'] }, insight: 'Most decisions are two-way doors. Recognize this and move fast.' },
      { type: 'five-step-system', title: 'Elon Musk\'s 5-Step Speed System', steps: [{ icon: 'HelpCircle', label: 'Challenge', desc: 'Does this step need to exist?' }, { icon: 'Scissors', label: 'Cut', desc: 'Remove what lacks proven value' }, { icon: 'Zap', label: 'Tighten', desc: 'Simplify what remains' }, { icon: 'Rocket', label: 'Push', desc: 'Set aggressive deadlines' }, { icon: 'Settings', label: 'Systemize', desc: 'Automate and scale it' }] },
      { type: 'before-after-elite', title: 'Slow vs Fast Operator', before: { label: 'SLOW OPERATOR', items: ['Researches for months before acting', 'Waits for perfect conditions', 'Avoids failure at all costs', 'Operates on assumptions', 'No market feedback or data'] }, after: { label: 'FAST OPERATOR', items: ['Acts at 80% confidence', 'Launches imperfectly and iterates', 'Treats mistakes as paid research', 'Generates constant market data', 'Learns and adapts 10x faster'] } },
      { type: 'feedback-loop', title: 'The Velocity Loop', stages: [{ icon: 'Play', label: 'ACT', desc: 'Ship at 80%' }, { icon: 'BarChart', label: 'MEASURE', desc: 'Get real data' }, { icon: 'Brain', label: 'LEARN', desc: 'Extract insights' }, { icon: 'RefreshCw', label: 'ADJUST', desc: 'Iterate fast' }], insight: 'Fast failures are cheap. Slow failures are catastrophic.' },
      { type: 'quiz', question: 'According to Jeff Bezos\'s framework, what should you do with most business decisions?', options: ['Research extensively before acting', 'Move fast because most are reversible (two-way doors)', 'Always move slowly to minimize risk', 'Wait until you have 100% certainty'], correctIndex: 1, feedback: { correct: 'Exactly! Most business decisions are two-way doors - reversible. Recognizing this allows you to move much faster.', incorrect: 'Not quite. Most decisions are reversible two-way doors. You can walk back through them if needed. Reserve careful deliberation for rare one-way doors.' } },
      { type: 'mindset-shift', title: 'The Velocity Mindset', insight: 'Speed isn\'t about being reckless. It\'s about recognizing that most decisions are reversible, and perfect information doesn\'t exist. Act. Learn. Adjust. Repeat. This is the velocity advantage.' },
      { type: 'completion', sources: ['Davie Fogarty on Velocity', 'Jeff Bezos Decision Framework', 'Elon Musk First Principles'] }
    ];

    // Icons
    const Icons = {
      Clock: () => <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>,
      Check: () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3"><polyline points="20 6 9 17 4 12"/></svg>,
      X: () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>,
      ArrowLeft: () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></svg>,
      ArrowRight: () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg>,
      Zap: () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>,
      HelpCircle: () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>,
      Scissors: () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><circle cx="6" cy="6" r="3"/><circle cx="6" cy="18" r="3"/><line x1="20" y1="4" x2="8.12" y2="15.88"/><line x1="14.47" y1="14.48" x2="20" y2="20"/><line x1="8.12" y1="8.12" x2="12" y2="12"/></svg>,
      Rocket: () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z"/><path d="m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z"/><path d="M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0"/><path d="M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5"/></svg>,
      Settings: () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>,
      Play: () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polygon points="5 3 19 12 5 21 5 3"/></svg>,
      BarChart: () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><line x1="12" y1="20" x2="12" y2="10"/><line x1="18" y1="20" x2="18" y2="4"/><line x1="6" y1="20" x2="6" y2="16"/></svg>,
      Brain: () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 4.44-1.54z"/><path d="M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-4.44-1.54z"/></svg>,
      RefreshCw: () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polyline points="23 4 23 10 17 10"/><polyline points="1 20 1 14 7 14"/><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"/></svg>,
      Lightbulb: () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5"/><path d="M9 18h6"/><path d="M10 22h4"/></svg>,
      AlertTriangle: () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>,
      TrendingUp: () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/><polyline points="17 6 23 6 23 12"/></svg>,
      Database: () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><ellipse cx="12" cy="5" rx="9" ry="3"/><path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"/><path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"/></svg>,
      Quote: () => <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor"><path d="M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"/></svg>,
      DoorOpen: () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M13 4h3a2 2 0 0 1 2 2v14"/><path d="M2 20h3"/><path d="M13 20h9"/><path d="M10 12v.01"/><path d="M13 4.562v16.157a1 1 0 0 1-1.242.97L5 20V5.562a2 2 0 0 1 1.515-1.94l4-1A2 2 0 0 1 13 4.561z"/></svg>,
      DoorClosed: () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M18 20V6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14"/><path d="M2 20h20"/><path d="M14 12v.01"/></svg>,
      Turtle: () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="m12 10 2 4v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3a8 8 0 1 0-16 0v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3l2-4h4z"/><path d="M4.82 7.9 8 10"/><path d="M15.18 7.9 12 10"/><path d="M16.93 10H20a2 2 0 0 1 0 4H2"/></svg>
    };

    const getIcon = (name) => {
      const IconComponent = Icons[name];
      return IconComponent ? <IconComponent /> : null;
    };

    // AnimatedCounter component
    const AnimatedCounter = ({ target, duration = 1500, suffix = '' }) => {
      const [count, setCount] = useState(0);
      useEffect(() => {
        let start = 0;
        const end = parseInt(target);
        if (start === end) return;
        const timer = setInterval(() => {
          start += Math.ceil(end / (duration / 50));
          if (start >= end) { setCount(end); clearInterval(timer); }
          else { setCount(start); }
        }, 50);
        return () => clearInterval(timer);
      }, [target, duration]);
      return <span>{count}{suffix}</span>;
    };

    const WelcomeSlide = ({ data, onStart, userName, onShowGif, onHideGif }) => {
      const welcomeData = useMemo(() => getTimeBasedWelcome(), []);
      const gifSide = useMemo(() => Math.random() > 0.5 ? 'left' : 'right', []);
      useEffect(() => { onShowGif(welcomeData.gif, '65%', gifSide); return () => onHideGif(); }, [welcomeData.gif, gifSide, onShowGif, onHideGif]);

      return (
        <div className="h-full w-full relative overflow-hidden">
          <div className="h-full flex flex-col items-center justify-center text-center px-6 py-4 relative z-20">
            <motion.h1 initial={{ opacity: 0, y: 40 }} animate={{ opacity: 1, y: 0 }} className="title-font text-3xl sm:text-4xl md:text-5xl lg:text-6xl text-black mb-2 md:mb-3">{LESSON_CONFIG.title}</motion.h1>
            <motion.p initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.1 }} className="text-neutral-600 text-base md:text-lg lg:text-xl mb-2 md:mb-3 max-w-lg leading-relaxed" dangerouslySetInnerHTML={{ __html: formatGreeting(welcomeData.greeting, `<span class="font-bold text-neutral-900">${userName}</span>`) }} />
            <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.15 }} className="flex items-center justify-center gap-1.5 text-neutral-400 text-[10px] md:text-xs mb-2 md:mb-3"><Icons.Clock /><span>{LESSON_CONFIG.duration}</span></motion.div>
            <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.2 }} className="bg-neutral-900 rounded-xl md:rounded-2xl p-3 md:p-5 mb-3 md:mb-4 max-w-sm w-full mx-auto">
              <p className="text-neutral-500 text-[9px] md:text-[11px] uppercase tracking-wider mb-2 md:mb-3">In this lesson</p>
              <ul className="space-y-1.5 md:space-y-2">
                {data.learningGoals.map((goal, i) => (
                  <motion.li key={i} initial={{ opacity: 0, x: -10 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.25 + i * 0.05 }} className="flex items-start gap-2 text-left">
                    <span className="w-5 h-5 rounded-md flex items-center justify-center text-[9px] font-bold text-white flex-shrink-0 mt-0.5" style={{ background: 'linear-gradient(135deg, #10b981, #059669)' }}>{i + 1}</span>
                    <span className="text-neutral-300 text-[11px] md:text-sm leading-snug">{goal}</span>
                  </motion.li>
                ))}
              </ul>
            </motion.div>
            <motion.button initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.45 }} onClick={onStart} whileHover={{ scale: 1.02 }} whileTap={{ scale: 0.98 }} className="px-6 md:px-7 py-2.5 md:py-3 rounded-xl text-white font-semibold text-sm md:text-base" style={{ background: 'linear-gradient(135deg, #10b981, #059669)' }}>Let's Go</motion.button>
          </div>
        </div>
      );
    };

    const HookSlide = ({ data }) => (
      <div className="h-full relative overflow-hidden">
        <div className="h-full flex flex-col justify-center px-6 md:px-16 max-w-3xl mx-auto slide-scroll overflow-y-auto py-8 md:py-10 relative z-10">
          <motion.div initial={{ opacity: 0, y: 40 }} animate={{ opacity: 1, y: 0 }} className="mb-4 md:mb-6">
            <span className="inline-block px-3 py-1 rounded-full text-xs font-semibold mb-3 md:mb-4" style={{ background: 'rgba(16, 185, 129, 0.1)', color: '#10b981' }}>The Hook</span>
            <h2 className="slide-title text-2xl md:text-4xl lg:text-5xl text-black leading-tight">{data.headline}</h2>
          </motion.div>
          <motion.p initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.15 }} className="text-base md:text-xl text-neutral-600 leading-relaxed">{data.subtext}</motion.p>
        </div>
        {data.brandImage && (
          <motion.div initial={{ opacity: 0, x: 30 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.3, duration: 0.5 }}
            className="absolute bottom-0 right-0 z-0 pointer-events-none hidden md:block" style={{ height: '30%', maxHeight: '200px', marginRight: '80px', marginBottom: '5%' }}>
            <img src={data.brandImage} alt={data.brandName || ''} className="h-full w-auto object-contain" style={{ opacity: 1 }} />
          </motion.div>
        )}
      </div>
    );

    // Quote Spotlight Slide
    const QuoteSpotlightSlide = ({ data }) => (
      <div className="h-full flex flex-col justify-center px-6 md:px-16 max-w-4xl mx-auto">
        <motion.div initial={{ opacity: 0, scale: 0.95 }} animate={{ opacity: 1, scale: 1 }} className="relative rounded-2xl p-8 md:p-12" style={{ background: 'linear-gradient(135deg, #1a1a1a, #2d2d2d)' }}>
          <div style={{ position: 'absolute', top: 0, left: 0, right: 0, height: '3px', background: 'linear-gradient(90deg, transparent, #10b981, transparent)', borderRadius: '2px 2px 0 0' }} />
          <motion.div initial={{ opacity: 0 }} animate={{ opacity: 0.1 }} className="absolute top-4 left-4 text-emerald-500"><Icons.Quote /></motion.div>
          <p className="text-xl md:text-3xl text-white font-medium leading-relaxed mb-6 relative z-10" style={{ fontFamily: 'Fraunces, serif' }}>"{data.quote}"</p>
          <div className="flex items-center gap-4">
            <div className="w-12 h-12 rounded-full flex items-center justify-center text-white font-bold" style={{ background: 'linear-gradient(135deg, #10b981, #059669)' }}>{data.author.charAt(0)}</div>
            <div>
              <p className="text-white font-semibold">{data.author}</p>
              <p className="text-neutral-400 text-sm">{data.context}</p>
            </div>
          </div>
        </motion.div>
      </div>
    );

    // Speed vs Slow Visual Slide
    const SpeedVsSlowSlide = ({ data }) => {
      const [showFast, setShowFast] = useState(false);
      useEffect(() => { const timer = setTimeout(() => setShowFast(true), 800); return () => clearTimeout(timer); }, []);

      return (
        <div className="h-full flex flex-col justify-center px-6 md:px-12 max-w-5xl mx-auto">
          <motion.h2 initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className="slide-title text-2xl md:text-4xl text-black text-center mb-8">{data.title}</motion.h2>
          <div className="grid md:grid-cols-2 gap-6 mb-8">
            {/* Slow Operator */}
            <motion.div initial={{ opacity: 0, x: -30 }} animate={{ opacity: 1, x: 0 }} className="relative rounded-2xl p-6" style={{ background: 'linear-gradient(135deg, #1a1a1a, #2d2d2d)' }}>
              <div style={{ position: 'absolute', top: 0, left: 0, right: 0, height: '3px', background: 'linear-gradient(90deg, transparent, #ef4444, transparent)', borderRadius: '2px 2px 0 0' }} />
              <div className="flex items-center gap-3 mb-4">
                <div className="w-10 h-10 rounded-lg flex items-center justify-center" style={{ background: 'rgba(239, 68, 68, 0.2)' }}>
                  <Icons.AlertTriangle />
                </div>
                <span className="text-red-400 font-bold text-sm tracking-wide">{data.slow.label}</span>
              </div>
              <div className="space-y-3">
                <div className="flex justify-between items-center">
                  <span className="text-neutral-400 text-sm">Time spent:</span>
                  <span className="text-white font-bold">{data.slow.time}</span>
                </div>
                <div className="flex justify-between items-center">
                  <span className="text-neutral-400 text-sm">Data points:</span>
                  <span className="text-red-400 font-bold text-2xl">{data.slow.data}</span>
                </div>
                <div className="flex justify-between items-center">
                  <span className="text-neutral-400 text-sm">Outcome:</span>
                  <span className="text-neutral-300">{data.slow.outcome}</span>
                </div>
              </div>
            </motion.div>

            {/* Fast Operator */}
            <motion.div initial={{ opacity: 0, x: 30 }} animate={{ opacity: showFast ? 1 : 0, x: showFast ? 0 : 30 }} transition={{ delay: 0.3 }} className="relative rounded-2xl p-6" style={{ background: 'linear-gradient(135deg, #1a1a1a, #2d2d2d)', boxShadow: '0 0 30px rgba(16, 185, 129, 0.2)' }}>
              <div style={{ position: 'absolute', top: 0, left: 0, right: 0, height: '3px', background: 'linear-gradient(90deg, transparent, #10b981, transparent)', borderRadius: '2px 2px 0 0' }} />
              <div className="flex items-center gap-3 mb-4">
                <div className="w-10 h-10 rounded-lg flex items-center justify-center" style={{ background: 'rgba(16, 185, 129, 0.2)' }}>
                  <Icons.Zap />
                </div>
                <span className="text-emerald-400 font-bold text-sm tracking-wide">{data.fast.label}</span>
              </div>
              <div className="space-y-3">
                <div className="flex justify-between items-center">
                  <span className="text-neutral-400 text-sm">Time spent:</span>
                  <span className="text-white font-bold">{data.fast.time}</span>
                </div>
                <div className="flex justify-between items-center">
                  <span className="text-neutral-400 text-sm">Data points:</span>
                  <span className="text-emerald-400 font-bold text-2xl"><AnimatedCounter target={data.fast.data} /></span>
                </div>
                <div className="flex justify-between items-center">
                  <span className="text-neutral-400 text-sm">Outcome:</span>
                  <span className="text-neutral-300">{data.fast.outcome}</span>
                </div>
              </div>
            </motion.div>
          </div>
          <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.6 }} className="text-center rounded-xl p-4" style={{ background: 'linear-gradient(135deg, #10b981, #059669)' }}>
            <p className="text-white font-bold">{data.insight}</p>
          </motion.div>
        </div>
      );
    };

    // Data Generation Slide
    const DataGenerationSlide = ({ data }) => (
      <div className="h-full flex flex-col justify-center px-6 md:px-12 max-w-4xl mx-auto">
        <motion.h2 initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className="slide-title text-2xl md:text-4xl text-black text-center mb-8">{data.title}</motion.h2>
        <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} className="rounded-2xl overflow-hidden" style={{ background: 'linear-gradient(135deg, #1a1a1a, #2d2d2d)' }}>
          <div style={{ height: '3px', background: 'linear-gradient(90deg, #ef4444, #10b981)' }} />
          <div className="p-6">
            <div className="grid grid-cols-3 gap-4 mb-4 pb-4" style={{ borderBottom: '1px solid rgba(255,255,255,0.1)' }}>
              <div></div>
              <div className="text-center"><span className="text-red-400 font-bold text-sm">SLOW</span></div>
              <div className="text-center"><span className="text-emerald-400 font-bold text-sm">FAST</span></div>
            </div>
            {data.stats.map((stat, i) => (
              <motion.div key={i} initial={{ opacity: 0, x: -20 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.1 + i * 0.1 }} className="grid grid-cols-3 gap-4 py-3" style={{ borderBottom: i < data.stats.length - 1 ? '1px solid rgba(255,255,255,0.05)' : 'none' }}>
                <div className="text-neutral-400 text-sm">{stat.label}</div>
                <div className="text-center text-red-400 font-medium">{stat.slow}</div>
                <div className="text-center text-emerald-400 font-medium">{stat.fast}</div>
              </motion.div>
            ))}
          </div>
        </motion.div>
        <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.5 }} className="mt-6 flex items-center justify-center gap-3">
          <Icons.Database />
          <p className="text-neutral-600 font-medium">{data.insight}</p>
        </motion.div>
      </div>
    );

    // Mindset Transform Slide
    const MindsetTransformSlide = ({ data }) => (
      <div className="h-full flex flex-col justify-center px-6 md:px-12 max-w-4xl mx-auto">
        <motion.h2 initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className="slide-title text-2xl md:text-4xl text-black text-center mb-8">{data.title}</motion.h2>
        <div className="grid md:grid-cols-2 gap-6">
          {/* Wrong Mindset */}
          <motion.div initial={{ opacity: 0, x: -30 }} animate={{ opacity: 1, x: 0 }} className="relative rounded-2xl p-6" style={{ background: 'linear-gradient(135deg, #1a1a1a, #2d2d2d)' }}>
            <div style={{ position: 'absolute', top: 0, left: 0, right: 0, height: '3px', background: 'linear-gradient(90deg, transparent, #ef4444, transparent)', borderRadius: '2px 2px 0 0' }} />
            <div className="flex items-center gap-2 mb-4">
              <Icons.X />
              <span className="text-red-400 font-bold text-sm">{data.wrong.label}</span>
            </div>
            <ul className="space-y-3">
              {data.wrong.items.map((item, i) => (
                <motion.li key={i} initial={{ opacity: 0 }} animate={{ opacity: 1 }} transition={{ delay: 0.2 + i * 0.1 }} className="flex items-start gap-3">
                  <span className="text-red-400 mt-1">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
                  </span>
                  <span className="text-neutral-300 text-sm">{item}</span>
                </motion.li>
              ))}
            </ul>
          </motion.div>

          {/* Right Mindset */}
          <motion.div initial={{ opacity: 0, x: 30 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.2 }} className="relative rounded-2xl p-6" style={{ background: 'linear-gradient(135deg, #1a1a1a, #2d2d2d)', boxShadow: '0 0 30px rgba(16, 185, 129, 0.15)' }}>
            <div style={{ position: 'absolute', top: 0, left: 0, right: 0, height: '3px', background: 'linear-gradient(90deg, transparent, #10b981, transparent)', borderRadius: '2px 2px 0 0' }} />
            <div className="flex items-center gap-2 mb-4">
              <Icons.Check />
              <span className="text-emerald-400 font-bold text-sm">{data.right.label}</span>
            </div>
            <ul className="space-y-3">
              {data.right.items.map((item, i) => (
                <motion.li key={i} initial={{ opacity: 0 }} animate={{ opacity: 1 }} transition={{ delay: 0.4 + i * 0.1 }} className="flex items-start gap-3">
                  <span className="text-emerald-400 mt-1">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polyline points="20 6 9 17 4 12"/></svg>
                  </span>
                  <span className="text-neutral-300 text-sm">{item}</span>
                </motion.li>
              ))}
            </ul>
          </motion.div>
        </div>
      </div>
    );

    // Case Study Elite Slide
    const CaseStudyEliteSlide = ({ data }) => (
      <div className="h-full flex flex-col justify-center px-6 md:px-12 max-w-4xl mx-auto">
        <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} className="text-center mb-6">
          <span className="inline-block px-3 py-1 rounded-full text-xs font-semibold" style={{ background: 'rgba(16, 185, 129, 0.1)', color: '#10b981' }}>Case Study</span>
        </motion.div>
        <motion.h2 initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className="slide-title text-2xl md:text-3xl text-black text-center mb-8">{data.title}</motion.h2>
        <motion.div initial={{ opacity: 0, scale: 0.95 }} animate={{ opacity: 1, scale: 1 }} transition={{ delay: 0.2 }} className="relative rounded-2xl p-8" style={{ background: 'linear-gradient(135deg, #1a1a1a, #2d2d2d)' }}>
          <div style={{ position: 'absolute', top: 0, left: 0, right: 0, height: '3px', background: 'linear-gradient(90deg, transparent, #10b981, transparent)', borderRadius: '2px 2px 0 0' }} />
          <p className="text-xl md:text-2xl text-white leading-relaxed mb-4 italic" style={{ fontFamily: 'Fraunces, serif' }}>"{data.quote}"</p>
          <p className="text-emerald-400 font-bold text-lg mb-4">{data.result}</p>
          <p className="text-neutral-400 text-sm">â€” {data.author}</p>
        </motion.div>
        <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.4 }} className="mt-6 flex items-center justify-center gap-3 text-center">
          <Icons.Zap />
          <p className="text-neutral-600 font-medium">{data.insight}</p>
        </motion.div>
      </div>
    );

    // 80% Rule Gauge Slide
    const EightyPercentRuleSlide = ({ data }) => {
      const [gaugeValue, setGaugeValue] = useState(0);
      useEffect(() => {
        const timer = setTimeout(() => setGaugeValue(data.gauge.threshold), 500);
        return () => clearTimeout(timer);
      }, []);

      return (
        <div className="h-full flex flex-col justify-center px-6 md:px-12 max-w-4xl mx-auto">
          <motion.h2 initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className="slide-title text-2xl md:text-4xl text-black text-center mb-8">{data.title}</motion.h2>
          <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} transition={{ delay: 0.2 }} className="relative rounded-2xl p-8" style={{ background: 'linear-gradient(135deg, #1a1a1a, #2d2d2d)' }}>
            <div style={{ position: 'absolute', top: 0, left: 0, right: 0, height: '3px', background: 'linear-gradient(90deg, transparent, #10b981, transparent)', borderRadius: '2px 2px 0 0' }} />
            {/* Gauge visualization */}
            <div className="flex flex-col items-center mb-6">
              <div className="relative w-48 h-24 overflow-hidden">
                <div className="absolute bottom-0 left-0 right-0 h-48 rounded-full border-8 border-neutral-700" style={{ borderTopColor: 'transparent' }} />
                <motion.div className="absolute bottom-0 left-0 right-0 h-48 rounded-full border-8 origin-bottom" style={{ borderColor: '#10b981', borderTopColor: 'transparent', borderLeftColor: 'transparent', rotate: `${(gaugeValue / 100) * 180 - 90}deg` }} initial={{ rotate: '-90deg' }} animate={{ rotate: `${(gaugeValue / 100) * 180 - 90}deg` }} transition={{ duration: 1, ease: 'easeOut' }} />
              </div>
              <div className="mt-4 text-center">
                <span className="text-5xl font-bold text-emerald-400"><AnimatedCounter target={gaugeValue} suffix="%" /></span>
                <p className="text-neutral-400 text-sm mt-2">CONFIDENCE THRESHOLD</p>
              </div>
            </div>
            <div className="flex items-center justify-center gap-4 mb-4">
              <div className="text-center px-4 py-2 rounded-lg" style={{ background: 'rgba(239, 68, 68, 0.1)' }}>
                <span className="text-red-400 text-sm">0-79%</span>
                <p className="text-neutral-400 text-xs">Keep researching</p>
              </div>
              <div className="text-center px-4 py-2 rounded-lg" style={{ background: 'rgba(16, 185, 129, 0.2)', border: '1px solid rgba(16, 185, 129, 0.3)' }}>
                <span className="text-emerald-400 text-sm font-bold">80%+</span>
                <p className="text-emerald-300 text-xs">ACT NOW</p>
              </div>
            </div>
            <p className="text-neutral-300 text-center">{data.explanation}</p>
          </motion.div>
          <motion.p initial={{ opacity: 0 }} animate={{ opacity: 1 }} transition={{ delay: 0.6 }} className="text-neutral-500 text-sm text-center mt-4">{data.subtext}</motion.p>
        </div>
      );
    };

    // Two-Way Doors Slide
    const TwoWayDoorsSlide = ({ data }) => (
      <div className="h-full flex flex-col justify-center px-6 md:px-12 max-w-5xl mx-auto slide-scroll overflow-y-auto py-8">
        <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} className="text-center mb-2">
          <span className="text-neutral-400 text-sm">{data.subtitle}</span>
        </motion.div>
        <motion.h2 initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className="slide-title text-2xl md:text-3xl text-black text-center mb-6">{data.title}</motion.h2>
        <div className="grid md:grid-cols-2 gap-6 mb-6">
          {/* Two-Way Door */}
          <motion.div initial={{ opacity: 0, x: -30 }} animate={{ opacity: 1, x: 0 }} className="relative rounded-2xl p-6" style={{ background: 'linear-gradient(135deg, #1a1a1a, #2d2d2d)', boxShadow: '0 0 30px rgba(16, 185, 129, 0.15)' }}>
            <div style={{ position: 'absolute', top: 0, left: 0, right: 0, height: '3px', background: 'linear-gradient(90deg, transparent, #10b981, transparent)', borderRadius: '2px 2px 0 0' }} />
            <div className="flex items-center gap-3 mb-4">
              <div className="w-12 h-12 rounded-xl flex items-center justify-center" style={{ background: 'rgba(16, 185, 129, 0.2)' }}>
                <Icons.DoorOpen />
              </div>
              <div>
                <span className="text-emerald-400 font-bold">{data.twoWay.label}</span>
                <p className="text-neutral-400 text-sm">{data.twoWay.description}</p>
              </div>
            </div>
            <div className="rounded-lg p-3 mb-4" style={{ background: 'rgba(16, 185, 129, 0.1)' }}>
              <span className="text-emerald-400 font-bold text-lg">{data.twoWay.action}</span>
            </div>
            <ul className="space-y-2">
              {data.twoWay.examples.map((ex, i) => (
                <li key={i} className="flex items-center gap-2 text-neutral-300 text-sm">
                  <span className="w-1.5 h-1.5 rounded-full bg-emerald-400" />
                  {ex}
                </li>
              ))}
            </ul>
          </motion.div>

          {/* One-Way Door */}
          <motion.div initial={{ opacity: 0, x: 30 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.2 }} className="relative rounded-2xl p-6" style={{ background: 'linear-gradient(135deg, #1a1a1a, #2d2d2d)' }}>
            <div style={{ position: 'absolute', top: 0, left: 0, right: 0, height: '3px', background: 'linear-gradient(90deg, transparent, #ef4444, transparent)', borderRadius: '2px 2px 0 0' }} />
            <div className="flex items-center gap-3 mb-4">
              <div className="w-12 h-12 rounded-xl flex items-center justify-center" style={{ background: 'rgba(239, 68, 68, 0.2)' }}>
                <Icons.DoorClosed />
              </div>
              <div>
                <span className="text-red-400 font-bold">{data.oneWay.label}</span>
                <p className="text-neutral-400 text-sm">{data.oneWay.description}</p>
              </div>
            </div>
            <div className="rounded-lg p-3 mb-4" style={{ background: 'rgba(239, 68, 68, 0.1)' }}>
              <span className="text-red-400 font-bold text-lg">{data.oneWay.action}</span>
            </div>
            <ul className="space-y-2">
              {data.oneWay.examples.map((ex, i) => (
                <li key={i} className="flex items-center gap-2 text-neutral-300 text-sm">
                  <span className="w-1.5 h-1.5 rounded-full bg-red-400" />
                  {ex}
                </li>
              ))}
            </ul>
          </motion.div>
        </div>
        <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.4 }} className="text-center rounded-xl p-4" style={{ background: 'linear-gradient(135deg, #10b981, #059669)' }}>
          <p className="text-white font-bold">{data.insight}</p>
        </motion.div>
      </div>
    );

    // Five Step System Slide
    const FiveStepSystemSlide = ({ data }) => {
      const [activeStep, setActiveStep] = useState(0);
      useEffect(() => {
        const timer = setInterval(() => {
          setActiveStep(prev => (prev + 1) % data.steps.length);
        }, 2000);
        return () => clearInterval(timer);
      }, []);

      return (
        <div className="h-full flex flex-col justify-center px-6 md:px-12 max-w-4xl mx-auto">
          <motion.h2 initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className="slide-title text-2xl md:text-3xl text-black text-center mb-8">{data.title}</motion.h2>
          <div className="space-y-3">
            {data.steps.map((step, i) => (
              <motion.div key={i} initial={{ opacity: 0, x: -20 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.1 + i * 0.1 }} className="relative rounded-xl p-4 transition-all duration-300" style={{ background: i === activeStep ? 'linear-gradient(135deg, #1a1a1a, #2d2d2d)' : 'rgba(0,0,0,0.03)', boxShadow: i === activeStep ? '0 0 20px rgba(16, 185, 129, 0.2)' : 'none', border: i === activeStep ? '1px solid rgba(16, 185, 129, 0.3)' : '1px solid transparent' }}>
                {i === activeStep && <div style={{ position: 'absolute', top: 0, left: 0, right: 0, height: '2px', background: 'linear-gradient(90deg, transparent, #10b981, transparent)', borderRadius: '2px 2px 0 0' }} />}
                <div className="flex items-center gap-4">
                  <div className="w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0" style={{ background: i === activeStep ? 'linear-gradient(135deg, #10b981, #059669)' : 'rgba(16, 185, 129, 0.1)' }}>
                    <span style={{ color: i === activeStep ? 'white' : '#10b981' }}>{getIcon(step.icon)}</span>
                  </div>
                  <div className="flex-1">
                    <div className="flex items-center gap-3">
                      <span className="text-xs font-bold text-neutral-400">STEP {i + 1}</span>
                      <h3 className={`font-bold ${i === activeStep ? 'text-white' : 'text-neutral-800'}`}>{step.label}</h3>
                    </div>
                    <p className={`text-sm ${i === activeStep ? 'text-neutral-300' : 'text-neutral-500'}`}>{step.desc}</p>
                  </div>
                </div>
              </motion.div>
            ))}
          </div>
        </div>
      );
    };

    // Before After Elite Slide
    const BeforeAfterEliteSlide = ({ data }) => (
      <div className="h-full flex flex-col justify-center px-6 md:px-12 max-w-4xl mx-auto slide-scroll overflow-y-auto py-8">
        <motion.h2 initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className="slide-title text-2xl md:text-3xl text-black text-center mb-6">{data.title}</motion.h2>
        <div className="grid md:grid-cols-2 gap-6">
          {/* Before */}
          <motion.div initial={{ opacity: 0, x: -30 }} animate={{ opacity: 1, x: 0 }} className="relative rounded-2xl p-6" style={{ background: 'linear-gradient(135deg, #1a1a1a, #2d2d2d)' }}>
            <div style={{ position: 'absolute', top: 0, left: 0, right: 0, height: '3px', background: 'linear-gradient(90deg, transparent, #ef4444, transparent)', borderRadius: '2px 2px 0 0' }} />
            <div className="absolute -top-3 left-4 px-3 py-1 rounded-full text-xs font-bold text-white" style={{ background: '#ef4444' }}>{data.before.label}</div>
            <ul className="space-y-3 mt-4">
              {data.before.items.map((item, i) => (
                <motion.li key={i} initial={{ opacity: 0 }} animate={{ opacity: 1 }} transition={{ delay: 0.1 + i * 0.05 }} className="flex items-start gap-3">
                  <span className="text-red-400 mt-1 flex-shrink-0">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
                  </span>
                  <span className="text-neutral-300 text-sm">{item}</span>
                </motion.li>
              ))}
            </ul>
          </motion.div>

          {/* After */}
          <motion.div initial={{ opacity: 0, x: 30 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.2 }} className="relative rounded-2xl p-6" style={{ background: 'linear-gradient(135deg, #1a1a1a, #2d2d2d)', boxShadow: '0 0 30px rgba(16, 185, 129, 0.15)' }}>
            <div style={{ position: 'absolute', top: 0, left: 0, right: 0, height: '3px', background: 'linear-gradient(90deg, transparent, #10b981, transparent)', borderRadius: '2px 2px 0 0' }} />
            <div className="absolute -top-3 left-4 px-3 py-1 rounded-full text-xs font-bold text-white" style={{ background: '#10b981' }}>{data.after.label}</div>
            <ul className="space-y-3 mt-4">
              {data.after.items.map((item, i) => (
                <motion.li key={i} initial={{ opacity: 0 }} animate={{ opacity: 1 }} transition={{ delay: 0.3 + i * 0.05 }} className="flex items-start gap-3">
                  <span className="text-emerald-400 mt-1 flex-shrink-0">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polyline points="20 6 9 17 4 12"/></svg>
                  </span>
                  <span className="text-neutral-300 text-sm">{item}</span>
                </motion.li>
              ))}
            </ul>
          </motion.div>
        </div>
      </div>
    );

    // Feedback Loop Slide
    const FeedbackLoopSlide = ({ data }) => {
      const [activeStage, setActiveStage] = useState(0);
      useEffect(() => {
        const timer = setInterval(() => {
          setActiveStage(prev => (prev + 1) % data.stages.length);
        }, 1500);
        return () => clearInterval(timer);
      }, []);

      return (
        <div className="h-full flex flex-col justify-center px-6 md:px-12 max-w-4xl mx-auto">
          <motion.h2 initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className="slide-title text-2xl md:text-4xl text-black text-center mb-8">{data.title}</motion.h2>
          <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} className="relative rounded-2xl p-8" style={{ background: 'linear-gradient(135deg, #1a1a1a, #2d2d2d)' }}>
            <div style={{ position: 'absolute', top: 0, left: 0, right: 0, height: '3px', background: 'linear-gradient(90deg, transparent, #10b981, transparent)', borderRadius: '2px 2px 0 0' }} />
            <div className="flex items-center justify-between gap-2">
              {data.stages.map((stage, i) => (
                <React.Fragment key={i}>
                  <motion.div animate={{ scale: i === activeStage ? 1.1 : 1, opacity: i === activeStage ? 1 : 0.6 }} className="flex flex-col items-center text-center">
                    <div className="w-16 h-16 rounded-xl flex items-center justify-center mb-2 transition-all" style={{ background: i === activeStage ? 'linear-gradient(135deg, #10b981, #059669)' : 'rgba(16, 185, 129, 0.2)' }}>
                      <span style={{ color: i === activeStage ? 'white' : '#10b981' }}>{getIcon(stage.icon)}</span>
                    </div>
                    <span className={`font-bold text-sm ${i === activeStage ? 'text-emerald-400' : 'text-neutral-400'}`}>{stage.label}</span>
                    <span className="text-neutral-500 text-xs">{stage.desc}</span>
                  </motion.div>
                  {i < data.stages.length - 1 && (
                    <div className="flex-shrink-0">
                      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#10b981" strokeWidth="2"><polyline points="9 18 15 12 9 6"/></svg>
                    </div>
                  )}
                </React.Fragment>
              ))}
            </div>
            {/* Loop indicator */}
            <div className="flex justify-center mt-6">
              <div className="flex items-center gap-2 px-4 py-2 rounded-full" style={{ background: 'rgba(16, 185, 129, 0.1)' }}>
                <Icons.RefreshCw />
                <span className="text-emerald-400 text-sm font-medium">REPEAT</span>
              </div>
            </div>
          </motion.div>
          <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.4 }} className="mt-6 text-center rounded-xl p-4" style={{ background: 'linear-gradient(135deg, #10b981, #059669)' }}>
            <p className="text-white font-bold">{data.insight}</p>
          </motion.div>
        </div>
      );
    };

    // Mindset Shift Slide
    const MindsetShiftSlide = ({ data }) => (
      <div className="h-full flex flex-col items-center justify-center px-6 md:px-12 max-w-3xl mx-auto text-center">
        <motion.div initial={{ opacity: 0, scale: 0.8 }} animate={{ opacity: 1, scale: 1 }} className="w-20 h-20 rounded-2xl flex items-center justify-center mb-6" style={{ background: 'linear-gradient(135deg, #10b981, #059669)' }}>
          <Icons.Lightbulb />
        </motion.div>
        <motion.h2 initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.1 }} className="slide-title text-2xl md:text-3xl text-black mb-6">{data.title}</motion.h2>
        <motion.p initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.2 }} className="text-lg md:text-xl text-neutral-600 leading-relaxed">{data.insight}</motion.p>
      </div>
    );

    const QuizSlide = ({ data, onShowGif, onHideGif }) => {
      const [selected, setSelected] = useState(null);
      const [showFeedback, setShowFeedback] = useState(false);
      const celebrationGif = useMemo(() => getRandomCelebrationGif(), []);
      const empathyGif = useMemo(() => getRandomEmpathyGif(), []);
      const gifSide = useMemo(() => Math.random() > 0.5 ? 'left' : 'right', []);
      const handleSelect = (index) => { if (showFeedback) return; setSelected(index); setShowFeedback(true); };
      const isCorrect = selected === data.correctIndex;

      useEffect(() => { if (showFeedback) { if (isCorrect) { onShowGif(celebrationGif, '60%', gifSide); } else { onShowGif(empathyGif, '60%', gifSide); } } }, [showFeedback, isCorrect]);
      useEffect(() => { return () => onHideGif(); }, [onHideGif]);

      return (
        <div className="h-full w-full relative overflow-hidden">
          <div className="h-full flex flex-col justify-center px-8 md:px-12 max-w-2xl mx-auto slide-scroll overflow-y-auto py-10 relative z-30">
            <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} className="text-center mb-6">
              <p className="text-xs uppercase tracking-wider text-neutral-400 mb-3">Quick Check</p>
              <h2 className="slide-title text-xl md:text-2xl text-black leading-tight">{data.question}</h2>
            </motion.div>
            <div className="space-y-3 mb-6">
              {data.options.map((option, i) => (
                <motion.button key={i} initial={{ opacity: 0, x: -15 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.08 + i * 0.06 }} onClick={() => handleSelect(i)} disabled={showFeedback} className={`w-full p-4 rounded-xl text-left transition-all border-2 ${showFeedback ? i === data.correctIndex ? 'border-green-500 bg-green-50' : i === selected ? 'border-red-400 bg-red-50' : 'border-neutral-200 bg-white opacity-40' : 'border-neutral-200 bg-white hover:border-neutral-300'}`}>
                  <div className="flex items-center gap-3">
                    <span className={`w-8 h-8 rounded-lg flex items-center justify-center text-sm font-bold transition-all ${showFeedback && i === data.correctIndex ? 'bg-green-500 text-white' : showFeedback && i === selected && !isCorrect ? 'bg-red-400 text-white' : 'bg-neutral-100 text-neutral-500'}`}>
                      {showFeedback && i === data.correctIndex ? <Icons.Check /> : showFeedback && i === selected && !isCorrect ? <Icons.X /> : String.fromCharCode(65 + i)}
                    </span>
                    <span className="text-neutral-700 text-sm md:text-base">{option}</span>
                  </div>
                </motion.button>
              ))}
            </div>
            <AnimatePresence>
              {showFeedback && (
                <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} className={`p-5 rounded-xl ${isCorrect ? 'bg-green-50 border border-green-200' : 'bg-amber-50 border border-amber-200'}`}>
                  <p className={`text-sm leading-relaxed ${isCorrect ? 'text-green-800' : 'text-amber-800'}`}>{isCorrect ? data.feedback.correct : data.feedback.incorrect}</p>
                </motion.div>
              )}
            </AnimatePresence>
          </div>
        </div>
      );
    };

    const CompletionSlide = ({ data }) => (
      <div className="h-full flex flex-col items-center justify-center text-center px-8 slide-scroll overflow-y-auto py-8">
        <motion.div initial={{ opacity: 0, scale: 0 }} animate={{ opacity: 1, scale: 1 }} transition={{ type: 'spring', duration: 0.5 }} className="w-16 h-16 rounded-xl flex items-center justify-center mb-4 text-white" style={{ background: 'linear-gradient(135deg, #10b981, #059669)', boxShadow: '0 6px 24px rgba(16, 185, 129, 0.35)' }}><Icons.Check /></motion.div>
        <motion.h2 initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.15 }} className="slide-title text-2xl md:text-3xl text-black mb-3">Lesson Complete!</motion.h2>
        <motion.p initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.25 }} className="text-neutral-500 text-sm mb-5 max-w-md leading-relaxed">You now understand the velocity advantage. Speed creates data. Data creates clarity. Clarity creates wins.</motion.p>
        <motion.a initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.35 }} href={`/lessons/${LESSON_CONFIG.nextLesson.id}/lesson.html`} className="bg-neutral-900 rounded-xl p-5 max-w-md w-full mb-4 block hover:bg-neutral-800 transition-colors">
          <p className="text-neutral-500 text-xs uppercase tracking-wider mb-2">Up Next</p>
          <h3 className="text-white font-bold text-lg mb-1">{LESSON_CONFIG.nextLesson.title}</h3>
          <p className="text-neutral-400 text-xs">{LESSON_CONFIG.nextLesson.teaser}</p>
        </motion.a>
        {data.sources && data.sources.length > 0 && (
          <motion.p initial={{ opacity: 0 }} animate={{ opacity: 1 }} transition={{ delay: 0.45 }} className="text-neutral-400 text-xs">Sources: {data.sources.join(', ')}</motion.p>
        )}
      </div>
    );

    const LessonApp = () => {
      const [currentSlide, setCurrentSlide] = useState(getInitialSlide());
      const [direction, setDirection] = useState(1);
      const userName = useMemo(() => getUserName(), []);
      const currentSlideRef = React.useRef(0);
      const [gifConfig, setGifConfig] = useState(null);
      const [isAnimating, setIsAnimating] = useState(false);

      const showGif = useCallback((url, height, side) => setGifConfig({ url, height, side }), []);
      const hideGif = useCallback(() => setGifConfig(null), []);

      React.useEffect(() => { currentSlideRef.current = currentSlide; }, [currentSlide]);

      const goToSlide = useCallback((newSlide) => {
        if (isAnimating || newSlide < 0 || newSlide >= slides.length) return;
        setIsAnimating(true);
        setDirection(newSlide > currentSlideRef.current ? 1 : -1);
        setCurrentSlide(newSlide);
      }, [isAnimating]);

      const nextSlide = useCallback(() => { if (currentSlideRef.current + 1 < slides.length) goToSlide(currentSlideRef.current + 1); }, [goToSlide]);
      const prevSlide = useCallback(() => { if (currentSlideRef.current - 1 >= 0) goToSlide(currentSlideRef.current - 1); }, [goToSlide]);

      useEffect(() => {
        const handleKeyDown = (e) => {
          if (e.key === 'ArrowRight' || e.key === ' ') { e.preventDefault(); nextSlide(); }
          if (e.key === 'ArrowLeft') { e.preventDefault(); prevSlide(); }
        };
        window.addEventListener('keydown', handleKeyDown);
        return () => window.removeEventListener('keydown', handleKeyDown);
      }, [nextSlide, prevSlide]);

      const slideVariants = {
        enter: (dir) => ({ x: dir > 0 ? '100%' : '-100%', opacity: 0 }),
        center: { x: 0, opacity: 1 },
        exit: (dir) => ({ x: dir > 0 ? '-100%' : '100%', opacity: 0 })
      };

      const renderSlide = (slide) => {
        switch (slide.type) {
          case 'welcome': return <WelcomeSlide data={slide} onStart={nextSlide} userName={userName} onShowGif={showGif} onHideGif={hideGif} />;
          case 'hook': return <HookSlide data={slide} />;
          case 'quote-spotlight': return <QuoteSpotlightSlide data={slide} />;
          case 'speed-vs-slow': return <SpeedVsSlowSlide data={slide} />;
          case 'data-generation': return <DataGenerationSlide data={slide} />;
          case 'mindset-transform': return <MindsetTransformSlide data={slide} />;
          case 'case-study-elite': return <CaseStudyEliteSlide data={slide} />;
          case 'eighty-percent-rule': return <EightyPercentRuleSlide data={slide} />;
          case 'two-way-doors': return <TwoWayDoorsSlide data={slide} />;
          case 'five-step-system': return <FiveStepSystemSlide data={slide} />;
          case 'before-after-elite': return <BeforeAfterEliteSlide data={slide} />;
          case 'feedback-loop': return <FeedbackLoopSlide data={slide} />;
          case 'quiz': return <QuizSlide data={slide} onShowGif={showGif} onHideGif={hideGif} />;
          case 'mindset-shift': return <MindsetShiftSlide data={slide} />;
          case 'completion': return <CompletionSlide data={slide} />;
          default: return null;
        }
      };

      const showPrev = currentSlide > 0;
      const showNext = currentSlide < slides.length - 1 && slides[currentSlide].type !== 'welcome';

      return (
        <div className="w-full h-screen bg-white flex flex-col relative">
          <div className="flex-1 relative overflow-hidden z-20">
            <AnimatePresence mode="wait" custom={direction} onExitComplete={() => setIsAnimating(false)}>
              <motion.div key={currentSlide} custom={direction} variants={slideVariants} initial="enter" animate="center" exit="exit" transition={{ duration: 0.3, ease: [0.25, 0.1, 0.25, 1] }} className="absolute inset-0">
                {renderSlide(slides[currentSlide])}
              </motion.div>
            </AnimatePresence>
            {showPrev && <button onClick={prevSlide} className="absolute left-5 top-1/2 -translate-y-1/2 w-12 h-12 rounded-full bg-neutral-100 hover:bg-neutral-200 flex items-center justify-center text-neutral-500 hover:text-neutral-700 transition-all z-10"><Icons.ArrowLeft /></button>}
            {showNext && <button onClick={nextSlide} className="absolute right-5 top-1/2 -translate-y-1/2 w-12 h-12 rounded-full bg-neutral-100 hover:bg-neutral-200 flex items-center justify-center text-neutral-500 hover:text-neutral-700 transition-all z-10"><Icons.ArrowRight /></button>}
          </div>
          <div className="px-6 md:px-8 py-5 border-t border-neutral-100 flex-shrink-0 relative z-10">
            <div className="flex items-center justify-center gap-2.5">
              {slides.map((_, i) => <button key={i} onClick={() => goToSlide(i)} className="w-2.5 h-2.5 rounded-full transition-all duration-300" style={{ background: i === currentSlide ? '#10b981' : '#d4d4d4', transform: i === currentSlide ? 'scale(1.3)' : 'scale(1)' }} />)}
            </div>
          </div>
          <AnimatePresence>
            {gifConfig && (
              <motion.div initial={{ opacity: 0, y: 30 }} animate={{ opacity: 1, y: 0 }} exit={{ opacity: 0, y: 30 }} transition={{ type: 'spring', stiffness: 100 }} className={`absolute ${gifConfig.side === 'left' ? 'left-4 md:left-8' : 'right-4 md:right-8'} bottom-0 pointer-events-none`} style={{ zIndex: 15, height: gifConfig.height }}>
                <video autoPlay loop muted playsInline className="h-full w-auto object-contain object-bottom" style={{ background: 'transparent', border: 'none', boxShadow: 'none' }}>
                  <source src={gifConfig.url} type="video/mp4" />
                </video>
              </motion.div>
            )}
          </AnimatePresence>
        </div>
      );
    };

    ReactDOM.render(<LessonApp />, document.getElementById('root'));
  </script>
</body>
</html>
