<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>The 9 Trust Levers | Quantum Scale</title>
  <script src="https://cdn.tailwindcss.com" defer></script>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" defer></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" defer></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js" defer></script>
  <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js" defer></script>
  <script src="../shared/greetings.js" defer></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fraunces:wght@400;500;600;700;800;900&family=Inter:wght@400;500;600;700&family=Playfair+Display:wght@700&family=Pacifico&display=swap" rel="stylesheet">
  <style>
    :root { --accent: #f59e0b; --accent-dark: #d97706; --accent-light: #fbbf24; --accent-rgb: 245, 158, 11; }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: 'Inter', sans-serif; background: transparent; -webkit-font-smoothing: antialiased; }
    .title-font { font-family: 'Fraunces', serif; font-weight: 900; letter-spacing: -0.02em; line-height: 1.1; }
    h1, h2, h3, .slide-title { font-family: 'Fraunces', serif; font-weight: 900; letter-spacing: -0.02em; line-height: 1.1; }
    ::selection { background: var(--accent); color: white; }
    .slide-scroll::-webkit-scrollbar { display: none; }
    .slide-scroll { -ms-overflow-style: none; scrollbar-width: none; }
    .serif-demo { font-family: 'Playfair Display', serif; }
    .sans-demo { font-family: 'Inter', sans-serif; }
    .script-demo { font-family: 'Pacifico', cursive; }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { motion, AnimatePresence } = window.Motion;
    const { useState, useEffect, useCallback, useMemo } = React;

    const getUserName = () => { const params = new URLSearchParams(window.location.search); return params.get('userName') || 'Builder'; };
    const getInitialSlide = () => { const params = new URLSearchParams(window.location.search); const slide = params.get('slide'); return slide ? parseInt(slide, 10) : 0; };

    const LESSON_CONFIG = {
      id: 'nine-trust-levers',
      title: 'The 9 Trust Levers',
      description: 'How brand consistency builds subconscious trust - and why customers can\'t tell you why they don\'t trust a site.',
      accentColor: '#f59e0b',
      duration: '8 min',
      nextLesson: { id: 'ascension-ladder', title: 'The Ascension Ladder', teaser: 'How to turn a $7 customer into a $10,000 customer without feeling salesy.' }
    };

    // ============ ADMIN REPORTER SYSTEM ============
    let __isAdmin = false;
    window.addEventListener('message', function(e) { if (e.data?.type === 'ADMIN_STATUS') { __isAdmin = e.data.isAdmin; } });
    if (window.parent !== window) { window.parent.postMessage({ type: 'CHECK_ADMIN_STATUS' }, '*'); }

    const AdminSlideReportButton = ({ slideIndex, slideType }) => {
      const handleReport = (e) => {
        e.stopPropagation(); e.preventDefault();
        if (window.parent !== window) {
          window.parent.postMessage({ type: 'ADMIN_REPORT_REQUEST', slideIndex, slideType, lessonSlug: LESSON_CONFIG.id, elementId: slideType + '-' + slideIndex }, '*');
        }
      };
      return (
        <button onClick={handleReport} title={`Report issue on Slide ${slideIndex + 1} (${slideType})`}
          style={{ position: 'absolute', top: '12px', right: '12px', width: '32px', height: '32px', borderRadius: '8px', backgroundColor: 'rgba(239, 68, 68, 0.9)', color: 'white', border: 'none', cursor: 'pointer', display: 'flex', alignItems: 'center', justifyContent: 'center', zIndex: 1000, opacity: 0.6, transition: 'opacity 0.2s, transform 0.2s', boxShadow: '0 2px 8px rgba(0,0,0,0.15)' }}
          onMouseEnter={(e) => { e.currentTarget.style.opacity = '1'; e.currentTarget.style.transform = 'scale(1.1)'; }}
          onMouseLeave={(e) => { e.currentTarget.style.opacity = '0.6'; e.currentTarget.style.transform = 'scale(1)'; }}>
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
            <path d="m8 2 1.88 1.88"/><path d="M14.12 3.88 16 2"/><path d="M9 7.13v-1a3.003 3.003 0 1 1 6 0v1"/>
            <path d="M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6"/><path d="M12 20v-9"/>
          </svg>
        </button>
      );
    };

    const celebrationGifs = [
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_doing_a_quick_victory_dance_move_high_energy_c_d03b798b-a518-4e6c-bcae-d69b2dd50486_2.mp4',
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_jumping_in_the_air_arms_raised_high_YESSS_cele_201477e8-3df4-405a-bc81-81d1747e5c6c_2.mp4'
    ];
    const getRandomCelebrationGif = () => celebrationGifs[Math.floor(Math.random() * celebrationGifs.length)];
    const empathyGifs = [
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_thumbs_down_with_encouraging_nod_close_keep_go_613e541f-c072-436f-aee7-f99cd6f834fc_2.mp4'
    ];
    const getRandomEmpathyGif = () => empathyGifs[Math.floor(Math.random() * empathyGifs.length)];

    // ============ ELITE SLIDES DATA ============
    const slides = [
      { type: 'welcome', learningGoals: ['Why brand consistency isn\'t aesthetics - it\'s subconscious trust', 'The 4 main trust levers: Color, Fonts, Tone, Layout', 'How to choose colors based on customer psychology (not preference)'] },
      { type: 'hook', headline: 'People can\'t tell you WHY they don\'t trust a site. But their wallet knows.', subtext: 'You land on two stores selling the same product. One has random fonts, clashing colors, and inconsistent spacing. The other is clean, consistent, predictable. Which do you trust? You can\'t explain why. But you FEEL it. That feeling is subconscious pattern recognition.', brandImage: 'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/Apple_logo_grey.svg.png', brandName: 'Apple' },
      { type: 'trust-equation', title: 'The Trust Equation' },
      { type: 'trust-meter', title: 'How Consistency Builds Trust' },
      { type: 'four-levers-overview', title: 'The 4 Trust Levers' },
      { type: 'color-psychology', title: 'Lever 1: Color Psychology' },
      { type: 'font-personality', title: 'Lever 2: Font Personality' },
      { type: 'font-comparison', title: 'Font Consistency Impact' },
      { type: 'tone-spectrum', title: 'Lever 3: Tone of Voice' },
      { type: 'layout-consistency', title: 'Lever 4: Layout Consistency' },
      { type: 'revenue-impact', title: 'Why This Actually Matters' },
      { type: 'trust-checklist', title: 'Your Trust Audit' },
      { type: 'elite-insight', title: 'The Trust Paradox' },
      { type: 'quiz', question: 'Why does font consistency across pages increase trust?', options: ['Because customers consciously notice and appreciate the effort', 'Because it reduces cognitive load - the brain recognizes the pattern and relaxes', 'Because it makes the site load faster', 'Because Google ranks consistent sites higher'], correctIndex: 1, feedback: { correct: 'Exactly! Consistency reduces cognitive load. Your brain stops questioning and starts trusting. The pattern recognition happens subconsciously.', incorrect: 'Not quite. Font consistency isn\'t about conscious appreciation or technical performance - it builds subconscious trust by reducing cognitive load.' }},
      { type: 'completion', sources: [{ name: 'Essential Trust Badges', url: 'https://platform.shoffi.app/r/rl_uUHJkiZx' }] }
    ];

    // ============ ICONS ============
    const Icons = {
      Clock: () => <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>,
      Check: () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3"><polyline points="20 6 9 17 4 12"/></svg>,
      X: () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>,
      ArrowLeft: () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></svg>,
      ArrowRight: () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg>,
      Zap: () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>,
      ExternalLink: () => <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>,
      Link: () => <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>,
      Palette: () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><circle cx="13.5" cy="6.5" r=".5"/><circle cx="17.5" cy="10.5" r=".5"/><circle cx="8.5" cy="7.5" r=".5"/><circle cx="6.5" cy="12.5" r=".5"/><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.555C21.965 6.012 17.461 2 12 2z"/></svg>,
      Type: () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polyline points="4 7 4 4 20 4 20 7"/><line x1="9" y1="20" x2="15" y2="20"/><line x1="12" y1="4" x2="12" y2="20"/></svg>,
      MessageSquare: () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>,
      Layout: () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><line x1="3" y1="9" x2="21" y2="9"/><line x1="9" y1="21" x2="9" y2="9"/></svg>,
      Eye: () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>,
      Brain: () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z"/><path d="M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z"/></svg>,
      Shield: () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>,
      TrendingUp: () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/><polyline points="17 6 23 6 23 12"/></svg>,
      Lightbulb: () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5"/><path d="M9 18h6"/><path d="M10 22h4"/></svg>,
      DollarSign: () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><line x1="12" y1="1" x2="12" y2="23"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg>,
      CheckCircle: () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>,
    };

    // ============ ANIMATED COUNTER ============
    const AnimatedCounter = ({ target, duration = 2000, prefix = '', suffix = '', decimals = 0 }) => {
      const [count, setCount] = useState(0);
      useEffect(() => {
        let start = 0;
        const end = parseFloat(target);
        const increment = end / (duration / 16);
        const timer = setInterval(() => {
          start += increment;
          if (start >= end) { setCount(end); clearInterval(timer); }
          else { setCount(start); }
        }, 16);
        return () => clearInterval(timer);
      }, [target, duration]);
      return <span>{prefix}{count.toFixed(decimals)}{suffix}</span>;
    };

    // ============ THE 4 TRUST LEVERS DATA ============
    const trustLevers = [
      { icon: Icons.Palette, color: '#3b82f6', title: 'Color', subtitle: 'Psychology-based palette', desc: 'Blue=Trust, Red=Urgency, Black=Luxury. Choose based on customer emotions, not preference.' },
      { icon: Icons.Type, color: '#8b5cf6', title: 'Fonts', subtitle: '2 fonts maximum', desc: 'Serif=Traditional, Sans=Modern, Script=Elegant. Match customer expectations.' },
      { icon: Icons.MessageSquare, color: '#10b981', title: 'Tone', subtitle: 'Consistent voice', desc: 'Formal, Casual, or Irreverent. Pick one. Use it everywhere.' },
      { icon: Icons.Layout, color: '#f59e0b', title: 'Layout', subtitle: 'Predictable patterns', desc: 'Same logo position, nav bar, CTA buttons. Predictability = Trust.' }
    ];

    // ============ COLOR PSYCHOLOGY DATA ============
    const colorPsychology = [
      { color: '#3b82f6', name: 'Blue', emotion: 'Trust', examples: 'Banks, Tech, Healthcare' },
      { color: '#ef4444', name: 'Red', emotion: 'Urgency', examples: 'Sales, CTAs, Warnings' },
      { color: '#22c55e', name: 'Green', emotion: 'Growth', examples: 'Finance, Eco, Health' },
      { color: '#000000', name: 'Black', emotion: 'Luxury', examples: 'Premium, Fashion, Elite' }
    ];

    // ============ SLIDE COMPONENTS ============
    const WelcomeSlide = ({ data, onStart, userName, onShowGif, onHideGif }) => {
      const welcomeData = useMemo(() => getTimeBasedWelcome(), []);
      const gifSide = useMemo(() => Math.random() > 0.5 ? 'left' : 'right', []);

      useEffect(() => {
        onShowGif(welcomeData.gif, '65%', gifSide);
        return () => onHideGif();
      }, [welcomeData.gif, gifSide, onShowGif, onHideGif]);

      return (
        <div className="h-full w-full relative overflow-hidden">
          <div className="h-full flex flex-col items-center justify-center text-center px-6 py-4 relative z-20">
            <motion.h1 initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className="title-font text-3xl sm:text-4xl md:text-5xl lg:text-6xl text-black mb-2 md:mb-3">{LESSON_CONFIG.title}</motion.h1>
            <motion.p initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.1 }} className="text-neutral-600 text-base md:text-lg lg:text-xl mb-2 md:mb-3 max-w-lg leading-relaxed" dangerouslySetInnerHTML={{ __html: formatGreeting(welcomeData.greeting, `<span class="font-bold text-neutral-900">${userName}</span>`) }} />
            <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.15 }} className="flex items-center justify-center gap-1.5 text-neutral-400 text-[10px] md:text-xs mb-2 md:mb-3"><Icons.Clock /><span>{LESSON_CONFIG.duration}</span></motion.div>
            <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.2 }} className="bg-neutral-900 rounded-xl md:rounded-2xl p-3 md:p-5 mb-3 md:mb-4 max-w-sm w-full mx-auto">
              <p className="text-neutral-500 text-[9px] md:text-[11px] uppercase tracking-wider mb-2 md:mb-3">In this lesson</p>
              <ul className="space-y-1.5 md:space-y-2">
                {data.learningGoals.map((goal, i) => (
                  <motion.li key={i} initial={{ opacity: 0, x: -10 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.25 + i * 0.05 }} className="flex items-start gap-2 text-left">
                    <span className="w-5 h-5 rounded-md flex items-center justify-center text-[9px] font-bold text-white flex-shrink-0 mt-0.5" style={{ background: `linear-gradient(135deg, var(--accent), var(--accent-dark))` }}>{i + 1}</span>
                    <span className="text-neutral-300 text-[11px] md:text-sm leading-snug">{goal}</span>
                  </motion.li>
                ))}
              </ul>
            </motion.div>
            <motion.button initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.45 }} onClick={onStart} whileHover={{ scale: 1.02 }} whileTap={{ scale: 0.98 }} className="px-6 md:px-7 py-2.5 md:py-3 rounded-xl text-white font-semibold text-sm md:text-base" style={{ background: `linear-gradient(135deg, var(--accent), var(--accent-dark))` }}>Let's Go</motion.button>
          </div>
        </div>
      );
    };

    const HookSlide = ({ data }) => (
      <div className="h-full relative overflow-hidden">
        <div className="h-full flex flex-col justify-center px-6 md:px-16 max-w-3xl mx-auto slide-scroll overflow-y-auto py-8 md:py-10 relative z-10">
          <motion.div initial={{ opacity: 0, y: 40 }} animate={{ opacity: 1, y: 0 }} className="mb-4 md:mb-6">
            <span className="inline-block px-3 py-1 rounded-full text-xs font-semibold mb-3 md:mb-4" style={{ background: `rgba(var(--accent-rgb), 0.1)`, color: 'var(--accent)' }}>The Hook</span>
            <h2 className="slide-title text-2xl md:text-4xl lg:text-5xl text-black leading-tight">{data.headline}</h2>
          </motion.div>
          <motion.p initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.15 }} className="text-base md:text-xl text-neutral-600 leading-relaxed">{data.subtext}</motion.p>
        </div>
        {data.brandImage && (
          <motion.div initial={{ opacity: 0, x: 30 }} animate={{ opacity: 0.12, x: 0 }} transition={{ delay: 0.3, duration: 0.5 }}
            className="absolute bottom-0 right-0 z-0 pointer-events-none hidden md:block" style={{ height: '40%', maxHeight: '280px', marginRight: '5%', marginBottom: '5%' }}>
            <img src={data.brandImage} alt={data.brandName || ''} className="h-full w-auto object-contain" style={{ filter: 'grayscale(100%)' }} />
          </motion.div>
        )}
      </div>
    );

    // ============ TRUST EQUATION SLIDE ============
    const TrustEquationSlide = ({ data }) => {
      const stats = [
        { value: 94, suffix: '%', label: 'of first impressions', subtext: 'Are design-related' },
        { value: 0.05, suffix: 's', label: 'judgment time', subtext: 'Trust decided instantly', decimals: 2 },
        { value: 75, suffix: '%', label: 'credibility', subtext: 'Comes from visual design' }
      ];

      return (
        <div className="h-full flex flex-col justify-center px-6 md:px-12 max-w-4xl mx-auto">
          <motion.h2 initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} className="slide-title text-2xl md:text-3xl text-black text-center mb-8">{data.title}</motion.h2>

          <div className="grid md:grid-cols-3 gap-4">
            {stats.map((stat, i) => (
              <motion.div key={i} initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.1 + i * 0.15 }}
                className="relative rounded-xl p-6 text-center" style={{ background: 'linear-gradient(135deg, #1a1a1a, #2d2d2d)', boxShadow: '0 0 30px rgba(245, 158, 11, 0.1)' }}>
                <div className="absolute top-0 left-0 right-0 h-1 rounded-t-xl" style={{ background: 'linear-gradient(90deg, transparent, var(--accent), transparent)' }} />
                <div className="text-4xl md:text-5xl font-bold mb-2" style={{ color: 'var(--accent)' }}>
                  <AnimatedCounter target={stat.value} duration={1500} suffix={stat.suffix} decimals={stat.decimals || 0} />
                </div>
                <div className="text-sm font-semibold text-white mb-1">{stat.label}</div>
                <div className="text-xs text-neutral-400">{stat.subtext}</div>
              </motion.div>
            ))}
          </div>

          <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.6 }}
            className="mt-8 text-center">
            <div className="inline-flex items-center gap-3 px-5 py-3 rounded-xl bg-neutral-100">
              <Icons.Brain className="text-neutral-600" />
              <span className="text-neutral-700 text-sm font-medium">Trust is decided before you can explain it</span>
            </div>
          </motion.div>
        </div>
      );
    };

    // ============ TRUST METER SLIDE ============
    const TrustMeterSlide = ({ data }) => {
      const [trustLevel, setTrustLevel] = useState(0);
      const [phase, setPhase] = useState(0);

      useEffect(() => {
        const phases = [
          { level: 25, delay: 500 },
          { level: 50, delay: 1200 },
          { level: 75, delay: 1900 },
          { level: 100, delay: 2600 }
        ];
        phases.forEach((p, i) => {
          setTimeout(() => {
            setTrustLevel(p.level);
            setPhase(i + 1);
          }, p.delay);
        });
      }, []);

      const elements = ['Color', 'Fonts', 'Tone', 'Layout'];

      return (
        <div className="h-full flex flex-col justify-center px-6 md:px-12 max-w-3xl mx-auto">
          <motion.h2 initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} className="slide-title text-2xl md:text-3xl text-black text-center mb-8">{data.title}</motion.h2>

          {/* Trust Meter */}
          <motion.div initial={{ opacity: 0, scale: 0.9 }} animate={{ opacity: 1, scale: 1 }}
            className="relative rounded-2xl p-6 mb-6" style={{ background: 'linear-gradient(135deg, #1a1a1a, #2d2d2d)' }}>
            <div className="absolute top-0 left-0 right-0 h-1 rounded-t-2xl" style={{ background: 'linear-gradient(90deg, transparent, var(--accent), transparent)' }} />

            <div className="flex items-center justify-between mb-4">
              <span className="text-neutral-400 text-sm">Trust Level</span>
              <span className="text-2xl font-bold" style={{ color: 'var(--accent)' }}>{trustLevel}%</span>
            </div>

            <div className="w-full h-4 bg-neutral-700 rounded-full overflow-hidden mb-6">
              <motion.div className="h-full rounded-full" animate={{ width: `${trustLevel}%` }} transition={{ duration: 0.5, ease: 'easeOut' }}
                style={{ background: `linear-gradient(90deg, var(--accent-dark), var(--accent))` }} />
            </div>

            <div className="grid grid-cols-4 gap-2">
              {elements.map((el, i) => (
                <motion.div key={i} initial={{ opacity: 0.3 }} animate={{ opacity: phase > i ? 1 : 0.3 }}
                  className="text-center p-3 rounded-lg transition-all" style={{ background: phase > i ? 'rgba(245, 158, 11, 0.15)' : 'transparent', border: phase > i ? '1px solid rgba(245, 158, 11, 0.3)' : '1px solid transparent' }}>
                  <p className={`text-xs font-semibold ${phase > i ? 'text-amber-400' : 'text-neutral-500'}`}>{el}</p>
                  {phase > i && <Icons.Check className="mx-auto mt-1 text-green-400 w-4 h-4" />}
                </motion.div>
              ))}
            </div>
          </motion.div>

          <motion.p initial={{ opacity: 0 }} animate={{ opacity: 1 }} transition={{ delay: 3 }}
            className="text-center text-neutral-500 text-sm">
            Each consistent element adds to the trust equation. Miss one, and customers feel it.
          </motion.p>
        </div>
      );
    };

    // ============ FOUR LEVERS OVERVIEW SLIDE ============
    const FourLeversOverviewSlide = ({ data }) => {
      const [activeIndex, setActiveIndex] = useState(-1);

      useEffect(() => {
        const interval = setInterval(() => {
          setActiveIndex(prev => (prev + 1) % 4);
        }, 2000);
        return () => clearInterval(interval);
      }, []);

      return (
        <div className="h-full flex flex-col justify-center px-6 md:px-12 max-w-4xl mx-auto">
          <motion.h2 initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} className="slide-title text-2xl md:text-3xl text-black text-center mb-6">{data.title}</motion.h2>

          <div className="grid grid-cols-2 gap-4">
            {trustLevers.map((lever, i) => (
              <motion.div key={i} initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.1 + i * 0.1 }}
                className="relative rounded-xl p-5 transition-all duration-300"
                style={{
                  background: activeIndex === i ? 'linear-gradient(135deg, #1a1a1a, #2d2d2d)' : 'white',
                  border: activeIndex === i ? `1px solid ${lever.color}40` : '2px solid #e5e5e5',
                  boxShadow: activeIndex === i ? `0 0 30px ${lever.color}20` : 'none'
                }}>
                {activeIndex === i && (
                  <div className="absolute top-0 left-0 right-0 h-1 rounded-t-xl" style={{ background: `linear-gradient(90deg, transparent, ${lever.color}, transparent)` }} />
                )}
                <div className="flex items-center gap-3 mb-2">
                  <div className="w-10 h-10 rounded-lg flex items-center justify-center" style={{ background: `linear-gradient(135deg, ${lever.color}, ${lever.color}80)` }}>
                    <lever.icon className="text-white" />
                  </div>
                  <div>
                    <h3 className={`font-bold ${activeIndex === i ? 'text-white' : 'text-neutral-900'}`}>{lever.title}</h3>
                    <p className={`text-xs ${activeIndex === i ? 'text-neutral-400' : 'text-neutral-500'}`}>{lever.subtitle}</p>
                  </div>
                </div>
                <p className={`text-sm leading-relaxed ${activeIndex === i ? 'text-neutral-300' : 'text-neutral-600'}`}>{lever.desc}</p>
              </motion.div>
            ))}
          </div>
        </div>
      );
    };

    // ============ COLOR PSYCHOLOGY SLIDE ============
    const ColorPsychologySlide = ({ data }) => (
      <div className="h-full flex flex-col justify-center px-6 md:px-12 max-w-4xl mx-auto">
        <motion.h2 initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} className="slide-title text-2xl md:text-3xl text-black text-center mb-6">{data.title}</motion.h2>

        <div className="grid grid-cols-2 md:grid-cols-4 gap-3">
          {colorPsychology.map((cp, i) => (
            <motion.div key={i} initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.1 + i * 0.1 }}
              className="relative rounded-xl p-4 text-center" style={{ background: 'linear-gradient(135deg, #1a1a1a, #2d2d2d)' }}>
              <div className="absolute top-0 left-0 right-0 h-1 rounded-t-xl" style={{ background: `linear-gradient(90deg, transparent, ${cp.color}, transparent)` }} />
              <div className="w-12 h-12 rounded-full mx-auto mb-3" style={{ background: cp.color, boxShadow: `0 0 20px ${cp.color}40` }} />
              <h3 className="text-white font-bold mb-1">{cp.name}</h3>
              <p className="text-lg font-semibold mb-1" style={{ color: cp.color }}>{cp.emotion}</p>
              <p className="text-neutral-500 text-xs">{cp.examples}</p>
            </motion.div>
          ))}
        </div>

        <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.5 }}
          className="mt-6 rounded-xl p-4 text-center bg-amber-50 border border-amber-200">
          <p className="text-amber-800 text-sm font-medium">
            <Icons.Lightbulb className="inline mr-2" />
            Choose based on what emotion you want customers to feel, not what you personally like.
          </p>
        </motion.div>
      </div>
    );

    // ============ FONT PERSONALITY SLIDE ============
    const FontPersonalitySlide = ({ data }) => {
      const fonts = [
        { class: 'serif-demo', name: 'Serif', personality: 'Traditional & Trustworthy', example: 'Law firms, News, Finance', sample: 'Established 1892' },
        { class: 'sans-demo', name: 'Sans-Serif', personality: 'Modern & Clean', example: 'Tech, Startups, DTC', sample: 'Future Forward' },
        { class: 'script-demo', name: 'Script', personality: 'Elegant & Personal', example: 'Luxury, Beauty, Weddings', sample: 'Signature Style' }
      ];

      return (
        <div className="h-full flex flex-col justify-center px-6 md:px-12 max-w-4xl mx-auto">
          <motion.h2 initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} className="slide-title text-2xl md:text-3xl text-black text-center mb-6">{data.title}</motion.h2>

          <div className="grid md:grid-cols-3 gap-4">
            {fonts.map((font, i) => (
              <motion.div key={i} initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.1 + i * 0.15 }}
                className="relative rounded-xl p-5" style={{ background: 'linear-gradient(135deg, #1a1a1a, #2d2d2d)' }}>
                <div className="absolute top-0 left-0 right-0 h-1 rounded-t-xl" style={{ background: 'linear-gradient(90deg, transparent, var(--accent), transparent)' }} />

                <p className={`${font.class} text-2xl md:text-3xl text-white mb-4 text-center`}>{font.sample}</p>

                <div className="text-center">
                  <h3 className="text-white font-bold mb-1">{font.name}</h3>
                  <p className="text-sm mb-2" style={{ color: 'var(--accent)' }}>{font.personality}</p>
                  <p className="text-neutral-500 text-xs">{font.example}</p>
                </div>
              </motion.div>
            ))}
          </div>

          <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.6 }}
            className="mt-6 text-center">
            <div className="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-neutral-100">
              <Icons.Type className="text-neutral-600" />
              <span className="text-neutral-700 text-sm font-medium">Rule: Maximum 2 fonts per site</span>
            </div>
          </motion.div>
        </div>
      );
    };

    // ============ FONT COMPARISON SLIDE ============
    const FontComparisonSlide = ({ data }) => (
      <div className="h-full flex flex-col justify-center px-6 md:px-12 max-w-4xl mx-auto">
        <motion.h2 initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} className="slide-title text-2xl md:text-3xl text-black text-center mb-6">{data.title}</motion.h2>

        <div className="grid md:grid-cols-2 gap-4">
          <motion.div initial={{ opacity: 0, x: -20 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.1 }}
            className="rounded-xl p-5 bg-red-50 border-2 border-red-200">
            <div className="flex items-center gap-2 mb-4">
              <div className="w-6 h-6 rounded-full bg-red-500 flex items-center justify-center text-white"><Icons.X /></div>
              <span className="font-semibold text-red-700 text-sm">Inconsistent</span>
            </div>
            <div className="space-y-2 mb-4">
              <p className="serif-demo text-lg text-neutral-700">Homepage: Times New Roman</p>
              <p className="text-lg text-neutral-700" style={{ fontFamily: 'Comic Sans MS, cursive' }}>Product: Comic Sans</p>
              <p className="sans-demo text-lg text-neutral-700">Checkout: Arial</p>
            </div>
            <div className="rounded-lg p-3 bg-red-100">
              <p className="text-red-700 text-sm font-semibold">Bounce Rate: 68%</p>
            </div>
          </motion.div>

          <motion.div initial={{ opacity: 0, x: 20 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.2 }}
            className="relative rounded-xl p-5" style={{ background: 'linear-gradient(135deg, #1a1a1a, #2d2d2d)', boxShadow: '0 0 30px rgba(34, 197, 94, 0.15)' }}>
            <div className="absolute top-0 left-0 right-0 h-1 rounded-t-xl" style={{ background: 'linear-gradient(90deg, transparent, #22c55e, transparent)' }} />
            <div className="flex items-center gap-2 mb-4">
              <div className="w-6 h-6 rounded-full bg-green-500 flex items-center justify-center text-white"><Icons.Check /></div>
              <span className="font-semibold text-green-400 text-sm">Consistent</span>
            </div>
            <div className="space-y-2 mb-4">
              <p className="sans-demo text-lg text-neutral-300">Homepage: Inter</p>
              <p className="sans-demo text-lg text-neutral-300">Product: Inter</p>
              <p className="sans-demo text-lg text-neutral-300">Checkout: Inter</p>
            </div>
            <div className="rounded-lg p-3 bg-green-500/20">
              <p className="text-green-400 text-sm font-semibold">Bounce Rate: 41% (-40%)</p>
            </div>
          </motion.div>
        </div>

        <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.4 }}
          className="mt-6 rounded-xl p-4 text-center" style={{ background: 'linear-gradient(135deg, #1a1a1a, #2d2d2d)' }}>
          <p className="text-neutral-300 text-sm">
            <Icons.Zap className="inline mr-2" style={{ color: 'var(--accent)' }} />
            Same products. Same prices. Font consistency dropped bounce rate by 40%.
          </p>
        </motion.div>
      </div>
    );

    // ============ TONE SPECTRUM SLIDE ============
    const ToneSpectrumSlide = ({ data }) => {
      const [activeTone, setActiveTone] = useState(1);
      const tones = [
        { name: 'Formal', example: '"We are pleased to inform you that your order has been dispatched."', use: 'B2B, Legal, Finance', color: '#3b82f6' },
        { name: 'Casual', example: '"Hey! Your order is on its way. Get excited!"', use: 'DTC, Lifestyle, Apps', color: '#10b981' },
        { name: 'Irreverent', example: '"Holy sh*t, your order shipped. It\'s about time."', use: 'Streetwear, Bold Brands', color: '#ef4444' }
      ];

      useEffect(() => {
        const interval = setInterval(() => {
          setActiveTone(prev => (prev + 1) % 3);
        }, 3000);
        return () => clearInterval(interval);
      }, []);

      return (
        <div className="h-full flex flex-col justify-center px-6 md:px-12 max-w-4xl mx-auto">
          <motion.h2 initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} className="slide-title text-2xl md:text-3xl text-black text-center mb-6">{data.title}</motion.h2>

          {/* Tone Spectrum Bar */}
          <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} className="mb-6">
            <div className="flex justify-between mb-2">
              {tones.map((t, i) => (
                <span key={i} className={`text-sm font-semibold transition-all ${activeTone === i ? 'text-neutral-900 scale-110' : 'text-neutral-400'}`}>{t.name}</span>
              ))}
            </div>
            <div className="h-3 rounded-full bg-neutral-200 relative overflow-hidden">
              <motion.div className="absolute top-0 h-full w-1/3 rounded-full"
                animate={{ left: `${activeTone * 33.33}%` }}
                style={{ background: tones[activeTone].color }} />
            </div>
          </motion.div>

          {/* Active Tone Card */}
          <motion.div key={activeTone} initial={{ opacity: 0, y: 10 }} animate={{ opacity: 1, y: 0 }}
            className="relative rounded-xl p-6" style={{ background: 'linear-gradient(135deg, #1a1a1a, #2d2d2d)', boxShadow: `0 0 30px ${tones[activeTone].color}20` }}>
            <div className="absolute top-0 left-0 right-0 h-1 rounded-t-xl" style={{ background: `linear-gradient(90deg, transparent, ${tones[activeTone].color}, transparent)` }} />

            <p className="text-xl md:text-2xl text-white mb-4 leading-relaxed">"{tones[activeTone].example}"</p>

            <div className="flex items-center justify-between">
              <div className="flex items-center gap-2">
                <Icons.MessageSquare style={{ color: tones[activeTone].color }} />
                <span className="font-semibold" style={{ color: tones[activeTone].color }}>{tones[activeTone].name} Tone</span>
              </div>
              <span className="text-neutral-500 text-sm">Best for: {tones[activeTone].use}</span>
            </div>
          </motion.div>

          <motion.p initial={{ opacity: 0 }} animate={{ opacity: 1 }} transition={{ delay: 0.3 }}
            className="text-center text-neutral-500 text-sm mt-6">
            Pick one tone. Use it everywhere. Homepage, emails, checkout, support.
          </motion.p>
        </div>
      );
    };

    // ============ LAYOUT CONSISTENCY SLIDE ============
    const LayoutConsistencySlide = ({ data }) => {
      const rules = [
        { icon: Icons.Eye, title: 'Logo Position', desc: 'Same spot on every page' },
        { icon: Icons.Layout, title: 'Navigation', desc: 'Same structure everywhere' },
        { icon: Icons.Zap, title: 'CTA Buttons', desc: 'Same style and position' },
        { icon: Icons.Shield, title: 'Spacing', desc: 'Consistent padding/margins' }
      ];

      return (
        <div className="h-full flex flex-col justify-center px-6 md:px-12 max-w-4xl mx-auto">
          <motion.h2 initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} className="slide-title text-2xl md:text-3xl text-black text-center mb-6">{data.title}</motion.h2>

          <div className="grid grid-cols-2 gap-3 mb-6">
            {rules.map((rule, i) => (
              <motion.div key={i} initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.1 + i * 0.1 }}
                className="relative rounded-xl p-4" style={{ background: 'linear-gradient(135deg, #1a1a1a, #2d2d2d)' }}>
                <div className="absolute top-0 left-0 right-0 h-0.5 rounded-t-xl" style={{ background: 'linear-gradient(90deg, transparent, var(--accent), transparent)' }} />
                <div className="flex items-center gap-3">
                  <div className="w-10 h-10 rounded-lg flex items-center justify-center" style={{ background: 'linear-gradient(135deg, var(--accent), var(--accent-dark))' }}>
                    <rule.icon className="text-white" />
                  </div>
                  <div>
                    <h3 className="text-white font-semibold text-sm">{rule.title}</h3>
                    <p className="text-neutral-400 text-xs">{rule.desc}</p>
                  </div>
                </div>
              </motion.div>
            ))}
          </div>

          <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.5 }}
            className="rounded-xl p-5 text-center" style={{ background: 'linear-gradient(135deg, var(--accent), var(--accent-dark))' }}>
            <p className="text-white text-lg font-semibold mb-2">Predictable = Easy = Trust</p>
            <p className="text-white/80 text-sm">When customers don't have to think about navigation, they can focus on buying.</p>
          </motion.div>
        </div>
      );
    };

    // ============ REVENUE IMPACT SLIDE ============
    const RevenueImpactSlide = ({ data }) => (
      <div className="h-full flex flex-col justify-center px-6 md:px-12 max-w-3xl mx-auto">
        <motion.h2 initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} className="slide-title text-2xl md:text-3xl text-black text-center mb-6">{data.title}</motion.h2>

        <motion.div initial={{ opacity: 0, scale: 0.95 }} animate={{ opacity: 1, scale: 1 }}
          className="relative rounded-2xl p-8 text-center mb-6" style={{ background: 'linear-gradient(135deg, #1a1a1a, #2d2d2d)', boxShadow: '0 0 50px rgba(245, 158, 11, 0.15)' }}>
          <div className="absolute top-0 left-0 right-0 h-1 rounded-t-2xl" style={{ background: 'linear-gradient(90deg, transparent, var(--accent), transparent)' }} />

          <Icons.TrendingUp className="mx-auto mb-4" style={{ color: 'var(--accent)', width: 40, height: 40 }} />

          <p className="text-6xl md:text-7xl font-bold mb-2" style={{ color: 'var(--accent)' }}>
            +<AnimatedCounter target={23} duration={1500} suffix="%" />
          </p>
          <p className="text-white text-xl font-semibold mb-2">Higher Revenue</p>
          <p className="text-neutral-400">for brands with consistent visual identity</p>
          <p className="text-neutral-500 text-xs mt-4">Source: Lucidpress Brand Consistency Study</p>
        </motion.div>

        <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.3 }}
          className="grid md:grid-cols-2 gap-3">
          <div className="rounded-xl p-4 bg-red-50 border border-red-200 text-center">
            <p className="text-red-600 font-semibold text-sm">Inconsistent Brands</p>
            <p className="text-neutral-600 text-xs">Force customers to re-evaluate trust on every page</p>
          </div>
          <div className="rounded-xl p-4 bg-green-50 border border-green-200 text-center">
            <p className="text-green-600 font-semibold text-sm">Consistent Brands</p>
            <p className="text-neutral-600 text-xs">Let customers relax. Relaxed customers buy.</p>
          </div>
        </motion.div>
      </div>
    );

    // ============ TRUST CHECKLIST SLIDE ============
    const TrustChecklistSlide = ({ data }) => {
      const [checkedItems, setCheckedItems] = useState([]);
      const items = [
        { lever: 'Color', check: '3 colors max (primary, secondary, neutral)' },
        { lever: 'Fonts', check: '2 fonts max (headline + body)' },
        { lever: 'Tone', check: 'One voice documented and enforced' },
        { lever: 'Layout', check: 'Consistent spacing on all pages' }
      ];

      const toggleItem = (i) => {
        setCheckedItems(prev => prev.includes(i) ? prev.filter(x => x !== i) : [...prev, i]);
      };

      return (
        <div className="h-full flex flex-col justify-center px-6 md:px-12 max-w-3xl mx-auto">
          <motion.h2 initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} className="slide-title text-2xl md:text-3xl text-black text-center mb-6">{data.title}</motion.h2>

          <div className="space-y-3">
            {items.map((item, i) => (
              <motion.div key={i} initial={{ opacity: 0, x: -20 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.1 + i * 0.1 }}
                onClick={() => toggleItem(i)}
                className={`relative rounded-xl p-4 cursor-pointer transition-all ${checkedItems.includes(i) ? '' : 'hover:bg-neutral-50'}`}
                style={{
                  background: checkedItems.includes(i) ? 'linear-gradient(135deg, #1a1a1a, #2d2d2d)' : 'white',
                  border: checkedItems.includes(i) ? '1px solid rgba(245, 158, 11, 0.3)' : '2px solid #e5e5e5'
                }}>
                {checkedItems.includes(i) && (
                  <div className="absolute top-0 left-0 right-0 h-0.5 rounded-t-xl" style={{ background: 'linear-gradient(90deg, transparent, var(--accent), transparent)' }} />
                )}
                <div className="flex items-center gap-4">
                  <div className={`w-8 h-8 rounded-lg flex items-center justify-center transition-all ${checkedItems.includes(i) ? 'bg-green-500' : 'bg-neutral-100'}`}>
                    {checkedItems.includes(i) ? <Icons.Check className="text-white w-5 h-5" /> : <span className="text-neutral-400 text-sm font-bold">{i + 1}</span>}
                  </div>
                  <div>
                    <span className={`text-xs uppercase tracking-wider ${checkedItems.includes(i) ? 'text-amber-400' : 'text-neutral-500'}`}>{item.lever}</span>
                    <p className={`font-medium ${checkedItems.includes(i) ? 'text-white' : 'text-neutral-700'}`}>{item.check}</p>
                  </div>
                </div>
              </motion.div>
            ))}
          </div>

          <motion.p initial={{ opacity: 0 }} animate={{ opacity: 1 }} transition={{ delay: 0.6 }}
            className="text-center text-neutral-500 text-sm mt-6">
            Click to check off each item as you audit your store
          </motion.p>
        </div>
      );
    };

    // ============ ELITE INSIGHT SLIDE ============
    const EliteInsightSlide = ({ data }) => (
      <div className="h-full flex flex-col justify-center items-center px-6 md:px-12 max-w-2xl mx-auto">
        <motion.div initial={{ opacity: 0, scale: 0.9 }} animate={{ opacity: 1, scale: 1 }}
          className="relative rounded-2xl p-8 text-center" style={{ background: 'linear-gradient(135deg, #1a1a1a, #2d2d2d)', boxShadow: '0 0 60px rgba(245, 158, 11, 0.2)', border: '1px solid rgba(245, 158, 11, 0.3)' }}>
          <div className="absolute top-0 left-0 right-0 h-1 rounded-t-2xl" style={{ background: 'linear-gradient(90deg, transparent, var(--accent), transparent)' }} />

          <motion.div initial={{ scale: 0 }} animate={{ scale: 1 }} transition={{ delay: 0.2, type: 'spring' }}
            className="w-16 h-16 rounded-xl flex items-center justify-center mx-auto mb-6" style={{ background: 'linear-gradient(135deg, var(--accent), var(--accent-dark))' }}>
            <Icons.Lightbulb className="text-white" />
          </motion.div>

          <motion.p initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.3 }}
            className="text-xs uppercase tracking-wider mb-4" style={{ color: 'var(--accent)' }}>The Trust Paradox</motion.p>

          <motion.h3 initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.4 }}
            className="text-white text-2xl md:text-3xl font-bold leading-tight mb-4">
            "Customers can't tell you WHY they trust you.<br/>But their wallet knows."
          </motion.h3>

          <motion.p initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.5 }}
            className="text-neutral-400 leading-relaxed">
            Trust is built through consistency: colors, fonts, tone, layout. It happens subconsciously.
            The brain recognizes patterns and relaxes. That relaxation converts.
          </motion.p>
        </motion.div>
      </div>
    );

    // ============ QUIZ SLIDE ============
    const QuizSlide = ({ data, onShowGif, onHideGif }) => {
      const [selected, setSelected] = useState(null);
      const [showFeedback, setShowFeedback] = useState(false);
      const celebrationGif = useMemo(() => getRandomCelebrationGif(), []);
      const empathyGif = useMemo(() => getRandomEmpathyGif(), []);
      const gifSide = useMemo(() => Math.random() > 0.5 ? 'left' : 'right', []);
      const handleSelect = (index) => { if (showFeedback) return; setSelected(index); setShowFeedback(true); };
      const isCorrect = selected === data.correctIndex;

      useEffect(() => {
        if (showFeedback) {
          if (isCorrect) { onShowGif(celebrationGif, '60%', gifSide); } else { onShowGif(empathyGif, '60%', gifSide); }
        }
      }, [showFeedback, isCorrect, celebrationGif, empathyGif, gifSide, onShowGif]);

      useEffect(() => { return () => onHideGif(); }, [onHideGif]);

      return (
        <div className="h-full w-full relative overflow-hidden">
          <div className="h-full flex flex-col justify-center px-8 md:px-12 max-w-2xl mx-auto slide-scroll overflow-y-auto py-10 relative z-30">
            <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} className="text-center mb-6">
              <p className="text-xs uppercase tracking-wider text-neutral-400 mb-3">Quick Check</p>
              <h2 className="slide-title text-xl md:text-2xl text-black leading-tight">{data.question}</h2>
            </motion.div>
            <div className="space-y-3 mb-6">
              {data.options.map((option, i) => (
                <motion.button key={i} initial={{ opacity: 0, x: -15 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.08 + i * 0.06 }} onClick={() => handleSelect(i)} disabled={showFeedback} className={`w-full p-4 rounded-xl text-left transition-all border-2 ${showFeedback ? i === data.correctIndex ? 'border-green-500 bg-green-50' : i === selected ? 'border-red-400 bg-red-50' : 'border-neutral-200 bg-white opacity-40' : 'border-neutral-200 bg-white hover:border-neutral-300'}`}>
                  <div className="flex items-center gap-3">
                    <span className={`w-8 h-8 rounded-lg flex items-center justify-center text-sm font-bold transition-all ${showFeedback && i === data.correctIndex ? 'bg-green-500 text-white' : showFeedback && i === selected && !isCorrect ? 'bg-red-400 text-white' : 'bg-neutral-100 text-neutral-500'}`}>
                      {showFeedback && i === data.correctIndex ? <Icons.Check /> : showFeedback && i === selected && !isCorrect ? <Icons.X /> : String.fromCharCode(65 + i)}
                    </span>
                    <span className="text-neutral-700 text-sm md:text-base">{option}</span>
                  </div>
                </motion.button>
              ))}
            </div>
            <AnimatePresence>
              {showFeedback && (
                <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} className={`p-5 rounded-xl ${isCorrect ? 'bg-green-50 border border-green-200' : 'bg-amber-50 border border-amber-200'}`}>
                  <p className={`text-sm leading-relaxed ${isCorrect ? 'text-green-800' : 'text-amber-800'}`}>{isCorrect ? data.feedback.correct : data.feedback.incorrect}</p>
                </motion.div>
              )}
            </AnimatePresence>
          </div>
        </div>
      );
    };

    // ============ COMPLETION SLIDE ============
    const CompletionSlide = ({ data }) => (
      <div className="h-full flex flex-col items-center justify-center text-center px-8 slide-scroll overflow-y-auto py-8">
        <motion.div initial={{ opacity: 0, scale: 0 }} animate={{ opacity: 1, scale: 1 }} transition={{ type: 'spring', duration: 0.5 }} className="w-16 h-16 rounded-xl flex items-center justify-center mb-4 text-white" style={{ background: `linear-gradient(135deg, var(--accent), var(--accent-dark))`, boxShadow: `0 6px 24px rgba(var(--accent-rgb), 0.35)` }}><Icons.Check /></motion.div>
        <motion.h2 initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.15 }} className="slide-title text-2xl md:text-3xl text-black mb-3">Lesson Complete</motion.h2>
        <motion.p initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.25 }} className="text-neutral-500 text-sm mb-5 max-w-md leading-relaxed">You now understand the 4 trust levers. Pick 3 colors, choose 2 fonts, lock in your tone, keep layout consistent. Watch trust build automatically.</motion.p>
        <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.35 }} className="bg-neutral-900 rounded-xl p-5 max-w-md w-full mb-4">
          <p className="text-neutral-500 text-xs uppercase tracking-wider mb-2">Up Next</p>
          <h3 className="text-white font-bold text-lg mb-1">{LESSON_CONFIG.nextLesson.title}</h3>
          <p className="text-neutral-400 text-xs">{LESSON_CONFIG.nextLesson.teaser}</p>
        </motion.div>
        {data?.sources && data.sources.length > 0 && (
          <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.45 }} className="bg-neutral-50 border border-neutral-200 rounded-xl p-4 max-w-md w-full">
            <p className="text-neutral-400 text-xs uppercase tracking-wider mb-2 flex items-center justify-center gap-1"><Icons.Link /> Tools Mentioned</p>
            <div className="space-y-1.5">
              {data.sources.map((source, i) => (
                <a key={i} href={source.url} target="_blank" rel="noopener noreferrer" className="flex items-center justify-center gap-2 text-sm font-medium transition-colors hover:underline" style={{ color: 'var(--accent)' }}>
                  {source.name}
                  <Icons.ExternalLink />
                </a>
              ))}
            </div>
          </motion.div>
        )}
      </div>
    );

    // ============ LESSON APP ============
    const LessonApp = () => {
      const [currentSlide, setCurrentSlide] = useState(getInitialSlide());
      const [direction, setDirection] = useState(1);
      const userName = useMemo(() => getUserName(), []);
      const currentSlideRef = React.useRef(currentSlide);
      const [gifConfig, setGifConfig] = useState(null);
      const [isAnimating, setIsAnimating] = useState(false);

      const showGif = useCallback((url, height, side) => setGifConfig({ url, height, side }), []);
      const hideGif = useCallback(() => setGifConfig(null), []);

      React.useEffect(() => { currentSlideRef.current = currentSlide; }, [currentSlide]);

      useEffect(() => {
        window.parent.postMessage({ type: 'LESSON_SLIDE_UPDATE',
          totalSlides: slides.length, slideIndex: currentSlide, slideType: slides[currentSlide]?.type, lessonSlug: LESSON_CONFIG.id }, '*');
      }, [currentSlide]);

      const goToSlide = useCallback((newSlide) => {
        if (isAnimating || newSlide < 0 || newSlide >= slides.length) return;
        setIsAnimating(true);
        setDirection(newSlide > currentSlideRef.current ? 1 : -1);
        setCurrentSlide(newSlide);
      }, [isAnimating]);

      const nextSlide = useCallback(() => { if (currentSlideRef.current + 1 < slides.length) goToSlide(currentSlideRef.current + 1); }, [goToSlide]);
      const prevSlide = useCallback(() => { if (currentSlideRef.current - 1 >= 0) goToSlide(currentSlideRef.current - 1); }, [goToSlide]);

      useEffect(() => {
        const handleKeyDown = (e) => {
          if (e.key === 'ArrowRight' || e.key === ' ') { e.preventDefault(); nextSlide(); }
          if (e.key === 'ArrowLeft') { e.preventDefault(); prevSlide(); }
        };
        window.addEventListener('keydown', handleKeyDown);
        return () => window.removeEventListener('keydown', handleKeyDown);
      }, [nextSlide, prevSlide]);

      const slideVariants = {
        enter: (dir) => ({ x: dir > 0 ? '100%' : '-100%', opacity: 0 }),
        center: { x: 0, opacity: 1 },
        exit: (dir) => ({ x: dir > 0 ? '-100%' : '100%', opacity: 0 })
      };

      const renderSlide = (slide) => {
        switch (slide.type) {
          case 'welcome': return <WelcomeSlide data={slide} onStart={nextSlide} userName={userName} onShowGif={showGif} onHideGif={hideGif} />;
          case 'hook': return <HookSlide data={slide} />;
          case 'trust-equation': return <TrustEquationSlide data={slide} />;
          case 'trust-meter': return <TrustMeterSlide data={slide} />;
          case 'four-levers-overview': return <FourLeversOverviewSlide data={slide} />;
          case 'color-psychology': return <ColorPsychologySlide data={slide} />;
          case 'font-personality': return <FontPersonalitySlide data={slide} />;
          case 'font-comparison': return <FontComparisonSlide data={slide} />;
          case 'tone-spectrum': return <ToneSpectrumSlide data={slide} />;
          case 'layout-consistency': return <LayoutConsistencySlide data={slide} />;
          case 'revenue-impact': return <RevenueImpactSlide data={slide} />;
          case 'trust-checklist': return <TrustChecklistSlide data={slide} />;
          case 'elite-insight': return <EliteInsightSlide data={slide} />;
          case 'quiz': return <QuizSlide data={slide} onShowGif={showGif} onHideGif={hideGif} />;
          case 'completion': return <CompletionSlide data={slide} />;
          default: return null;
        }
      };

      const showPrev = currentSlide > 0;
      const showNext = currentSlide < slides.length - 1 && slides[currentSlide].type !== 'welcome';

      return (
        <div className="w-full h-screen bg-white flex flex-col relative">
          <div className="flex-1 relative overflow-hidden z-20">
            <AnimatePresence mode="wait" custom={direction} onExitComplete={() => setIsAnimating(false)}>
              <motion.div key={currentSlide} custom={direction} variants={slideVariants} initial="enter" animate="center" exit="exit" transition={{ duration: 0.3, ease: [0.25, 0.1, 0.25, 1] }} className="absolute inset-0">
                {renderSlide(slides[currentSlide])}
                <AdminSlideReportButton slideIndex={currentSlide} slideType={slides[currentSlide].type} />
              </motion.div>
            </AnimatePresence>
            {showPrev && <button onClick={prevSlide} className="absolute left-5 top-1/2 -translate-y-1/2 w-12 h-12 rounded-full bg-neutral-100 hover:bg-neutral-200 flex items-center justify-center text-neutral-500 hover:text-neutral-700 transition-all z-10"><Icons.ArrowLeft /></button>}
            {showNext && <button onClick={nextSlide} className="absolute right-5 top-1/2 -translate-y-1/2 w-12 h-12 rounded-full bg-neutral-100 hover:bg-neutral-200 flex items-center justify-center text-neutral-500 hover:text-neutral-700 transition-all z-10"><Icons.ArrowRight /></button>}
          </div>
          <div className="px-6 md:px-8 py-5 border-t border-neutral-100 flex-shrink-0 relative z-10">
            <div className="flex items-center justify-center gap-2">
              {slides.map((_, i) => <button key={i} onClick={() => goToSlide(i)} className="w-2 h-2 rounded-full transition-all duration-300" style={{ background: i === currentSlide ? 'var(--accent)' : '#d4d4d4', transform: i === currentSlide ? 'scale(1.4)' : 'scale(1)' }} />)}
            </div>
          </div>
          <AnimatePresence>
            {gifConfig && (
              <motion.div initial={{ opacity: 0, y: 30 }} animate={{ opacity: 1, y: 0 }} exit={{ opacity: 0, y: 30 }} transition={{ type: 'spring', stiffness: 100 }} className={`absolute ${gifConfig.side === 'left' ? 'left-4 md:left-8' : 'right-4 md:right-8'} bottom-0 pointer-events-none`} style={{ zIndex: 15, height: gifConfig.height }}>
                <video autoPlay loop muted playsInline className="h-full w-auto object-contain object-bottom" style={{ background: 'transparent', border: 'none', boxShadow: 'none' }}>
                  <source src={gifConfig.url} type="video/mp4" />
                </video>
              </motion.div>
            )}
          </AnimatePresence>
        </div>
      );
    };

    ReactDOM.render(<LessonApp />, document.getElementById('root'));
  </script>
</body>
</html>
