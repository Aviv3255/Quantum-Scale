<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Poppy's $2B Playbook: Disrupt Giants Without Their Budget | Quantum Scale</title>
  <script src="https://cdn.tailwindcss.com" defer></script>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" defer></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" defer></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js" defer></script>
  <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js" defer></script>
  <script src="../shared/greetings.js" defer></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fraunces:wght@400;500;600;700;800;900&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root { --accent: #ec4899; --accent-dark: #db2777; --accent-light: #f472b6; --accent-rgb: 236, 72, 153; }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: 'Inter', sans-serif; background: transparent; -webkit-font-smoothing: antialiased; }
    .title-font { font-family: 'Fraunces', serif; font-weight: 900; letter-spacing: -0.02em; line-height: 1.1; }
    h1, h2, h3, .slide-title { font-family: 'Fraunces', serif; font-weight: 900; letter-spacing: -0.02em; line-height: 1.1; }
    ::selection { background: var(--accent); color: white; }
    .slide-scroll::-webkit-scrollbar { display: none; }
    .slide-scroll { -ms-overflow-style: none; scrollbar-width: none; }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { motion, AnimatePresence } = window.Motion;
    const { useState, useEffect, useCallback, useMemo } = React;

    const getUserName = () => { const params = new URLSearchParams(window.location.search); return params.get('userName') || 'Builder'; };

    const LESSON_CONFIG = {
      id: 'poppy-disruptor-blueprint',
      title: 'Poppy\'s $2B Playbook',
      description: 'How Poppy disrupted the soda industry using narrative, celebrity association, and mere exposure psychology.',
      accentColor: '#ec4899',
      duration: '7 min',
      nextLesson: { id: 'next-lesson', title: 'The Challenger Mindset', teaser: 'More disruptor strategies for beating giants at their own game.' }
    };

    // ============ CONFIGURATION ARRAYS ============
    const THREE_PILLARS = [
      { num: '1', title: 'NARRATIVE', subtitle: 'Founder as Brand', description: 'Founder is the core part of content and brand personality. Authentic, relatable, human storytelling.', icon: 'User', color: '#ec4899' },
      { num: '2', title: 'SOCIAL PROOF', subtitle: 'Celebrity Content', description: 'High-level celebrity collaborations that generate viral social content, not static ads.', icon: 'Star', color: '#f59e0b' },
      { num: '3', title: 'MERE EXPOSURE', subtitle: 'Ubiquity Effect', description: 'Everywhere, all at once. In-store, stadiums, social media, events. Familiarity breeds preference.', icon: 'Eye', color: '#3b82f6' }
    ];

    const CONTENT_VS_ADS = [
      { title: 'Authenticity', description: 'Feels like genuine excitement, not a paycheck', icon: 'Heart', winner: 'content' },
      { title: 'Virality', description: 'Social content gets shared. Traditional ads get skipped.', icon: 'Share', winner: 'content' },
      { title: 'Cost-Effectiveness', description: 'Collaborative post costs less but reaches more engaged viewers', icon: 'DollarSign', winner: 'content' },
      { title: 'Association Depth', description: 'When celebrities CREATE with you, the bond is deeper', icon: 'Link', winner: 'content' }
    ];

    const UBIQUITY_CHANNELS = [
      { title: 'Social Media', icon: 'Smartphone', desc: 'Instagram, TikTok, Twitter saturation' },
      { title: 'Retail Stores', icon: 'Store', desc: 'Whole Foods, Target, grocery activations' },
      { title: 'Sports Stadiums', icon: 'Trophy', desc: 'NBA, NFL, MLB sponsorships' },
      { title: 'Events & Pop-ups', icon: 'Calendar', desc: 'Branded experiences and tastings' }
    ];

    // ============ ADMIN REPORTER SYSTEM ============
    let __isAdmin = false;
    window.addEventListener('message', function(e) {
      if (e.data?.type === 'ADMIN_STATUS') __isAdmin = e.data.isAdmin;
    });
    if (window.parent !== window) window.parent.postMessage({ type: 'CHECK_ADMIN_STATUS' }, '*');

    const AdminSlideReportButton = ({ slideIndex, slideType }) => {
      const handleReport = (e) => {
        e.stopPropagation(); e.preventDefault();
        if (window.parent !== window) {
          window.parent.postMessage({ type: 'ADMIN_REPORT_REQUEST', slideIndex, slideType, lessonSlug: LESSON_CONFIG.id, elementId: slideType + '-' + slideIndex }, '*');
        }
      };
      return (
        <button onClick={handleReport} title={`Report issue on Slide ${slideIndex + 1}`}
          style={{ position: 'absolute', top: '12px', right: '12px', width: '32px', height: '32px', borderRadius: '8px', backgroundColor: 'rgba(239, 68, 68, 0.9)', color: 'white', border: 'none', cursor: 'pointer', display: 'flex', alignItems: 'center', justifyContent: 'center', zIndex: 1000, opacity: 0.6, transition: 'opacity 0.2s, transform 0.2s' }}
          onMouseEnter={(e) => { e.currentTarget.style.opacity = '1'; e.currentTarget.style.transform = 'scale(1.1)'; }}
          onMouseLeave={(e) => { e.currentTarget.style.opacity = '0.6'; e.currentTarget.style.transform = 'scale(1)'; }}>
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="m8 2 1.88 1.88"/><path d="M14.12 3.88 16 2"/><path d="M9 7.13v-1a3.003 3.003 0 1 1 6 0v1"/><path d="M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6"/><path d="M12 20v-9"/></svg>
        </button>
      );
    };

    const celebrationGifs = [
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_doing_a_quick_victory_dance_move_high_energy_c_d03b798b-a518-4e6c-bcae-d69b2dd50486_2.mp4',
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_jumping_in_the_air_arms_raised_high_YESSS_cele_201477e8-3df4-405a-bc81-81d1747e5c6c_2.mp4'
    ];
    const empathyGifs = [
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_thumbs_down_with_encouraging_nod_close_keep_go_613e541f-c072-436f-aee7-f99cd6f834fc_2.mp4',
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_shaking_head_side_to_side_sadly_disappointed_e_c4a4be22-6a70-4738-8612-3039454fef37_1.mp4'
    ];
    const getRandomCelebrationGif = () => celebrationGifs[Math.floor(Math.random() * celebrationGifs.length)];
    const getRandomEmpathyGif = () => empathyGifs[Math.floor(Math.random() * empathyGifs.length)];

    // ============ ICONS ============
    const Icons = {
      Clock: () => <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>,
      Check: () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3"><polyline points="20 6 9 17 4 12"/></svg>,
      X: () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>,
      ArrowLeft: () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></svg>,
      ArrowRight: () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg>,
      Zap: () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>,
      User: () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>,
      Star: () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>,
      Eye: () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>,
      Heart: () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg>,
      Share: () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"/><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"/></svg>,
      DollarSign: () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><line x1="12" y1="1" x2="12" y2="23"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg>,
      Link: () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>,
      Smartphone: () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><rect x="5" y="2" width="14" height="20" rx="2" ry="2"/><line x1="12" y1="18" x2="12.01" y2="18"/></svg>,
      Store: () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>,
      Trophy: () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/></svg>,
      Calendar: () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>,
      TrendingUp: () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/><polyline points="17 6 23 6 23 12"/></svg>,
      Target: () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></svg>,
      Lightbulb: () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5"/><path d="M9 18h6"/><path d="M10 22h4"/></svg>,
      Building: () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><rect x="4" y="2" width="16" height="20" rx="2" ry="2"/><path d="M9 22v-4h6v4"/><path d="M8 6h.01"/><path d="M16 6h.01"/><path d="M12 6h.01"/><path d="M12 10h.01"/><path d="M12 14h.01"/><path d="M16 10h.01"/><path d="M16 14h.01"/><path d="M8 10h.01"/><path d="M8 14h.01"/></svg>,
      Rocket: () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z"/><path d="m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z"/><path d="M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0"/><path d="M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5"/></svg>,
    };

    const IconComponents = {
      User: Icons.User, Star: Icons.Star, Eye: Icons.Eye, Heart: Icons.Heart, Share: Icons.Share,
      DollarSign: Icons.DollarSign, Link: Icons.Link, Smartphone: Icons.Smartphone, Store: Icons.Store,
      Trophy: Icons.Trophy, Calendar: Icons.Calendar,
    };

    // ============ ANIMATED COUNTER ============
    const AnimatedCounter = ({ value, duration = 2000, prefix = '', suffix = '' }) => {
      const [count, setCount] = useState(0);
      const numValue = parseFloat(value.toString().replace(/[^0-9.]/g, ''));
      const decimals = value.toString().includes('.') ? (value.toString().split('.')[1] || '').length : 0;

      useEffect(() => {
        let startTime;
        const animate = (timestamp) => {
          if (!startTime) startTime = timestamp;
          const progress = Math.min((timestamp - startTime) / duration, 1);
          const easeOut = 1 - Math.pow(1 - progress, 3);
          setCount(numValue * easeOut);
          if (progress < 1) requestAnimationFrame(animate);
        };
        requestAnimationFrame(animate);
      }, [numValue, duration]);

      return <span>{prefix}{decimals > 0 ? count.toFixed(decimals) : Math.round(count)}{suffix}</span>;
    };

    // ============ SLIDES DATA ============
    const slides = [
      { type: 'welcome', learningGoals: ['The 3 pillars Poppy used to disrupt Coca-Cola and Pepsi', 'How founder-led narrative creates authentic brand personality', 'Why celebrity CONTENT beats traditional celebrity ads', 'How mere exposure creates ubiquitous brand presence'] },
      { type: 'hook', headline: 'How do you disrupt a $200B industry?', subtext: 'You do not have billion-dollar ad budgets. You do not have their distribution. But you have something they do not: modern psychology, authentic narrative, and cost-effective social virality. Poppy went from zero to $2B+ valuation by doing everything traditional brands do, but with more personality and superior cost-effectiveness.', brandImage: 'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/Pepsi_2023.svg', brandName: 'Pepsi' },
      { type: 'traditional-vs-modern' },
      { type: 'three-pillars' },
      { type: 'pillar-narrative' },
      { type: 'narrative-example' },
      { type: 'pillar-social-proof' },
      { type: 'content-vs-ads' },
      { type: 'pillar-mere-exposure' },
      { type: 'ubiquity-channels' },
      { type: 'your-playbook' },
      { type: 'cost-comparison' },
      { type: 'impact-stats' },
      { type: 'elite-insight' },
      { type: 'quiz', question: 'What is the core difference between traditional celebrity endorsements and Poppy\'s celebrity strategy?', options: ['Poppy pays celebrities less money', 'Poppy creates collaborative CONTENT with celebrities, not static ads', 'Poppy uses more celebrities than traditional brands', 'Poppy only works with A-list celebrities'], correctIndex: 1, feedback: { correct: 'Exactly right! The core difference is collaborative CONTENT versus static endorsements. When Post Malone creates content WITH Poppy, it feels authentic and generates viral social engagement.', incorrect: 'Not quite. The answer is creating collaborative CONTENT with celebrities, not static ads. Poppy partnered with celebrities to CREATE together - collaborative flavors, social content, behind-the-scenes videos.' }},
      { type: 'completion' }
    ];

    // ============ WELCOME SLIDE ============
    const WelcomeSlide = ({ data, onStart, userName, onShowGif, onHideGif }) => {
      const welcomeData = useMemo(() => getTimeBasedWelcome(), []);
      const gifSide = useMemo(() => Math.random() > 0.5 ? 'left' : 'right', []);
      useEffect(() => { onShowGif(welcomeData.gif, '65%', gifSide); return () => onHideGif(); }, [welcomeData.gif, gifSide, onShowGif, onHideGif]);

      return (
        <div className="h-full w-full relative overflow-hidden">
          <div className="h-full flex flex-col items-center justify-center text-center px-6 py-4 relative z-20">
            <motion.h1 initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className="title-font text-3xl sm:text-4xl md:text-5xl lg:text-6xl text-black mb-2 md:mb-3">{LESSON_CONFIG.title}</motion.h1>
            <motion.p initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.1 }} className="text-neutral-600 text-base md:text-lg mb-2 max-w-lg leading-relaxed" dangerouslySetInnerHTML={{ __html: formatGreeting(welcomeData.greeting, `<span class="font-bold text-neutral-900">${userName}</span>`) }} />
            <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.15 }} className="flex items-center justify-center gap-1.5 text-neutral-400 text-xs mb-3"><Icons.Clock /><span>{LESSON_CONFIG.duration}</span></motion.div>
            <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.2 }} className="bg-neutral-900 rounded-xl p-4 mb-4 max-w-sm w-full mx-auto">
              <p className="text-neutral-500 text-[10px] uppercase tracking-wider mb-2">In this lesson</p>
              <ul className="space-y-1.5">
                {data.learningGoals.map((goal, i) => (
                  <motion.li key={i} initial={{ opacity: 0, x: -10 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.25 + i * 0.05 }} className="flex items-start gap-2 text-left">
                    <span className="w-5 h-5 rounded-md flex items-center justify-center text-[9px] font-bold text-white flex-shrink-0 mt-0.5" style={{ background: 'linear-gradient(135deg, #ec4899, #db2777)' }}>{i + 1}</span>
                    <span className="text-neutral-300 text-[11px] leading-snug">{goal}</span>
                  </motion.li>
                ))}
              </ul>
            </motion.div>
            <motion.button initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.45 }} onClick={onStart} whileHover={{ scale: 1.02 }} whileTap={{ scale: 0.98 }} className="px-6 py-2.5 rounded-xl text-white font-semibold text-sm" style={{ background: 'linear-gradient(135deg, #ec4899, #db2777)' }}>Let's Go</motion.button>
          </div>
        </div>
      );
    };

    // ============ HOOK SLIDE ============
    const HookSlide = ({ data }) => (
      <div className="h-full relative overflow-hidden">
        <div className="h-full flex flex-col justify-center px-6 md:px-16 max-w-3xl mx-auto slide-scroll overflow-y-auto py-8 relative z-10">
          <motion.div initial={{ opacity: 0, y: 40 }} animate={{ opacity: 1, y: 0 }} className="mb-4">
            <span className="inline-block px-3 py-1 rounded-full text-xs font-semibold mb-3" style={{ background: 'rgba(236, 72, 153, 0.1)', color: '#ec4899' }}>The Hook</span>
            <h2 className="slide-title text-2xl md:text-4xl lg:text-5xl text-black leading-tight">{data.headline}</h2>
          </motion.div>
          <motion.p initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.15 }} className="text-base md:text-lg text-neutral-600 leading-relaxed">{data.subtext}</motion.p>
        </div>
        {data.brandImage && (
          <motion.div initial={{ opacity: 0, x: 30 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.3 }}
            className="absolute bottom-0 right-0 z-0 pointer-events-none hidden md:block" style={{ height: '25%', maxHeight: '150px', marginRight: '60px', marginBottom: '5%' }}>
            <img src={data.brandImage} alt={data.brandName || ''} className="h-full w-auto object-contain" />
          </motion.div>
        )}
      </div>
    );

    // ============ TRADITIONAL VS MODERN SLIDE ============
    const TraditionalVsModernSlide = () => (
      <div className="h-full flex flex-col justify-center px-6 md:px-12 max-w-5xl mx-auto py-8">
        <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className="text-center mb-6">
          <h2 className="slide-title text-2xl md:text-3xl text-black">The Playbook Shift</h2>
        </motion.div>

        <div className="grid md:grid-cols-2 gap-6">
          <motion.div initial={{ opacity: 0, x: -30 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.2 }}
            className="rounded-2xl p-6" style={{ background: 'linear-gradient(135deg, #1a1a1a, #2d2d2d)' }}>
            <div className="h-1 w-full mb-4 rounded-full" style={{ background: 'linear-gradient(90deg, transparent, #94a3b8, transparent)' }} />
            <div className="flex items-center gap-2 mb-4">
              <div className="px-2 py-1 rounded-full bg-neutral-700 text-neutral-400 text-xs font-semibold">TRADITIONAL</div>
              <Icons.Building />
            </div>
            <h3 className="text-white font-bold text-lg mb-4">The Old Way</h3>
            <ul className="space-y-3">
              {['Billions on TV ads', 'Celebrities hold product and smile', 'Stadium logos everywhere', 'Decades of momentum required'].map((item, i) => (
                <motion.li key={i} initial={{ opacity: 0, x: -10 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.3 + i * 0.08 }}
                  className="flex items-center gap-3 text-neutral-400 text-sm">
                  <span className="w-5 h-5 rounded-full bg-neutral-700 flex items-center justify-center text-neutral-500 text-xs">{i + 1}</span>
                  {item}
                </motion.li>
              ))}
            </ul>
            <div className="mt-4 pt-4 border-t border-neutral-700">
              <div className="text-neutral-500 text-xs">Required Capital</div>
              <div className="text-neutral-400 text-xl font-bold">$1B+</div>
            </div>
          </motion.div>

          <motion.div initial={{ opacity: 0, x: 30 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.3 }}
            className="rounded-2xl p-6 relative" style={{ background: 'linear-gradient(135deg, #ec4899, #db2777)', boxShadow: '0 0 40px rgba(236, 72, 153, 0.3)' }}>
            <div className="h-1 w-full mb-4 rounded-full" style={{ background: 'linear-gradient(90deg, transparent, rgba(255,255,255,0.5), transparent)' }} />
            <div className="absolute top-4 right-4 px-2 py-1 rounded-full bg-white/20 text-white text-xs font-bold">WINS</div>
            <div className="flex items-center gap-2 mb-4">
              <div className="px-2 py-1 rounded-full bg-white/20 text-white text-xs font-semibold">MODERN</div>
              <Icons.Rocket />
            </div>
            <h3 className="text-white font-bold text-lg mb-4">The Poppy Way</h3>
            <ul className="space-y-3">
              {['Founder-led content', 'Celebrities CREATE together', 'Social virality at scale', 'Psychology-driven growth'].map((item, i) => (
                <motion.li key={i} initial={{ opacity: 0, x: 10 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.4 + i * 0.08 }}
                  className="flex items-center gap-3 text-white text-sm font-medium">
                  <span className="w-5 h-5 rounded-full bg-white/20 flex items-center justify-center text-white text-xs">{i + 1}</span>
                  {item}
                </motion.li>
              ))}
            </ul>
            <div className="mt-4 pt-4 border-t border-white/20">
              <div className="text-white/70 text-xs">Valuation Achieved</div>
              <div className="text-white text-xl font-bold">$2B+</div>
            </div>
          </motion.div>
        </div>
      </div>
    );

    // ============ THREE PILLARS SLIDE ============
    const ThreePillarsSlide = () => {
      const [activePillar, setActivePillar] = useState(0);

      useEffect(() => {
        const interval = setInterval(() => {
          setActivePillar(prev => (prev + 1) % THREE_PILLARS.length);
        }, 2500);
        return () => clearInterval(interval);
      }, []);

      return (
        <div className="h-full flex flex-col justify-center px-6 md:px-12 max-w-4xl mx-auto py-8">
          <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className="text-center mb-6">
            <span className="inline-block px-3 py-1 rounded-full text-xs font-semibold mb-3" style={{ background: 'rgba(236, 72, 153, 0.1)', color: '#ec4899' }}>The Framework</span>
            <h2 className="slide-title text-2xl md:text-3xl text-black">The 3 Pillars of Modern Disruption</h2>
          </motion.div>

          <div className="grid md:grid-cols-3 gap-4 mb-6">
            {THREE_PILLARS.map((pillar, i) => {
              const IconComp = IconComponents[pillar.icon] || Icons.Target;
              const isActive = i === activePillar;
              return (
                <motion.div key={i} initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0, scale: isActive ? 1.03 : 1 }} transition={{ delay: i * 0.1 }}
                  onClick={() => setActivePillar(i)}
                  className="rounded-xl p-5 cursor-pointer transition-all relative overflow-hidden"
                  style={{
                    background: isActive ? `linear-gradient(135deg, ${pillar.color}, ${pillar.color}dd)` : 'linear-gradient(135deg, #1a1a1a, #2d2d2d)',
                    boxShadow: isActive ? `0 0 30px ${pillar.color}40` : 'none'
                  }}>
                  <div className="h-1 w-full mb-4 rounded-full" style={{ background: `linear-gradient(90deg, transparent, ${pillar.color}, transparent)` }} />
                  <div className="flex items-center gap-3 mb-3">
                    <div className="w-10 h-10 rounded-xl flex items-center justify-center" style={{ background: isActive ? 'rgba(255,255,255,0.2)' : `${pillar.color}20` }}>
                      <span style={{ color: isActive ? 'white' : pillar.color }}><IconComp /></span>
                    </div>
                    <div className="text-2xl font-bold" style={{ color: isActive ? 'white' : pillar.color }}>{pillar.num}</div>
                  </div>
                  <h3 className="font-bold text-white text-sm mb-1">{pillar.title}</h3>
                  <div className="text-xs mb-2" style={{ color: isActive ? 'rgba(255,255,255,0.7)' : '#9ca3af' }}>{pillar.subtitle}</div>
                  <p className="text-xs leading-relaxed" style={{ color: isActive ? 'rgba(255,255,255,0.8)' : '#9ca3af' }}>{pillar.description}</p>
                  {isActive && (
                    <motion.div initial={{ width: 0 }} animate={{ width: '100%' }} transition={{ duration: 2.5 }}
                      className="absolute bottom-0 left-0 h-1" style={{ background: 'rgba(255,255,255,0.5)' }} />
                  )}
                </motion.div>
              );
            })}
          </div>
        </div>
      );
    };

    // ============ PILLAR NARRATIVE SLIDE ============
    const PillarNarrativeSlide = () => (
      <div className="h-full flex flex-col justify-center px-6 md:px-12 max-w-4xl mx-auto py-8">
        <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className="text-center mb-6">
          <span className="inline-block px-3 py-1 rounded-full text-xs font-semibold mb-3" style={{ background: 'rgba(236, 72, 153, 0.1)', color: '#ec4899' }}>Pillar 1</span>
          <h2 className="slide-title text-2xl md:text-3xl text-black">NARRATIVE: The Founder as Brand Personality</h2>
        </motion.div>

        <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.2 }}
          className="rounded-2xl p-6" style={{ background: 'linear-gradient(135deg, #1a1a1a, #2d2d2d)' }}>
          <div className="h-1 w-full mb-4 rounded-full" style={{ background: 'linear-gradient(90deg, transparent, #ec4899, transparent)' }} />
          <div className="flex items-center gap-4 mb-4">
            <div className="w-14 h-14 rounded-full flex items-center justify-center" style={{ background: 'linear-gradient(135deg, #ec4899, #db2777)' }}>
              <Icons.User />
            </div>
            <div>
              <h3 className="text-white font-bold text-lg">Humans Connect With Humans</h3>
              <p className="text-neutral-400 text-sm">Not logos. Not corporations.</p>
            </div>
          </div>
          <p className="text-neutral-300 text-sm leading-relaxed mb-4">
            Most beverage brands hide their founders. Faceless corporations. Poppy put their founder front and center in content, storytelling, and brand messaging.
          </p>
          <div className="grid grid-cols-3 gap-3">
            {['The "Why" Story', 'The Struggles', 'The Mission'].map((item, i) => (
              <div key={i} className="bg-neutral-800/50 rounded-lg p-3 text-center">
                <div className="text-xs font-medium" style={{ color: '#ec4899' }}>{item}</div>
              </div>
            ))}
          </div>
        </motion.div>

        <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.4 }}
          className="mt-4 rounded-xl p-4 text-center" style={{ background: 'rgba(236, 72, 153, 0.1)' }}>
          <div className="flex items-center justify-center gap-2 text-sm" style={{ color: '#ec4899' }}>
            <Icons.Lightbulb />
            <span className="font-medium">People buy from people they feel connected to</span>
          </div>
        </motion.div>
      </div>
    );

    // ============ NARRATIVE EXAMPLE SLIDE ============
    const NarrativeExampleSlide = () => (
      <div className="h-full flex flex-col justify-center px-6 md:px-12 max-w-4xl mx-auto py-8">
        <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} className="text-center mb-6">
          <span className="inline-block px-3 py-1 rounded-full text-xs font-semibold mb-2" style={{ background: 'rgba(236, 72, 153, 0.1)', color: '#ec4899' }}>Real Example</span>
          <h2 className="slide-title text-xl md:text-2xl text-black">Founder-Led Narrative in Action</h2>
        </motion.div>

        <div className="grid md:grid-cols-2 gap-4 mb-6">
          <motion.div initial={{ opacity: 0, x: -20 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.1 }}
            className="rounded-xl p-5 border-2 border-red-200 bg-red-50">
            <div className="flex items-center gap-2 mb-3">
              <div className="w-6 h-6 rounded-full bg-red-500 flex items-center justify-center text-white"><Icons.X /></div>
              <span className="font-semibold text-red-700 text-sm">Traditional Brand (Faceless)</span>
            </div>
            <p className="text-neutral-700 text-sm leading-relaxed">Corporate ad shows product on screen. Voice-over talks about "refreshment." No human connection. No story. Just product features. Forgettable.</p>
          </motion.div>

          <motion.div initial={{ opacity: 0, x: 20 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.2 }}
            className="rounded-xl p-5 border-2 border-green-200 bg-green-50">
            <div className="flex items-center gap-2 mb-3">
              <div className="w-6 h-6 rounded-full bg-green-500 flex items-center justify-center text-white"><Icons.Check /></div>
              <span className="font-semibold text-green-700 text-sm">Poppy (Founder-Led)</span>
            </div>
            <p className="text-neutral-700 text-sm leading-relaxed">Founder on camera explains why they created a healthier soda. Shares personal health journey. Vulnerable. Authentic. Viewers feel like they KNOW the founder.</p>
          </motion.div>
        </div>

        <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.3 }}
          className="rounded-xl p-4" style={{ background: 'linear-gradient(135deg, #1a1a1a, #2d2d2d)' }}>
          <div className="flex items-center justify-center gap-2 text-amber-400 text-sm">
            <Icons.Zap />
            <span>Narrative creates emotional investment. Emotional investment creates loyalty.</span>
          </div>
        </motion.div>
      </div>
    );

    // ============ PILLAR SOCIAL PROOF SLIDE ============
    const PillarSocialProofSlide = () => (
      <div className="h-full flex flex-col justify-center px-6 md:px-12 max-w-4xl mx-auto py-8">
        <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className="text-center mb-6">
          <span className="inline-block px-3 py-1 rounded-full text-xs font-semibold mb-3" style={{ background: 'rgba(245, 158, 11, 0.1)', color: '#f59e0b' }}>Pillar 2</span>
          <h2 className="slide-title text-2xl md:text-3xl text-black">SOCIAL PROOF: Celebrity CONTENT, Not Ads</h2>
        </motion.div>

        <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.2 }}
          className="rounded-2xl p-6" style={{ background: 'linear-gradient(135deg, #1a1a1a, #2d2d2d)' }}>
          <div className="h-1 w-full mb-4 rounded-full" style={{ background: 'linear-gradient(90deg, transparent, #f59e0b, transparent)' }} />
          <div className="flex items-center gap-4 mb-4">
            <div className="w-14 h-14 rounded-full flex items-center justify-center" style={{ background: 'linear-gradient(135deg, #f59e0b, #d97706)' }}>
              <Icons.Star />
            </div>
            <div>
              <h3 className="text-white font-bold text-lg">Create Together, Not Endorse</h3>
              <p className="text-neutral-400 text-sm">Post Malone, Paris Hilton collaborations</p>
            </div>
          </div>
          <p className="text-neutral-300 text-sm leading-relaxed mb-4">
            Traditional brands pay celebrities to hold their product and say scripted lines. Poppy partnered with celebrities to create CONTENT together - social posts, behind-the-scenes videos, collaborative flavors.
          </p>
          <div className="bg-neutral-800/50 rounded-lg p-4">
            <div className="text-xs text-neutral-500 uppercase tracking-wider mb-2">The Result</div>
            <div className="text-white font-bold">Millions of impressions at a fraction of traditional endorsement costs</div>
          </div>
        </motion.div>
      </div>
    );

    // ============ CONTENT VS ADS SLIDE ============
    const ContentVsAdsSlide = () => (
      <div className="h-full flex flex-col justify-center px-6 md:px-12 max-w-4xl mx-auto py-8">
        <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className="text-center mb-6">
          <h2 className="slide-title text-2xl md:text-3xl text-black">Why Celebrity CONTENT Beats Celebrity ADS</h2>
        </motion.div>

        <div className="grid grid-cols-2 gap-4">
          {CONTENT_VS_ADS.map((item, i) => {
            const IconComp = IconComponents[item.icon] || Icons.Check;
            return (
              <motion.div key={i} initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.1 + i * 0.1 }}
                className="rounded-xl p-5" style={{ background: 'linear-gradient(135deg, #1a1a1a, #2d2d2d)' }}>
                <div className="h-1 w-full mb-3 rounded-full" style={{ background: 'linear-gradient(90deg, transparent, #10b981, transparent)' }} />
                <div className="flex items-center gap-3 mb-2">
                  <div className="w-8 h-8 rounded-lg flex items-center justify-center" style={{ background: 'rgba(16, 185, 129, 0.2)' }}>
                    <span style={{ color: '#10b981' }}><IconComp /></span>
                  </div>
                  <span className="font-bold text-white text-sm">{item.title}</span>
                </div>
                <p className="text-neutral-400 text-xs leading-relaxed">{item.description}</p>
              </motion.div>
            );
          })}
        </div>
      </div>
    );

    // ============ PILLAR MERE EXPOSURE SLIDE ============
    const PillarMereExposureSlide = () => (
      <div className="h-full flex flex-col justify-center px-6 md:px-12 max-w-4xl mx-auto py-8">
        <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className="text-center mb-6">
          <span className="inline-block px-3 py-1 rounded-full text-xs font-semibold mb-3" style={{ background: 'rgba(59, 130, 246, 0.1)', color: '#3b82f6' }}>Pillar 3</span>
          <h2 className="slide-title text-2xl md:text-3xl text-black">MERE EXPOSURE: Ubiquity Creates Preference</h2>
        </motion.div>

        <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.2 }}
          className="rounded-2xl p-6" style={{ background: 'linear-gradient(135deg, #1a1a1a, #2d2d2d)' }}>
          <div className="h-1 w-full mb-4 rounded-full" style={{ background: 'linear-gradient(90deg, transparent, #3b82f6, transparent)' }} />
          <div className="flex items-center gap-4 mb-4">
            <div className="w-14 h-14 rounded-full flex items-center justify-center" style={{ background: 'linear-gradient(135deg, #3b82f6, #2563eb)' }}>
              <Icons.Eye />
            </div>
            <div>
              <h3 className="text-white font-bold text-lg">Everywhere, All At Once</h3>
              <p className="text-neutral-400 text-sm">The psychology of familiarity</p>
            </div>
          </div>
          <p className="text-neutral-300 text-sm leading-relaxed mb-4">
            The more people SEE your brand, the more familiar it becomes. Familiarity reduces perceived risk and increases preference. When you see Poppy at the game, in the store, on Instagram, and at an event - your brain registers: "This is everywhere. This must be legit."
          </p>
          <div className="grid grid-cols-2 gap-3">
            <div className="bg-neutral-800/50 rounded-lg p-3 text-center">
              <div className="text-2xl font-bold" style={{ color: '#3b82f6' }}>More Exposure</div>
              <div className="text-xs text-neutral-500">= More Familiarity</div>
            </div>
            <div className="bg-neutral-800/50 rounded-lg p-3 text-center">
              <div className="text-2xl font-bold" style={{ color: '#3b82f6' }}>More Familiarity</div>
              <div className="text-xs text-neutral-500">= More Preference</div>
            </div>
          </div>
        </motion.div>
      </div>
    );

    // ============ UBIQUITY CHANNELS SLIDE ============
    const UbiquityChannelsSlide = () => {
      const [activeChannel, setActiveChannel] = useState(0);

      useEffect(() => {
        const interval = setInterval(() => {
          setActiveChannel(prev => (prev + 1) % UBIQUITY_CHANNELS.length);
        }, 2000);
        return () => clearInterval(interval);
      }, []);

      return (
        <div className="h-full flex flex-col justify-center px-6 md:px-12 max-w-4xl mx-auto py-8">
          <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className="text-center mb-6">
            <h2 className="slide-title text-2xl md:text-3xl text-black">The Ubiquity Effect</h2>
          </motion.div>

          <div className="grid grid-cols-4 gap-3 mb-6">
            {UBIQUITY_CHANNELS.map((channel, i) => {
              const IconComp = IconComponents[channel.icon] || Icons.Eye;
              const isActive = i === activeChannel;
              return (
                <motion.div key={i} onClick={() => setActiveChannel(i)}
                  animate={{ scale: isActive ? 1.05 : 1 }}
                  className="rounded-xl p-4 text-center cursor-pointer transition-all"
                  style={{
                    background: isActive ? 'linear-gradient(135deg, #3b82f6, #2563eb)' : 'linear-gradient(135deg, #1a1a1a, #2d2d2d)',
                    boxShadow: isActive ? '0 0 20px rgba(59, 130, 246, 0.3)' : 'none'
                  }}>
                  <div className="w-10 h-10 rounded-lg mx-auto mb-2 flex items-center justify-center"
                    style={{ background: isActive ? 'rgba(255,255,255,0.2)' : 'rgba(59, 130, 246, 0.2)' }}>
                    <span style={{ color: isActive ? 'white' : '#3b82f6' }}><IconComp /></span>
                  </div>
                  <div className="text-xs font-medium" style={{ color: isActive ? 'white' : '#9ca3af' }}>{channel.title}</div>
                </motion.div>
              );
            })}
          </div>

          <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.3 }}
            className="rounded-2xl p-6 text-center" style={{ background: 'linear-gradient(135deg, #1a1a1a, #2d2d2d)' }}>
            <div className="h-1 w-full mb-4 rounded-full" style={{ background: 'linear-gradient(90deg, transparent, #3b82f6, transparent)' }} />
            <AnimatePresence mode="wait">
              <motion.div key={activeChannel} initial={{ opacity: 0, y: 10 }} animate={{ opacity: 1, y: 0 }} exit={{ opacity: 0, y: -10 }}>
                <h3 className="text-white font-bold text-xl mb-2">{UBIQUITY_CHANNELS[activeChannel].title}</h3>
                <p className="text-neutral-400 text-sm">{UBIQUITY_CHANNELS[activeChannel].desc}</p>
              </motion.div>
            </AnimatePresence>
          </motion.div>
        </div>
      );
    };

    // ============ YOUR PLAYBOOK SLIDE ============
    const YourPlaybookSlide = () => (
      <div className="h-full flex flex-col justify-center px-6 md:px-12 max-w-4xl mx-auto py-8">
        <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className="text-center mb-6">
          <span className="inline-block px-3 py-1 rounded-full text-xs font-semibold mb-3" style={{ background: 'rgba(236, 72, 153, 0.1)', color: '#ec4899' }}>Your Action Plan</span>
          <h2 className="slide-title text-2xl md:text-3xl text-black">Applying the Poppy Playbook</h2>
        </motion.div>

        <div className="space-y-4">
          {[
            { step: '1', title: 'Build Your Narrative', desc: 'Put your founder story front and center. Share the "why," the struggle, the mission.', color: '#ec4899' },
            { step: '2', title: 'Create Content, Not Ads', desc: 'Partner with influencers to create collaborative CONTENT - posts, videos, collabs.', color: '#f59e0b' },
            { step: '3', title: 'Pursue Ubiquity', desc: 'Be everywhere your audience is, all at once. Create momentum and legitimacy.', color: '#3b82f6' }
          ].map((item, i) => (
            <motion.div key={i} initial={{ opacity: 0, x: -20 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.2 + i * 0.15 }}
              className="rounded-xl p-5 flex items-start gap-4" style={{ background: 'linear-gradient(135deg, #1a1a1a, #2d2d2d)' }}>
              <div className="h-1 absolute top-0 left-0 w-full rounded-full" style={{ background: `linear-gradient(90deg, transparent, ${item.color}, transparent)` }} />
              <div className="w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0 text-white font-bold text-lg"
                style={{ background: `linear-gradient(135deg, ${item.color}, ${item.color}cc)` }}>
                {item.step}
              </div>
              <div>
                <h3 className="text-white font-bold text-base mb-1">{item.title}</h3>
                <p className="text-neutral-400 text-sm">{item.desc}</p>
              </div>
            </motion.div>
          ))}
        </div>
      </div>
    );

    // ============ COST COMPARISON SLIDE ============
    const CostComparisonSlide = () => (
      <div className="h-full flex flex-col justify-center px-6 md:px-12 max-w-4xl mx-auto py-8">
        <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className="text-center mb-6">
          <h2 className="slide-title text-2xl md:text-3xl text-black">The Cost-Effectiveness Reality</h2>
        </motion.div>

        <div className="grid md:grid-cols-2 gap-6">
          <motion.div initial={{ opacity: 0, x: -20 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.2 }}
            className="rounded-2xl p-6" style={{ background: 'linear-gradient(135deg, #1a1a1a, #2d2d2d)' }}>
            <div className="h-1 w-full mb-4 rounded-full" style={{ background: 'linear-gradient(90deg, transparent, #94a3b8, transparent)' }} />
            <h3 className="text-neutral-400 font-bold uppercase text-sm tracking-wider mb-4">Traditional</h3>
            <ul className="space-y-3">
              {[{ item: 'TV Commercial', cost: '$5M+' }, { item: 'Celebrity Endorsement', cost: '$1M+' }, { item: 'Stadium Sponsorship', cost: '$10M+' }].map((row, i) => (
                <li key={i} className="flex justify-between text-sm">
                  <span className="text-neutral-400">{row.item}</span>
                  <span className="text-neutral-300 font-bold">{row.cost}</span>
                </li>
              ))}
            </ul>
          </motion.div>

          <motion.div initial={{ opacity: 0, x: 20 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.3 }}
            className="rounded-2xl p-6 relative" style={{ background: 'linear-gradient(135deg, #ec4899, #db2777)', boxShadow: '0 0 30px rgba(236, 72, 153, 0.3)' }}>
            <div className="h-1 w-full mb-4 rounded-full" style={{ background: 'linear-gradient(90deg, transparent, rgba(255,255,255,0.5), transparent)' }} />
            <div className="absolute top-4 right-4 px-2 py-1 rounded-full bg-white/20 text-white text-xs font-bold">BETTER</div>
            <h3 className="text-white/80 font-bold uppercase text-sm tracking-wider mb-4">Modern (Poppy)</h3>
            <ul className="space-y-3">
              {[{ item: 'Founder-Led Content', cost: '$0 (time)' }, { item: 'Influencer Collab', cost: '$10K-$100K' }, { item: 'Social Virality', cost: 'Fraction of ads' }].map((row, i) => (
                <li key={i} className="flex justify-between text-sm">
                  <span className="text-white/80">{row.item}</span>
                  <span className="text-white font-bold">{row.cost}</span>
                </li>
              ))}
            </ul>
          </motion.div>
        </div>
      </div>
    );

    // ============ IMPACT STATS SLIDE ============
    const ImpactStatsSlide = () => (
      <div className="h-full flex flex-col justify-center px-6 md:px-12 max-w-4xl mx-auto py-8">
        <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className="text-center mb-8">
          <span className="inline-block px-3 py-1 rounded-full text-xs font-semibold mb-3" style={{ background: 'rgba(236, 72, 153, 0.1)', color: '#ec4899' }}>Impact</span>
          <h2 className="slide-title text-2xl md:text-3xl text-black">The Poppy Results</h2>
        </motion.div>

        <div className="grid md:grid-cols-3 gap-4">
          {[
            { value: 2, prefix: '$', suffix: 'B+', label: 'Valuation', subtext: 'In record time' },
            { value: 90, suffix: '%', label: 'Cost Reduction', subtext: 'vs traditional marketing' },
            { value: 10, suffix: 'x', label: 'Social Engagement', subtext: 'vs paid endorsements' }
          ].map((stat, i) => (
            <motion.div key={i} initial={{ opacity: 0, y: 30 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.2 + i * 0.15 }}
              className="rounded-2xl p-6 text-center" style={{ background: 'linear-gradient(135deg, #1a1a1a, #2d2d2d)' }}>
              <div className="h-1 w-full mb-4 rounded-full" style={{ background: 'linear-gradient(90deg, transparent, #ec4899, transparent)' }} />
              <div className="text-4xl md:text-5xl font-bold mb-2" style={{ color: '#ec4899' }}>
                <AnimatedCounter value={stat.value} prefix={stat.prefix || ''} suffix={stat.suffix} />
              </div>
              <div className="text-white font-semibold mb-1">{stat.label}</div>
              <div className="text-neutral-500 text-sm">{stat.subtext}</div>
            </motion.div>
          ))}
        </div>
      </div>
    );

    // ============ ELITE INSIGHT SLIDE ============
    const EliteInsightSlide = () => (
      <div className="h-full flex flex-col justify-center px-6 md:px-12 max-w-3xl mx-auto py-8">
        <motion.div initial={{ opacity: 0, y: 30 }} animate={{ opacity: 1, y: 0 }}
          className="rounded-2xl p-8 text-center relative overflow-hidden" style={{ background: 'linear-gradient(135deg, #1a1a1a, #2d2d2d)' }}>
          <div className="h-1 w-full absolute top-0 left-0 rounded-full" style={{ background: 'linear-gradient(90deg, transparent, #ec4899, transparent)' }} />

          <motion.div initial={{ scale: 0 }} animate={{ scale: 1 }} transition={{ delay: 0.2, type: 'spring' }}
            className="w-16 h-16 rounded-2xl mx-auto mb-6 flex items-center justify-center" style={{ background: 'linear-gradient(135deg, #ec4899, #db2777)', boxShadow: '0 0 30px rgba(236, 72, 153, 0.4)' }}>
            <Icons.Rocket />
          </motion.div>

          <motion.h3 initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.3 }}
            className="text-2xl md:text-3xl font-bold text-white mb-4">The Disruptor Paradox</motion.h3>

          <motion.p initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.4 }}
            className="text-neutral-300 text-base md:text-lg leading-relaxed mb-6">
            The brands with the <span className="text-white font-semibold">smallest budgets</span> can achieve the <span className="font-semibold" style={{ color: '#ec4899' }}>biggest impact</span> - if they use psychology instead of dollars.
            Narrative. Association. Ubiquity. Same outcomes as billion-dollar brands.
          </motion.p>

          <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.5 }}
            className="inline-flex items-center gap-2 px-4 py-2 rounded-full" style={{ background: 'rgba(236, 72, 153, 0.2)' }}>
            <Icons.Lightbulb />
            <span className="text-sm font-medium" style={{ color: '#ec4899' }}>Psychology beats capital. Always.</span>
          </motion.div>
        </motion.div>
      </div>
    );

    // ============ QUIZ SLIDE ============
    const QuizSlide = ({ data, onShowGif, onHideGif }) => {
      const [selected, setSelected] = useState(null);
      const [showFeedback, setShowFeedback] = useState(false);
      const celebrationGif = useMemo(() => getRandomCelebrationGif(), []);
      const empathyGif = useMemo(() => getRandomEmpathyGif(), []);
      const gifSide = useMemo(() => Math.random() > 0.5 ? 'left' : 'right', []);
      const handleSelect = (index) => { if (showFeedback) return; setSelected(index); setShowFeedback(true); };
      const isCorrect = selected === data.correctIndex;

      useEffect(() => { if (showFeedback) { if (isCorrect) { onShowGif(celebrationGif, '60%', gifSide); } else { onShowGif(empathyGif, '60%', gifSide); } } }, [showFeedback, isCorrect, celebrationGif, empathyGif, gifSide, onShowGif]);
      useEffect(() => { return () => onHideGif(); }, [onHideGif]);

      return (
        <div className="h-full w-full relative overflow-hidden">
          <div className="h-full flex flex-col justify-center px-8 md:px-12 max-w-2xl mx-auto slide-scroll overflow-y-auto py-10 relative z-30">
            <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} className="text-center mb-6">
              <p className="text-xs uppercase tracking-wider text-neutral-400 mb-3">Quick Check</p>
              <h2 className="slide-title text-xl md:text-2xl text-black leading-tight">{data.question}</h2>
            </motion.div>
            <div className="space-y-3 mb-6">
              {data.options.map((option, i) => (
                <motion.button key={i} initial={{ opacity: 0, x: -15 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.08 + i * 0.06 }} onClick={() => handleSelect(i)} disabled={showFeedback} className={`w-full p-4 rounded-xl text-left transition-all border-2 ${showFeedback ? i === data.correctIndex ? 'border-green-500 bg-green-50' : i === selected ? 'border-red-400 bg-red-50' : 'border-neutral-200 bg-white opacity-40' : 'border-neutral-200 bg-white hover:border-neutral-300'}`}>
                  <div className="flex items-center gap-3">
                    <span className={`w-8 h-8 rounded-lg flex items-center justify-center text-sm font-bold transition-all ${showFeedback && i === data.correctIndex ? 'bg-green-500 text-white' : showFeedback && i === selected && !isCorrect ? 'bg-red-400 text-white' : 'bg-neutral-100 text-neutral-500'}`}>
                      {showFeedback && i === data.correctIndex ? <Icons.Check /> : showFeedback && i === selected && !isCorrect ? <Icons.X /> : String.fromCharCode(65 + i)}
                    </span>
                    <span className="text-neutral-700 text-sm md:text-base">{option}</span>
                  </div>
                </motion.button>
              ))}
            </div>
            <AnimatePresence>
              {showFeedback && (
                <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} className={`p-5 rounded-xl ${isCorrect ? 'bg-green-50 border border-green-200' : 'bg-amber-50 border border-amber-200'}`}>
                  <p className={`text-sm leading-relaxed ${isCorrect ? 'text-green-800' : 'text-amber-800'}`}>{isCorrect ? data.feedback.correct : data.feedback.incorrect}</p>
                </motion.div>
              )}
            </AnimatePresence>
          </div>
        </div>
      );
    };

    // ============ COMPLETION SLIDE ============
    const CompletionSlide = () => (
      <div className="h-full flex flex-col items-center justify-center text-center px-8 slide-scroll overflow-y-auto py-10">
        <motion.div initial={{ opacity: 0, scale: 0 }} animate={{ opacity: 1, scale: 1 }} transition={{ type: 'spring', duration: 0.5 }} className="w-20 h-20 rounded-xl flex items-center justify-center mb-6 text-white" style={{ background: 'linear-gradient(135deg, #ec4899, #db2777)', boxShadow: '0 6px 24px rgba(236, 72, 153, 0.35)' }}><Icons.Check /></motion.div>
        <motion.h2 initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.15 }} className="slide-title text-3xl md:text-4xl text-black mb-4">Lesson Complete</motion.h2>
        <motion.p initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.25 }} className="text-neutral-500 text-base mb-6 max-w-md leading-relaxed">You now have the 3 pillars: Narrative, Social Proof, and Mere Exposure. Apply these psychology-driven strategies to disrupt giants without their budget.</motion.p>
        <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.3 }} className="bg-amber-50 border border-amber-200 rounded-xl p-4 mb-6 max-w-md w-full">
          <p className="text-amber-800 text-sm font-medium flex items-center gap-2"><Icons.Target className="flex-shrink-0" /><span>Action: Start with founder-led content. It costs $0 except your time.</span></p>
        </motion.div>
        <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.4 }} className="bg-neutral-900 rounded-xl p-6 max-w-md w-full">
          <p className="text-neutral-500 text-xs uppercase tracking-wider mb-3">Up Next</p>
          <h3 className="text-white font-bold text-xl mb-2">{LESSON_CONFIG.nextLesson.title}</h3>
          <p className="text-neutral-400 text-sm">{LESSON_CONFIG.nextLesson.teaser}</p>
        </motion.div>
      </div>
    );

    // ============ LESSON APP ============
    const LessonApp = () => {
      const [currentSlide, setCurrentSlide] = useState(0);
      const [direction, setDirection] = useState(1);
      const userName = useMemo(() => getUserName(), []);
      const currentSlideRef = React.useRef(0);
      const [gifConfig, setGifConfig] = useState(null);
      const [isAnimating, setIsAnimating] = useState(false);

      const showGif = useCallback((url, height, side) => setGifConfig({ url, height, side }), []);
      const hideGif = useCallback(() => setGifConfig(null), []);

      React.useEffect(() => { currentSlideRef.current = currentSlide; }, [currentSlide]);

      useEffect(() => {
        window.parent.postMessage({ type: 'LESSON_SLIDE_UPDATE',
          totalSlides: slides.length, slideIndex: currentSlide, slideType: slides[currentSlide]?.type, lessonSlug: LESSON_CONFIG.id }, '*');
      }, [currentSlide]);

      const goToSlide = useCallback((newSlide) => {
        if (isAnimating || newSlide < 0 || newSlide >= slides.length) return;
        setIsAnimating(true);
        setDirection(newSlide > currentSlideRef.current ? 1 : -1);
        setCurrentSlide(newSlide);
      }, [isAnimating]);

      const nextSlide = useCallback(() => { if (currentSlideRef.current + 1 < slides.length) goToSlide(currentSlideRef.current + 1); }, [goToSlide]);
      const prevSlide = useCallback(() => { if (currentSlideRef.current - 1 >= 0) goToSlide(currentSlideRef.current - 1); }, [goToSlide]);

      useEffect(() => {
        const handleKeyDown = (e) => {
          if (e.key === 'ArrowRight' || e.key === ' ') { e.preventDefault(); nextSlide(); }
          if (e.key === 'ArrowLeft') { e.preventDefault(); prevSlide(); }
        };
        window.addEventListener('keydown', handleKeyDown);
        return () => window.removeEventListener('keydown', handleKeyDown);
      }, [nextSlide, prevSlide]);

      const slideVariants = {
        enter: (dir) => ({ x: dir > 0 ? '100%' : '-100%', opacity: 0 }),
        center: { x: 0, opacity: 1 },
        exit: (dir) => ({ x: dir > 0 ? '-100%' : '100%', opacity: 0 })
      };

      const renderSlide = (slide) => {
        switch (slide.type) {
          case 'welcome': return <WelcomeSlide data={slide} onStart={nextSlide} userName={userName} onShowGif={showGif} onHideGif={hideGif} />;
          case 'hook': return <HookSlide data={slide} />;
          case 'traditional-vs-modern': return <TraditionalVsModernSlide />;
          case 'three-pillars': return <ThreePillarsSlide />;
          case 'pillar-narrative': return <PillarNarrativeSlide />;
          case 'narrative-example': return <NarrativeExampleSlide />;
          case 'pillar-social-proof': return <PillarSocialProofSlide />;
          case 'content-vs-ads': return <ContentVsAdsSlide />;
          case 'pillar-mere-exposure': return <PillarMereExposureSlide />;
          case 'ubiquity-channels': return <UbiquityChannelsSlide />;
          case 'your-playbook': return <YourPlaybookSlide />;
          case 'cost-comparison': return <CostComparisonSlide />;
          case 'impact-stats': return <ImpactStatsSlide />;
          case 'elite-insight': return <EliteInsightSlide />;
          case 'quiz': return <QuizSlide data={slide} onShowGif={showGif} onHideGif={hideGif} />;
          case 'completion': return <CompletionSlide />;
          default: return null;
        }
      };

      const showPrev = currentSlide > 0;
      const showNext = currentSlide < slides.length - 1 && slides[currentSlide].type !== 'welcome';

      return (
        <div className="w-full h-screen bg-white flex flex-col relative">
          <div className="flex-1 relative overflow-hidden z-20">
            <AnimatePresence mode="wait" custom={direction} onExitComplete={() => setIsAnimating(false)}>
              <motion.div key={currentSlide} custom={direction} variants={slideVariants} initial="enter" animate="center" exit="exit" transition={{ duration: 0.3, ease: [0.25, 0.1, 0.25, 1] }} className="absolute inset-0">
                {renderSlide(slides[currentSlide])}
                <AdminSlideReportButton slideIndex={currentSlide} slideType={slides[currentSlide].type} />
              </motion.div>
            </AnimatePresence>
            {showPrev && <button onClick={prevSlide} className="absolute left-5 top-1/2 -translate-y-1/2 w-12 h-12 rounded-full bg-neutral-100 hover:bg-neutral-200 flex items-center justify-center text-neutral-500 hover:text-neutral-700 transition-all z-10"><Icons.ArrowLeft /></button>}
            {showNext && <button onClick={nextSlide} className="absolute right-5 top-1/2 -translate-y-1/2 w-12 h-12 rounded-full bg-neutral-100 hover:bg-neutral-200 flex items-center justify-center text-neutral-500 hover:text-neutral-700 transition-all z-10"><Icons.ArrowRight /></button>}
          </div>
          <div className="px-6 md:px-8 py-5 border-t border-neutral-100 flex-shrink-0 relative z-10">
            <div className="flex items-center justify-center gap-2.5">
              {slides.map((_, i) => <button key={i} onClick={() => goToSlide(i)} className="w-2.5 h-2.5 rounded-full transition-all duration-300" style={{ background: i === currentSlide ? '#ec4899' : '#d4d4d4', transform: i === currentSlide ? 'scale(1.3)' : 'scale(1)' }} />)}
            </div>
          </div>
          <AnimatePresence>
            {gifConfig && (
              <motion.div initial={{ opacity: 0, y: 30 }} animate={{ opacity: 1, y: 0 }} exit={{ opacity: 0, y: 30 }} transition={{ type: 'spring', stiffness: 100 }} className={`absolute ${gifConfig.side === 'left' ? 'left-4 md:left-8' : 'right-4 md:right-8'} bottom-0 pointer-events-none`} style={{ zIndex: 15, height: gifConfig.height }}>
                <video autoPlay loop muted playsInline className="h-full w-auto object-contain object-bottom" style={{ background: 'transparent' }}>
                  <source src={gifConfig.url} type="video/mp4" />
                </video>
              </motion.div>
            )}
          </AnimatePresence>
        </div>
      );
    };

    ReactDOM.render(<LessonApp />, document.getElementById('root'));
  </script>
</body>
</html>
