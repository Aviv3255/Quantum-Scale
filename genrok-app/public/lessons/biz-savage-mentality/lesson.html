<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>The Savage Mentality | Quantum Scale</title>
  <script src="https://cdn.tailwindcss.com" defer></script>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" defer></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" defer></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js" defer></script>
  <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js" defer></script>
  <script src="../shared/greetings.js" defer></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fraunces:wght@400;500;600;700;800;900&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root { --accent: #EF4444; --accent-dark: #db3030; --accent-light: #ff5858; --accent-rgb: 239, 68, 68; }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: 'Inter', sans-serif; background: transparent; -webkit-font-smoothing: antialiased; }
    .title-font { font-family: 'Fraunces', serif; font-weight: 900; letter-spacing: -0.02em; line-height: 1.1; }
    h1, h2, h3, .slide-title { font-family: 'Fraunces', serif; font-weight: 900; letter-spacing: -0.02em; line-height: 1.1; }
    ::selection { background: var(--accent); color: white; }
    .slide-scroll::-webkit-scrollbar { display: none; }
    .slide-scroll { -ms-overflow-style: none; scrollbar-width: none; }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { motion, AnimatePresence } = window.Motion;
    const { useState, useEffect, useCallback, useMemo } = React;

    const getUserName = () => { const params = new URLSearchParams(window.location.search); return params.get('userName') || 'Builder'; };
    const getInitialSlide = () => { const params = new URLSearchParams(window.location.search); const slide = params.get('slide'); return slide ? parseInt(slide, 10) : 0; };

    const LESSON_CONFIG = {
      id: 'biz-savage-mentality',
      title: 'The Savage Mentality',
      description: 'The mindset that separates elite entrepreneurs from everyone else',
      accentColor: '#EF4444',
      duration: '7 min',
      nextLesson: { id: 'biz-high-margin-fortress', title: 'The High Margin Fortress', teaser: 'Why selling cheap is a death sentence for eCommerce.' }
    };

    const celebrationGifs = [
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_doing_a_quick_victory_dance_move_high_energy_c_d03b798b-a518-4e6c-bcae-d69b2dd50486_2.mp4',
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_jumping_in_the_air_arms_raised_high_YESSS_cele_201477e8-3df4-405a-bc81-81d1747e5c6c_2.mp4',
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_playing_air_guitar_light_headbanging_rockstar__0702007e-9e84-4d9e-8f99-8ee23d0b65f8_2.mp4'
    ];
    const getRandomCelebrationGif = () => celebrationGifs[Math.floor(Math.random() * celebrationGifs.length)];

    const empathyGifs = [
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_thumbs_down_with_encouraging_nod_close_keep_go_613e541f-c072-436f-aee7-f99cd6f834fc_2.mp4',
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_shaking_head_side_to_side_sadly_disappointed_e_c4a4be22-6a70-4738-8612-3039454fef37_1.mp4',
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_covering_face_with_palm_facepalm_gesture_disap_211b0566-078f-4d42-9c41-547b14f5827c_0.mp4'
    ];
    const getRandomEmpathyGif = () => empathyGifs[Math.floor(Math.random() * empathyGifs.length)];

    const slides = [
      { type: 'welcome', learningGoals: ['The "Cope" trap that kills progress', 'How elite entrepreneurs respond to adversity', 'The brutal grind stories behind billion-dollar brands'] },
      { type: 'hook', headline: 'Most entrepreneurs cope with failure. Elite entrepreneurs get pissed off and take action.', subtext: 'The algorithm changed. Tariffs hit. Ads stopped working. Most people blame external forces. They cope. They complain. They make excuses. Elite entrepreneurs don\'t cope. They take massive, immediate action. This mindset difference separates winners from wishers.' },
      { type: 'cope-vs-action', title: 'Cope vs Action: The Split', copeResponse: { label: 'THE COPE RESPONSE', items: ['Blame the algorithm', 'Complain about tariffs', 'Say the market is saturated', 'Wait for conditions to improve', 'Make excuses'], icon: 'MessageCircle' }, actionResponse: { label: 'THE ACTION RESPONSE', items: ['F*** that, make 10 new creatives', 'Test different products immediately', 'Launch new campaigns today', 'Adapt strategy in real-time', 'Refuse to be a victim'], icon: 'Zap' } },
      { type: 'cope-examples', title: 'What "Cope" Sounds Like', examples: [
        { quote: 'The algorithm hates me.', reality: 'Your creative sucks. The algorithm is neutral.' },
        { quote: 'Tariffs destroyed my margins.', reality: 'You chose low-margin products. Pivot or die.' },
        { quote: 'The market is too saturated now.', reality: 'Winners adapt. Losers complain about competition.' },
        { quote: 'Facebook ads don\'t work anymore.', reality: 'They work for people who test 50 creatives.' }
      ] },
      { type: 'savage-response', title: 'The Savage Response', quote: 'They\'re like "f*** that" and they just start doing more creatives or they make better creatives...', source: 'From The E-commerce Cheat Code', responses: [
        { trigger: 'Slow sales day', action: 'Launch 5 new ad variations immediately', result: 'Find the winning angle' },
        { trigger: 'Ad account shut down', action: 'Spin up backup accounts, test new platforms', result: 'Diversified traffic sources' },
        { trigger: 'Product margins squeezed', action: 'Test premium positioning or find new suppliers', result: 'Better margins or better product' }
      ] },
      { type: 'grind-stories', title: 'The Grind Is The Price of Entry', stories: [
        { name: 'Ben Francis', brand: 'Gymshark', worth: '$1.3B valuation', grind: 'University classes during the day. Pizza Hut delivery driver at night. Built a fitness empire from a garage with zero sleep and maximum hustle.', color: '#3B82F6', image: 'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/channels4_profile__2_-removebg-preview.png' },
        { name: 'Christian Guzman', brand: 'Alphalete', worth: '$10M+ brand', grind: 'Opened a 1,500 sq ft gym. Failed in 10 months. Slept on a futon. Ate ramen. Refused to quit. Now runs a premium activewear empire.', color: '#8B5CF6', image: 'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/image.webp' },
        { name: 'Hudson Leogrande', brand: 'Comfrt', worth: '$500M/year', grind: 'Homeless at 16. Living in a drug dealer\'s studio apartment. Started selling hoodies. Now runs a $500M/year blanket empire. Zero excuses.', color: '#F59E0B', image: 'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/584271bU03giJ3-removebg-preview.png' }
      ] },
      { type: 'success-formula', title: 'Success Is Forged In Failure', body: 'Every billion-dollar brand started in a garage, a dorm room, or a shitty apartment. The founders weren\'t special. They didn\'t have advantages. They had problems. They had setbacks. They had every reason to quit.', highlight: 'Success isn\'t a fantasy. It\'s forged in failure.', stats: [
        { value: '90%', label: 'of startups fail', color: '#EF4444' },
        { value: '10%', label: 'refuse to quit', color: '#10B981' },
        { value: '1%', label: 'become legends', color: '#F59E0B' }
      ] },
      { type: 'mindset-audit', title: 'Your Mindset Audit', scenarios: [
        { situation: 'Your best product gets banned on Facebook Ads.', cope: 'Give up on paid ads entirely', action: 'Test Google, TikTok, Pinterest same day' },
        { situation: 'A competitor undercuts your price by 40%.', cope: 'Lower your price to compete', action: 'Double down on premium positioning' },
        { situation: 'Your sales drop 50% overnight.', cope: 'Panic and wait for them to recover', action: 'Launch 20 new creatives and test 3 new offers' }
      ] },
      { type: 'action-protocol', title: 'The Action Protocol', checklist: [
        { action: 'When sales slow, launch 10 new creatives within 24 hours', category: 'Ads', icon: 'Target' },
        { action: 'When margins compress, test premium positioning immediately', category: 'Pricing', icon: 'DollarSign' },
        { action: 'When traffic sources fail, activate 2 backup platforms', category: 'Traffic', icon: 'TrendingUp' },
        { action: 'When competitors attack, improve your offer and double down', category: 'Competition', icon: 'Shield' },
        { action: 'When self-doubt creeps in, remember: you control the effort', category: 'Mindset', icon: 'Brain' }
      ] },
      { type: 'quiz', question: 'What is the elite entrepreneur response to a slow sales day?', options: ['Blame the algorithm and wait for it to improve', 'Lower prices to compete with cheaper competitors', 'Get pissed off and launch 10 new creatives immediately', 'Take a break and hope sales recover naturally'], correctIndex: 2, feedback: { correct: 'Exactly. Elite entrepreneurs refuse to be victims. They don\'t cope. They don\'t wait. They take massive, immediate action. Slow day? F*** that. Launch 10 new creatives. Test new angles. Find what works. This is the savage mentality that separates winners from wishers.', incorrect: 'Not quite. Elite entrepreneurs don\'t cope or wait for external conditions to improve. They get pissed off and take massive action. Slow day = personal challenge. Launch 10 new creatives immediately. Test new angles. Adapt in real-time. Action over cope, always.' }},
      { type: 'mindset-shift', title: 'The Savage Truth', insight: 'You will face setbacks. Algorithms will change. Competitors will attack. Customers will leave. The market will shift. These are facts. What separates winners from wishers is simple: Winners take action. Losers cope. Every single time you face adversity, you have a choice. Cope or act. Choose action. Always.' },
      { type: 'completion', sources: ['Alex Hormozi - $100M Offers', 'Gymshark Founder Story', 'Comfrt Founder Story', 'Alphalete Founder Story'] }
    ];

    // Icons
    const Icons = {
      Clock: () => <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>,
      Check: () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3"><polyline points="20 6 9 17 4 12"/></svg>,
      X: () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>,
      ArrowLeft: () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></svg>,
      ArrowRight: () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg>,
      Zap: () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>,
      MessageCircle: () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"/></svg>,
      Target: () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></svg>,
      DollarSign: () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><line x1="12" y1="1" x2="12" y2="23"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg>,
      TrendingUp: () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/><polyline points="17 6 23 6 23 12"/></svg>,
      Shield: () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>,
      Brain: () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 4.44-1.04z"/><path d="M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24A2.5 2.5 0 0 0 14.5 2z"/></svg>,
      AlertTriangle: () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>,
      ArrowRightCircle: () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><circle cx="12" cy="12" r="10"/><polyline points="12 16 16 12 12 8"/><line x1="8" y1="12" x2="16" y2="12"/></svg>,
      Trophy: () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/></svg>,
      Lightbulb: () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5"/><path d="M9 18h6"/><path d="M10 22h4"/></svg>,
      Flame: () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"/></svg>,
    };

    // AnimatedCounter Component
    const AnimatedCounter = ({ value, suffix = '', duration = 2000 }) => {
      const [count, setCount] = useState(0);
      useEffect(() => {
        let start = 0;
        const end = parseInt(value);
        if (isNaN(end)) { setCount(value); return; }
        const increment = end / (duration / 16);
        const timer = setInterval(() => {
          start += increment;
          if (start >= end) { setCount(end); clearInterval(timer); }
          else { setCount(Math.floor(start)); }
        }, 16);
        return () => clearInterval(timer);
      }, [value, duration]);
      return <span>{count}{suffix}</span>;
    };

    // ============ WELCOME SLIDE ============
    const WelcomeSlide = ({ data, onStart, userName, onShowGif, onHideGif }) => {
      const welcomeData = useMemo(() => getTimeBasedWelcome(), []);
      const gifSide = useMemo(() => Math.random() > 0.5 ? 'left' : 'right', []);
      useEffect(() => { onShowGif(welcomeData.gif, '65%', gifSide); return () => onHideGif(); }, [welcomeData.gif, gifSide, onShowGif, onHideGif]);

      return (
        <div className="h-full w-full relative overflow-hidden">
          <div className="h-full flex flex-col items-center justify-center text-center px-6 py-4 relative z-20">
            <motion.h1 initial={{ opacity: 0, y: 40 }} animate={{ opacity: 1, y: 0 }} className="title-font text-3xl sm:text-4xl md:text-5xl lg:text-6xl text-black mb-2 md:mb-3">{LESSON_CONFIG.title}</motion.h1>
            <motion.p initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.1 }} className="text-neutral-600 text-base md:text-lg lg:text-xl mb-2 md:mb-3 max-w-lg leading-relaxed" dangerouslySetInnerHTML={{ __html: formatGreeting(welcomeData.greeting, `<span class="font-bold text-neutral-900">${userName}</span>`) }} />
            <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.15 }} className="flex items-center justify-center gap-1.5 text-neutral-400 text-[10px] md:text-xs mb-2 md:mb-3"><Icons.Clock /><span>{LESSON_CONFIG.duration}</span></motion.div>
            <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.2 }} className="bg-neutral-900 rounded-xl md:rounded-2xl p-3 md:p-5 mb-3 md:mb-4 max-w-sm w-full mx-auto">
              <p className="text-neutral-500 text-[9px] md:text-[11px] uppercase tracking-wider mb-2 md:mb-3">In this lesson</p>
              <ul className="space-y-1.5 md:space-y-2">
                {data.learningGoals.map((goal, i) => (
                  <motion.li key={i} initial={{ opacity: 0, x: -10 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.25 + i * 0.05 }} className="flex items-start gap-2 text-left">
                    <span className="w-5 h-5 rounded-md flex items-center justify-center text-[9px] font-bold text-white flex-shrink-0 mt-0.5" style={{ background: `linear-gradient(135deg, var(--accent), var(--accent-dark))` }}>{i + 1}</span>
                    <span className="text-neutral-300 text-[11px] md:text-sm leading-snug">{goal}</span>
                  </motion.li>
                ))}
              </ul>
            </motion.div>
            <motion.button initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.45 }} onClick={onStart} whileHover={{ scale: 1.02 }} whileTap={{ scale: 0.98 }} className="px-6 md:px-7 py-2.5 md:py-3 rounded-xl text-white font-semibold text-sm md:text-base" style={{ background: `linear-gradient(135deg, var(--accent), var(--accent-dark))` }}>Let's Go</motion.button>
          </div>
        </div>
      );
    };

    // ============ HOOK SLIDE ============
    const HookSlide = ({ data }) => (
      <div className="h-full relative overflow-hidden">
        <div className="h-full flex flex-col justify-center px-6 md:px-16 max-w-3xl mx-auto slide-scroll overflow-y-auto py-8 md:py-10 relative z-10">
          <motion.div initial={{ opacity: 0, y: 40 }} animate={{ opacity: 1, y: 0 }} className="mb-4 md:mb-6">
            <span className="inline-block px-3 py-1 rounded-full text-xs font-semibold mb-3 md:mb-4" style={{ background: `rgba(var(--accent-rgb), 0.1)`, color: 'var(--accent)' }}>The Hook</span>
            <h2 className="slide-title text-2xl md:text-4xl lg:text-5xl text-black leading-tight">{data.headline}</h2>
          </motion.div>
          <motion.p initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.15 }} className="text-base md:text-xl text-neutral-600 leading-relaxed">{data.subtext}</motion.p>
        </div>
      </div>
    );

    // ============ COPE VS ACTION SLIDE ============
    const CopeVsActionSlide = ({ data }) => {
      const [activeIndex, setActiveIndex] = useState(0);

      useEffect(() => {
        const timer = setInterval(() => {
          setActiveIndex(prev => (prev + 1) % data.copeResponse.items.length);
        }, 2000);
        return () => clearInterval(timer);
      }, [data.copeResponse.items.length]);

      return (
        <div className="h-full flex flex-col justify-center px-6 md:px-12 max-w-5xl mx-auto slide-scroll overflow-y-auto py-8">
          <motion.h2 initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className="slide-title text-2xl md:text-3xl text-black text-center mb-8">{data.title}</motion.h2>

          <div className="grid md:grid-cols-2 gap-6">
            {/* Cope Side */}
            <motion.div initial={{ opacity: 0, x: -30 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.1 }}
              style={{ background: 'linear-gradient(135deg, #374151, #1f2937)', borderRadius: '16px', padding: '24px', position: 'relative', overflow: 'hidden' }}>
              <div style={{ position: 'absolute', top: 0, left: 0, right: 0, height: '3px', background: 'linear-gradient(90deg, transparent, #6B7280, transparent)' }} />
              <div style={{ display: 'flex', alignItems: 'center', gap: '12px', marginBottom: '20px' }}>
                <div style={{ width: '40px', height: '40px', borderRadius: '10px', background: 'rgba(107, 114, 128, 0.3)', display: 'flex', alignItems: 'center', justifyContent: 'center', color: '#9CA3AF' }}>
                  <Icons.MessageCircle />
                </div>
                <span style={{ color: '#9CA3AF', fontSize: '12px', fontWeight: '700', letterSpacing: '0.05em' }}>{data.copeResponse.label}</span>
              </div>
              <div style={{ display: 'flex', flexDirection: 'column', gap: '10px' }}>
                {data.copeResponse.items.map((item, i) => (
                  <motion.div key={i} initial={{ opacity: 0, x: -20 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.2 + i * 0.08 }}
                    style={{
                      background: activeIndex === i ? 'rgba(107, 114, 128, 0.2)' : 'rgba(107, 114, 128, 0.1)',
                      borderRadius: '10px',
                      padding: '12px 16px',
                      display: 'flex',
                      alignItems: 'center',
                      gap: '12px',
                      border: activeIndex === i ? '1px solid rgba(107, 114, 128, 0.4)' : '1px solid transparent',
                      transition: 'all 0.3s ease'
                    }}>
                    <div style={{ width: '6px', height: '6px', borderRadius: '50%', background: '#6B7280' }} />
                    <span style={{ color: '#D1D5DB', fontSize: '14px' }}>{item}</span>
                  </motion.div>
                ))}
              </div>
              <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} transition={{ delay: 0.8 }}
                style={{ marginTop: '16px', textAlign: 'center', color: '#6B7280', fontSize: '11px', fontWeight: '600', letterSpacing: '0.1em' }}>
                VICTIM MINDSET
              </motion.div>
            </motion.div>

            {/* Action Side */}
            <motion.div initial={{ opacity: 0, x: 30 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.15 }}
              style={{ background: 'linear-gradient(135deg, #1a1a1a, #2d2d2d)', borderRadius: '16px', padding: '24px', position: 'relative', overflow: 'hidden' }}>
              <div style={{ position: 'absolute', top: 0, left: 0, right: 0, height: '3px', background: 'linear-gradient(90deg, transparent, #EF4444, transparent)' }} />
              <div style={{ display: 'flex', alignItems: 'center', gap: '12px', marginBottom: '20px' }}>
                <div style={{ width: '40px', height: '40px', borderRadius: '10px', background: 'rgba(239, 68, 68, 0.2)', display: 'flex', alignItems: 'center', justifyContent: 'center', color: '#EF4444' }}>
                  <Icons.Zap />
                </div>
                <span style={{ color: '#EF4444', fontSize: '12px', fontWeight: '700', letterSpacing: '0.05em' }}>{data.actionResponse.label}</span>
              </div>
              <div style={{ display: 'flex', flexDirection: 'column', gap: '10px' }}>
                {data.actionResponse.items.map((item, i) => (
                  <motion.div key={i} initial={{ opacity: 0, x: 20 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.25 + i * 0.08 }}
                    style={{
                      background: activeIndex === i ? 'rgba(239, 68, 68, 0.15)' : 'rgba(239, 68, 68, 0.05)',
                      borderRadius: '10px',
                      padding: '12px 16px',
                      display: 'flex',
                      alignItems: 'center',
                      gap: '12px',
                      border: activeIndex === i ? '1px solid rgba(239, 68, 68, 0.4)' : '1px solid transparent',
                      transition: 'all 0.3s ease'
                    }}>
                    <div style={{ color: '#10B981' }}><Icons.Check /></div>
                    <span style={{ color: '#FAFAFA', fontSize: '14px', fontWeight: '500' }}>{item}</span>
                  </motion.div>
                ))}
              </div>
              <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} transition={{ delay: 0.8 }}
                style={{ marginTop: '16px', textAlign: 'center', color: '#EF4444', fontSize: '11px', fontWeight: '600', letterSpacing: '0.1em' }}>
                SAVAGE MINDSET
              </motion.div>
            </motion.div>
          </div>
        </div>
      );
    };

    // ============ COPE EXAMPLES SLIDE ============
    const CopeExamplesSlide = ({ data }) => {
      const [activeCard, setActiveCard] = useState(0);

      useEffect(() => {
        const timer = setInterval(() => {
          setActiveCard(prev => (prev + 1) % data.examples.length);
        }, 3000);
        return () => clearInterval(timer);
      }, [data.examples.length]);

      return (
        <div className="h-full flex flex-col justify-center px-6 md:px-12 max-w-4xl mx-auto slide-scroll overflow-y-auto py-8">
          <motion.h2 initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className="slide-title text-2xl md:text-3xl text-black text-center mb-8">{data.title}</motion.h2>

          <div style={{ display: 'grid', gridTemplateColumns: 'repeat(2, 1fr)', gap: '16px' }}>
            {data.examples.map((example, i) => (
              <motion.div key={i} initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.1 + i * 0.1 }}
                style={{
                  background: activeCard === i ? 'linear-gradient(135deg, #1a1a1a, #2d2d2d)' : 'linear-gradient(135deg, #374151, #1f2937)',
                  borderRadius: '16px',
                  padding: '20px',
                  position: 'relative',
                  overflow: 'hidden',
                  cursor: 'pointer',
                  transition: 'all 0.3s ease',
                  border: activeCard === i ? '1px solid rgba(239, 68, 68, 0.3)' : '1px solid transparent'
                }}
                onClick={() => setActiveCard(i)}>
                <div style={{ position: 'absolute', top: 0, left: 0, right: 0, height: '3px', background: activeCard === i ? 'linear-gradient(90deg, transparent, #EF4444, transparent)' : 'linear-gradient(90deg, transparent, #6B7280, transparent)' }} />

                {/* Quote */}
                <div style={{ marginBottom: '16px' }}>
                  <div style={{ color: '#6B7280', fontSize: '11px', fontWeight: '600', letterSpacing: '0.05em', marginBottom: '8px' }}>COPE</div>
                  <p style={{ color: '#9CA3AF', fontSize: '14px', fontStyle: 'italic' }}>"{example.quote}"</p>
                </div>

                {/* Reality */}
                <motion.div initial={{ opacity: 0 }} animate={{ opacity: activeCard === i ? 1 : 0.6 }} transition={{ duration: 0.3 }}
                  style={{ background: 'rgba(239, 68, 68, 0.1)', borderRadius: '10px', padding: '12px' }}>
                  <div style={{ color: '#EF4444', fontSize: '11px', fontWeight: '600', letterSpacing: '0.05em', marginBottom: '6px' }}>REALITY</div>
                  <p style={{ color: '#FAFAFA', fontSize: '13px', fontWeight: '500' }}>{example.reality}</p>
                </motion.div>
              </motion.div>
            ))}
          </div>
        </div>
      );
    };

    // ============ SAVAGE RESPONSE SLIDE ============
    const SavageResponseSlide = ({ data }) => {
      const [activeResponse, setActiveResponse] = useState(0);

      useEffect(() => {
        const timer = setInterval(() => {
          setActiveResponse(prev => (prev + 1) % data.responses.length);
        }, 3500);
        return () => clearInterval(timer);
      }, [data.responses.length]);

      return (
        <div className="h-full flex flex-col justify-center px-6 md:px-12 max-w-4xl mx-auto slide-scroll overflow-y-auto py-8">
          <motion.h2 initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className="slide-title text-2xl md:text-3xl text-black text-center mb-4">{data.title}</motion.h2>

          {/* Quote */}
          <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.1 }}
            style={{ background: 'linear-gradient(135deg, #1a1a1a, #2d2d2d)', borderRadius: '12px', padding: '16px 20px', marginBottom: '24px', textAlign: 'center' }}>
            <p style={{ color: '#FAFAFA', fontSize: '15px', fontStyle: 'italic' }}>"{data.quote}"</p>
            <p style={{ color: '#6B7280', fontSize: '12px', marginTop: '8px' }}>{data.source}</p>
          </motion.div>

          {/* Response Flow */}
          <div style={{ display: 'flex', flexDirection: 'column', gap: '16px' }}>
            {data.responses.map((response, i) => (
              <motion.div key={i} initial={{ opacity: 0, x: -20 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.2 + i * 0.15 }}
                style={{
                  background: activeResponse === i ? 'linear-gradient(135deg, #1a1a1a, #2d2d2d)' : 'white',
                  borderRadius: '14px',
                  padding: '16px 20px',
                  border: activeResponse === i ? '1px solid rgba(239, 68, 68, 0.3)' : '1px solid #e5e7eb',
                  transition: 'all 0.3s ease',
                  position: 'relative',
                  overflow: 'hidden'
                }}>
                {activeResponse === i && <div style={{ position: 'absolute', top: 0, left: 0, right: 0, height: '3px', background: 'linear-gradient(90deg, transparent, #EF4444, transparent)' }} />}

                <div style={{ display: 'grid', gridTemplateColumns: '1fr auto 1fr auto 1fr', alignItems: 'center', gap: '12px' }}>
                  {/* Trigger */}
                  <div style={{ textAlign: 'center' }}>
                    <div style={{ color: activeResponse === i ? '#EF4444' : '#EF4444', fontSize: '10px', fontWeight: '700', letterSpacing: '0.05em', marginBottom: '4px' }}>TRIGGER</div>
                    <p style={{ color: activeResponse === i ? '#FAFAFA' : '#374151', fontSize: '13px', fontWeight: '500' }}>{response.trigger}</p>
                  </div>

                  <div style={{ color: activeResponse === i ? '#EF4444' : '#9CA3AF' }}><Icons.ArrowRightCircle /></div>

                  {/* Action */}
                  <div style={{ textAlign: 'center', background: activeResponse === i ? 'rgba(239, 68, 68, 0.1)' : 'rgba(239, 68, 68, 0.05)', borderRadius: '8px', padding: '8px' }}>
                    <div style={{ color: '#EF4444', fontSize: '10px', fontWeight: '700', letterSpacing: '0.05em', marginBottom: '4px' }}>ACTION</div>
                    <p style={{ color: activeResponse === i ? '#FAFAFA' : '#374151', fontSize: '13px', fontWeight: '600' }}>{response.action}</p>
                  </div>

                  <div style={{ color: activeResponse === i ? '#10B981' : '#9CA3AF' }}><Icons.ArrowRightCircle /></div>

                  {/* Result */}
                  <div style={{ textAlign: 'center' }}>
                    <div style={{ color: '#10B981', fontSize: '10px', fontWeight: '700', letterSpacing: '0.05em', marginBottom: '4px' }}>RESULT</div>
                    <p style={{ color: activeResponse === i ? '#10B981' : '#10B981', fontSize: '13px', fontWeight: '500' }}>{response.result}</p>
                  </div>
                </div>
              </motion.div>
            ))}
          </div>
        </div>
      );
    };

    // ============ GRIND STORIES SLIDE ============
    const GrindStoriesSlide = ({ data }) => {
      const [activeStory, setActiveStory] = useState(0);

      useEffect(() => {
        const timer = setInterval(() => {
          setActiveStory(prev => (prev + 1) % data.stories.length);
        }, 4000);
        return () => clearInterval(timer);
      }, [data.stories.length]);

      return (
        <div className="h-full flex flex-col justify-center px-6 md:px-12 max-w-4xl mx-auto slide-scroll overflow-y-auto py-8">
          <motion.h2 initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className="slide-title text-2xl md:text-3xl text-black text-center mb-6">{data.title}</motion.h2>

          <div style={{ display: 'grid', gridTemplateColumns: 'repeat(3, 1fr)', gap: '16px' }}>
            {data.stories.map((story, i) => (
              <motion.div key={i} initial={{ opacity: 0, y: 30 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.1 + i * 0.15 }}
                onClick={() => setActiveStory(i)}
                style={{
                  background: 'linear-gradient(135deg, #1a1a1a, #2d2d2d)',
                  borderRadius: '16px',
                  padding: '20px',
                  position: 'relative',
                  overflow: 'hidden',
                  cursor: 'pointer',
                  border: activeStory === i ? `1px solid ${story.color}40` : '1px solid transparent',
                  transition: 'all 0.3s ease',
                  transform: activeStory === i ? 'scale(1.02)' : 'scale(1)'
                }}>
                <div style={{ position: 'absolute', top: 0, left: 0, right: 0, height: '3px', background: `linear-gradient(90deg, transparent, ${story.color}, transparent)` }} />

                {/* Image */}
                <div style={{ display: 'flex', justifyContent: 'center', marginBottom: '12px' }}>
                  <div style={{ width: '64px', height: '64px', borderRadius: '50%', overflow: 'hidden', border: `3px solid ${story.color}`, boxShadow: `0 0 20px ${story.color}30` }}>
                    <img src={story.image} alt={story.name} style={{ width: '100%', height: '100%', objectFit: 'cover' }} />
                  </div>
                </div>

                {/* Name & Brand */}
                <div style={{ textAlign: 'center', marginBottom: '12px' }}>
                  <h3 style={{ color: '#FAFAFA', fontSize: '16px', fontWeight: '700', fontFamily: 'Fraunces, serif' }}>{story.name}</h3>
                  <p style={{ color: story.color, fontSize: '12px', fontWeight: '600' }}>{story.brand}</p>
                  <p style={{ color: '#6B7280', fontSize: '11px', marginTop: '4px' }}>{story.worth}</p>
                </div>

                {/* Grind Story */}
                <motion.p initial={{ opacity: 0 }} animate={{ opacity: activeStory === i ? 1 : 0.7 }}
                  style={{ color: '#D1D5DB', fontSize: '12px', lineHeight: '1.6', textAlign: 'center' }}>
                  {story.grind}
                </motion.p>
              </motion.div>
            ))}
          </div>
        </div>
      );
    };

    // ============ SUCCESS FORMULA SLIDE ============
    const SuccessFormulaSlide = ({ data }) => (
      <div className="h-full flex flex-col justify-center px-6 md:px-12 max-w-4xl mx-auto slide-scroll overflow-y-auto py-8">
        <motion.h2 initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className="slide-title text-2xl md:text-3xl text-black text-center mb-6">{data.title}</motion.h2>

        {/* Body Text */}
        <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.1 }}
          style={{ background: 'linear-gradient(135deg, #1a1a1a, #2d2d2d)', borderRadius: '16px', padding: '24px', marginBottom: '24px', position: 'relative', overflow: 'hidden' }}>
          <div style={{ position: 'absolute', top: 0, left: 0, right: 0, height: '3px', background: 'linear-gradient(90deg, transparent, #EF4444, transparent)' }} />
          <p style={{ color: '#D1D5DB', fontSize: '15px', lineHeight: '1.8', marginBottom: '20px' }}>{data.body}</p>
          <div style={{ background: 'rgba(239, 68, 68, 0.1)', borderRadius: '10px', padding: '16px', textAlign: 'center' }}>
            <Icons.Flame />
            <p style={{ color: '#FAFAFA', fontSize: '18px', fontWeight: '700', fontFamily: 'Fraunces, serif', marginTop: '8px' }}>{data.highlight}</p>
          </div>
        </motion.div>

        {/* Stats */}
        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(3, 1fr)', gap: '16px' }}>
          {data.stats.map((stat, i) => (
            <motion.div key={i} initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.3 + i * 0.1 }}
              style={{ background: 'white', borderRadius: '12px', padding: '20px', textAlign: 'center', border: `2px solid ${stat.color}20` }}>
              <div style={{ fontSize: '32px', fontWeight: '800', color: stat.color, fontFamily: 'Fraunces, serif' }}>
                <AnimatedCounter value={parseInt(stat.value)} suffix="%" />
              </div>
              <p style={{ color: '#374151', fontSize: '13px', marginTop: '4px' }}>{stat.label}</p>
            </motion.div>
          ))}
        </div>
      </div>
    );

    // ============ MINDSET AUDIT SLIDE ============
    const MindsetAuditSlide = ({ data }) => {
      const [activeScenario, setActiveScenario] = useState(0);

      useEffect(() => {
        const timer = setInterval(() => {
          setActiveScenario(prev => (prev + 1) % data.scenarios.length);
        }, 4000);
        return () => clearInterval(timer);
      }, [data.scenarios.length]);

      return (
        <div className="h-full flex flex-col justify-center px-6 md:px-12 max-w-4xl mx-auto slide-scroll overflow-y-auto py-8">
          <motion.h2 initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className="slide-title text-2xl md:text-3xl text-black text-center mb-6">{data.title}</motion.h2>

          <div style={{ display: 'flex', flexDirection: 'column', gap: '16px' }}>
            {data.scenarios.map((scenario, i) => (
              <motion.div key={i} initial={{ opacity: 0, x: -20 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.1 + i * 0.1 }}
                onClick={() => setActiveScenario(i)}
                style={{
                  background: activeScenario === i ? 'linear-gradient(135deg, #1a1a1a, #2d2d2d)' : 'white',
                  borderRadius: '14px',
                  padding: '20px',
                  border: activeScenario === i ? '1px solid rgba(239, 68, 68, 0.3)' : '1px solid #e5e7eb',
                  cursor: 'pointer',
                  transition: 'all 0.3s ease',
                  position: 'relative',
                  overflow: 'hidden'
                }}>
                {activeScenario === i && <div style={{ position: 'absolute', top: 0, left: 0, right: 0, height: '3px', background: 'linear-gradient(90deg, transparent, #EF4444, transparent)' }} />}

                {/* Situation */}
                <div style={{ display: 'flex', alignItems: 'center', gap: '12px', marginBottom: '16px' }}>
                  <div style={{ width: '32px', height: '32px', borderRadius: '8px', background: 'rgba(239, 68, 68, 0.1)', display: 'flex', alignItems: 'center', justifyContent: 'center', color: '#EF4444' }}>
                    <Icons.AlertTriangle />
                  </div>
                  <p style={{ color: activeScenario === i ? '#FAFAFA' : '#374151', fontSize: '14px', fontWeight: '600' }}>{scenario.situation}</p>
                </div>

                {/* Cope vs Action */}
                <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '12px' }}>
                  <div style={{ background: activeScenario === i ? 'rgba(107, 114, 128, 0.2)' : 'rgba(107, 114, 128, 0.1)', borderRadius: '10px', padding: '12px' }}>
                    <div style={{ display: 'flex', alignItems: 'center', gap: '8px', marginBottom: '6px' }}>
                      <Icons.X />
                      <span style={{ color: '#6B7280', fontSize: '10px', fontWeight: '700', letterSpacing: '0.05em' }}>COPE</span>
                    </div>
                    <p style={{ color: activeScenario === i ? '#9CA3AF' : '#6B7280', fontSize: '12px' }}>{scenario.cope}</p>
                  </div>
                  <div style={{ background: activeScenario === i ? 'rgba(16, 185, 129, 0.15)' : 'rgba(16, 185, 129, 0.1)', borderRadius: '10px', padding: '12px' }}>
                    <div style={{ display: 'flex', alignItems: 'center', gap: '8px', marginBottom: '6px' }}>
                      <Icons.Check />
                      <span style={{ color: '#10B981', fontSize: '10px', fontWeight: '700', letterSpacing: '0.05em' }}>ACTION</span>
                    </div>
                    <p style={{ color: activeScenario === i ? '#10B981' : '#059669', fontSize: '12px', fontWeight: '500' }}>{scenario.action}</p>
                  </div>
                </div>
              </motion.div>
            ))}
          </div>
        </div>
      );
    };

    // ============ ACTION PROTOCOL SLIDE ============
    const ActionProtocolSlide = ({ data }) => (
      <div className="h-full flex flex-col justify-center px-6 md:px-12 max-w-3xl mx-auto slide-scroll overflow-y-auto py-8">
        <motion.h2 initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className="slide-title text-2xl md:text-3xl text-black text-center mb-6">{data.title}</motion.h2>

        <div style={{ display: 'flex', flexDirection: 'column', gap: '12px' }}>
          {data.checklist.map((item, i) => (
            <motion.div key={i} initial={{ opacity: 0, x: -20 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.1 + i * 0.08 }}
              style={{
                background: 'linear-gradient(135deg, #1a1a1a, #2d2d2d)',
                borderRadius: '12px',
                padding: '16px 20px',
                display: 'flex',
                alignItems: 'center',
                gap: '16px',
                position: 'relative',
                overflow: 'hidden'
              }}>
              <div style={{ position: 'absolute', top: 0, left: 0, right: 0, height: '2px', background: 'linear-gradient(90deg, transparent, #EF4444, transparent)' }} />

              <div style={{ width: '36px', height: '36px', borderRadius: '10px', background: 'rgba(239, 68, 68, 0.15)', display: 'flex', alignItems: 'center', justifyContent: 'center', color: '#EF4444', flexShrink: 0 }}>
                {Icons[item.icon] ? React.createElement(Icons[item.icon]) : <Icons.Zap />}
              </div>

              <div style={{ flex: 1 }}>
                <p style={{ color: '#FAFAFA', fontSize: '14px', fontWeight: '500' }}>{item.action}</p>
              </div>

              <div style={{ background: 'rgba(239, 68, 68, 0.1)', borderRadius: '6px', padding: '4px 10px' }}>
                <span style={{ color: '#EF4444', fontSize: '10px', fontWeight: '700', letterSpacing: '0.05em' }}>{item.category.toUpperCase()}</span>
              </div>
            </motion.div>
          ))}
        </div>
      </div>
    );

    // ============ MINDSET SHIFT SLIDE ============
    const MindsetShiftSlide = ({ data }) => (
      <div className="h-full flex flex-col justify-center items-center px-8 md:px-16 max-w-3xl mx-auto text-center">
        <motion.div initial={{ opacity: 0, scale: 0.8 }} animate={{ opacity: 1, scale: 1 }}
          style={{ width: '64px', height: '64px', borderRadius: '16px', background: 'linear-gradient(135deg, #EF4444, #DC2626)', display: 'flex', alignItems: 'center', justifyContent: 'center', marginBottom: '24px', boxShadow: '0 0 40px rgba(239, 68, 68, 0.3)' }}>
          <Icons.Flame />
        </motion.div>
        <motion.h2 initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.1 }} className="slide-title text-2xl md:text-3xl text-black mb-6">{data.title}</motion.h2>
        <motion.p initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.2 }}
          style={{ color: '#4B5563', fontSize: '16px', lineHeight: '1.8', maxWidth: '600px' }}>
          {data.insight}
        </motion.p>
      </div>
    );

    // ============ QUIZ SLIDE ============
    const QuizSlide = ({ data, onShowGif, onHideGif }) => {
      const [selected, setSelected] = useState(null);
      const [showFeedback, setShowFeedback] = useState(false);
      const celebrationGif = useMemo(() => getRandomCelebrationGif(), []);
      const empathyGif = useMemo(() => getRandomEmpathyGif(), []);
      const gifSide = useMemo(() => Math.random() > 0.5 ? 'left' : 'right', []);
      const handleSelect = (index) => { if (showFeedback) return; setSelected(index); setShowFeedback(true); };
      const isCorrect = selected === data.correctIndex;

      useEffect(() => { if (showFeedback) { if (isCorrect) { onShowGif(celebrationGif, '60%', gifSide); } else { onShowGif(empathyGif, '60%', gifSide); } } }, [showFeedback, isCorrect, celebrationGif, empathyGif, gifSide, onShowGif]);
      useEffect(() => { return () => onHideGif(); }, [onHideGif]);

      return (
        <div className="h-full w-full relative overflow-hidden">
          <div className="h-full flex flex-col justify-center px-8 md:px-12 max-w-2xl mx-auto slide-scroll overflow-y-auto py-10 relative z-30">
            <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} className="text-center mb-6 relative z-10">
              <p className="text-xs uppercase tracking-wider text-neutral-400 mb-3">Quick Check</p>
              <h2 className="slide-title text-xl md:text-2xl text-black leading-tight">{data.question}</h2>
            </motion.div>
            <div className="space-y-3 mb-6">
              {data.options.map((option, i) => (
                <motion.button key={i} initial={{ opacity: 0, x: -15 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.08 + i * 0.06 }} onClick={() => handleSelect(i)} disabled={showFeedback} className={`w-full p-4 rounded-xl text-left transition-all border-2 ${showFeedback ? i === data.correctIndex ? 'border-green-500 bg-green-50' : i === selected ? 'border-red-400 bg-red-50' : 'border-neutral-200 bg-white opacity-40' : 'border-neutral-200 bg-white hover:border-neutral-300'}`}>
                  <div className="flex items-center gap-3">
                    <span className={`w-8 h-8 rounded-lg flex items-center justify-center text-sm font-bold transition-all ${showFeedback && i === data.correctIndex ? 'bg-green-500 text-white' : showFeedback && i === selected && !isCorrect ? 'bg-red-400 text-white' : 'bg-neutral-100 text-neutral-500'}`}>
                      {showFeedback && i === data.correctIndex ? <Icons.Check /> : showFeedback && i === selected && !isCorrect ? <Icons.X /> : String.fromCharCode(65 + i)}
                    </span>
                    <span className="text-neutral-700 text-sm md:text-base">{option}</span>
                  </div>
                </motion.button>
              ))}
            </div>
            <AnimatePresence>
              {showFeedback && (
                <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} className={`p-5 rounded-xl ${isCorrect ? 'bg-green-50 border border-green-200' : 'bg-amber-50 border border-amber-200'}`}>
                  <p className={`text-sm leading-relaxed ${isCorrect ? 'text-green-800' : 'text-amber-800'}`}>{isCorrect ? data.feedback.correct : data.feedback.incorrect}</p>
                </motion.div>
              )}
            </AnimatePresence>
          </div>
        </div>
      );
    };

    // ============ COMPLETION SLIDE ============
    const CompletionSlide = ({ data }) => (
      <div className="h-full flex flex-col items-center justify-center text-center px-8 slide-scroll overflow-y-auto py-8">
        <motion.div initial={{ opacity: 0, scale: 0 }} animate={{ opacity: 1, scale: 1 }} transition={{ type: 'spring', duration: 0.5 }} className="w-16 h-16 rounded-xl flex items-center justify-center mb-4 text-white" style={{ background: `linear-gradient(135deg, var(--accent), var(--accent-dark))`, boxShadow: `0 6px 24px rgba(var(--accent-rgb), 0.35)` }}><Icons.Check /></motion.div>
        <motion.h2 initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.15 }} className="slide-title text-2xl md:text-3xl text-black mb-3">Lesson Complete!</motion.h2>
        <motion.p initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.25 }} className="text-neutral-500 text-sm mb-5 max-w-md leading-relaxed">You now understand the savage mentality. Stop coping. Start acting. Every setback is a chance to prove you're built different.</motion.p>
        <motion.a initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.35 }} href={`/lessons/${LESSON_CONFIG.nextLesson.id}/lesson.html`} className="bg-neutral-900 rounded-xl p-5 max-w-md w-full mb-4 block text-left hover:bg-neutral-800 transition-colors">
          <p className="text-neutral-500 text-xs uppercase tracking-wider mb-2">Up Next</p>
          <h3 className="text-white font-bold text-lg mb-1">{LESSON_CONFIG.nextLesson.title}</h3>
          <p className="text-neutral-400 text-sm">{LESSON_CONFIG.nextLesson.teaser}</p>
        </motion.a>
        {data.sources && data.sources.length > 0 && (
          <motion.p initial={{ opacity: 0 }} animate={{ opacity: 1 }} transition={{ delay: 0.45 }} className="text-neutral-400 text-xs">Sources: {data.sources.join(', ')}</motion.p>
        )}
      </div>
    );

    // ============ RENDER SLIDE ============
    const renderSlide = (slide, index, onStart, userName, onShowGif, onHideGif) => {
      switch (slide.type) {
        case 'welcome': return <WelcomeSlide data={slide} onStart={onStart} userName={userName} onShowGif={onShowGif} onHideGif={onHideGif} />;
        case 'hook': return <HookSlide data={slide} />;
        case 'cope-vs-action': return <CopeVsActionSlide data={slide} />;
        case 'cope-examples': return <CopeExamplesSlide data={slide} />;
        case 'savage-response': return <SavageResponseSlide data={slide} />;
        case 'grind-stories': return <GrindStoriesSlide data={slide} />;
        case 'success-formula': return <SuccessFormulaSlide data={slide} />;
        case 'mindset-audit': return <MindsetAuditSlide data={slide} />;
        case 'action-protocol': return <ActionProtocolSlide data={slide} />;
        case 'mindset-shift': return <MindsetShiftSlide data={slide} />;
        case 'quiz': return <QuizSlide data={slide} onShowGif={onShowGif} onHideGif={onHideGif} />;
        case 'completion': return <CompletionSlide data={slide} />;
        default: return <div className="h-full flex items-center justify-center"><p>Unknown slide type: {slide.type}</p></div>;
      }
    };

    // ============ MAIN APP ============
    const App = () => {
      const [currentSlide, setCurrentSlide] = useState(getInitialSlide());
      const [gifState, setGifState] = useState({ visible: false, gif: null, height: '50%', side: 'right' });
      const userName = getUserName();

      const goNext = useCallback(() => { if (currentSlide < slides.length - 1) setCurrentSlide(prev => prev + 1); }, [currentSlide]);
      const goPrev = useCallback(() => { if (currentSlide > 0) setCurrentSlide(prev => prev - 1); }, [currentSlide]);

      const handleKeyDown = useCallback((e) => {
        if (e.key === 'ArrowRight' || e.key === ' ') { e.preventDefault(); goNext(); }
        if (e.key === 'ArrowLeft') { e.preventDefault(); goPrev(); }
      }, [goNext, goPrev]);

      useEffect(() => { window.addEventListener('keydown', handleKeyDown); return () => window.removeEventListener('keydown', handleKeyDown); }, [handleKeyDown]);
      useEffect(() => { const url = new URL(window.location); url.searchParams.set('slide', currentSlide.toString()); window.history.replaceState({}, '', url); }, [currentSlide]);

      const showGif = useCallback((gif, height = '50%', side = 'right') => setGifState({ visible: true, gif, height, side }), []);
      const hideGif = useCallback(() => setGifState(prev => ({ ...prev, visible: false })), []);

      return (
        <div className="h-screen w-screen bg-white relative overflow-hidden">
          {/* Slide Content */}
          <AnimatePresence mode="wait">
            <motion.div key={currentSlide} initial={{ opacity: 0, x: 20 }} animate={{ opacity: 1, x: 0 }} exit={{ opacity: 0, x: -20 }} transition={{ duration: 0.3 }} className="h-full w-full">
              {renderSlide(slides[currentSlide], currentSlide, goNext, userName, showGif, hideGif)}
            </motion.div>
          </AnimatePresence>

          {/* Navigation */}
          {currentSlide > 0 && (
            <>
              <button onClick={goPrev} className="absolute left-4 top-1/2 -translate-y-1/2 p-3 rounded-full bg-white/80 hover:bg-white shadow-lg transition-all z-50" style={{ backdropFilter: 'blur(8px)' }}><Icons.ArrowLeft /></button>
              <button onClick={goNext} className="absolute right-4 top-1/2 -translate-y-1/2 p-3 rounded-full bg-white/80 hover:bg-white shadow-lg transition-all z-50" style={{ backdropFilter: 'blur(8px)' }}><Icons.ArrowRight /></button>
            </>
          )}

          {/* Progress Dots */}
          <div className="absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-1.5 z-50">
            {slides.map((_, i) => (
              <button key={i} onClick={() => setCurrentSlide(i)} className={`w-2 h-2 rounded-full transition-all ${i === currentSlide ? 'w-6' : ''}`} style={{ background: i === currentSlide ? 'var(--accent)' : '#D1D5DB' }} />
            ))}
          </div>

          {/* Character GIF */}
          <AnimatePresence>
            {gifState.visible && gifState.gif && (
              <motion.div initial={{ opacity: 0, y: 50 }} animate={{ opacity: 1, y: 0 }} exit={{ opacity: 0, y: 50 }} transition={{ duration: 0.4 }}
                className={`absolute bottom-0 ${gifState.side === 'left' ? 'left-4' : 'right-4'} z-10 pointer-events-none`}
                style={{ height: gifState.height, maxHeight: '500px' }}>
                <video autoPlay loop muted playsInline className="h-full w-auto object-contain object-bottom">
                  <source src={gifState.gif} type="video/mp4" />
                </video>
              </motion.div>
            )}
          </AnimatePresence>
        </div>
      );
    };

    ReactDOM.createRoot(document.getElementById('root')).render(<App />);
  </script>
</body>
</html>
