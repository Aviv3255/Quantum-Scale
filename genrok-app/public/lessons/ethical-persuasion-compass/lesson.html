<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>The Magic Show Test: Influence vs Manipulation | Quantum Scale</title>
  <script src="https://cdn.tailwindcss.com" defer></script>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" defer></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" defer></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js" defer></script>
  <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js" defer></script>
  <script src="../shared/greetings.js" defer></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fraunces:wght@400;500;600;700;800;900&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root { --accent: #10B981; --accent-dark: #059669; --accent-light: #34D399; --accent-rgb: 16, 185, 129; }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: 'Inter', sans-serif; background: transparent; -webkit-font-smoothing: antialiased; }
    .title-font { font-family: 'Fraunces', serif; font-weight: 900; letter-spacing: -0.02em; line-height: 1.1; }
    h1, h2, h3, .slide-title { font-family: 'Fraunces', serif; font-weight: 900; letter-spacing: -0.02em; line-height: 1.1; }
    ::selection { background: var(--accent); color: white; }
    .slide-scroll::-webkit-scrollbar { display: none; }
    .slide-scroll { -ms-overflow-style: none; scrollbar-width: none; }
  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { motion, AnimatePresence } = window.Motion;
    const { useState, useEffect, useCallback, useMemo } = React;
    const getUserName = () => { const params = new URLSearchParams(window.location.search); return params.get('userName') || 'Builder'; };
    const LESSON_CONFIG = {
      id: 'ethical-persuasion-compass',
      title: 'The Magic Show Test: Influence vs Manipulation',
      description: 'One simple question that separates ethical persuasion from manipulative tactics.',
      accentColor: '#10B981',
      duration: '8 min',
      nextLesson: { id: 'two-worlds-mastery', title: 'The Two Worlds Every DTC Founder Must Master', teaser: 'Why most founders plateau by living in only one world.' }
    };
    const celebrationGifs = ['https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_doing_a_quick_victory_dance_move_high_energy_c_d03b798b-a518-4e6c-bcae-d69b2dd50486_2.mp4','https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_jumping_in_the_air_arms_raised_high_YESSS_cele_201477e8-3df4-405a-bc81-81d1747e5c6c_2.mp4'];
    const getRandomCelebrationGif = () => celebrationGifs[Math.floor(Math.random() * celebrationGifs.length)];
    const empathyGifs = ['https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_thumbs_down_with_encouraging_nod_close_keep_go_613e541f-c072-436f-aee7-f99cd6f834fc_2.mp4','https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_shaking_head_side_to_side_sadly_disappointed_e_c4a4be22-6a70-4738-8612-3039454fef37_1.mp4'];
    const getRandomEmpathyGif = () => empathyGifs[Math.floor(Math.random() * empathyGifs.length)];
    const slides = [
      { type: 'welcome', learningGoals: ['The difference between manipulation and ethical influence', 'The Magic Show Test framework for decision-making', 'Five principles for building sustainable trust'] },
      { type: 'hook', headline: 'Every brand is influencing customers. But there is a line.', subtext: 'Every ad. Every product page. Every email. You are guiding decisions. Shaping perceptions. Persuading people to buy. On one side: ethical influence that builds trust. On the other: manipulation that destroys it. Most brands cannot tell the difference.', brandImage: 'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/framer-1.svg', brandName: 'Framer' },
      { type: 'visual', visualType: 'stats', title: 'The Decision Overload', data: [{ value: '35,000', label: 'Daily Decisions', subtext: 'Average person makes per day' },{ value: '100%', label: 'Mental Shortcuts', subtext: 'Everyone relies on them' },{ value: '2x', label: 'The Choice', subtext: 'Use psychology ethically or exploit it' }]},
      { type: 'content', title: 'The Psychology Everyone Uses', body: 'With 35,000 decisions a day, your customers rely on mental shortcuts. Social proof. Scarcity. Authority. Reciprocity. These shortcuts are REAL. They work because they are based on genuine human psychology. But here is where it gets dangerous: You can use real psychology to provide reliable information. Or you can use it to exploit with counterfeit evidence.' },
      { type: 'example', scenario: 'Manipulation vs Education', before: { label: 'Manipulation', text: 'Influencing for YOUR benefit without their consent. Fake reviews from bots. Only 2 left when you have 500. Fake countdown timers that reset. 10,000 sold when it is 47. Hidden subscription fine print.' }, after: { label: 'Education', text: 'Influencing for THEIR benefit with their consent. Real reviews from verified buyers. Honest low-stock alerts. Clear value proposition. Transparent social proof. Upfront pricing with no hidden fees.' }, insight: 'Manipulation wins one sale. Education builds lifetime value.' },
      { type: 'content', title: 'The Magic Show Test', body: 'Frame your branding as a magic show. Is your audience IN ON THE JOKE—willingly suspending disbelief because they are entertained? Or are you CONVINCING THEM THE MAGIC IS REAL—deceiving them for your gain? That is the difference between education and manipulation. When customers feel tricked, they leave and never come back.' },
      { type: 'cards', title: 'Apply the Test to Common Scenarios', items: [{ title: 'Scarcity - Manipulation', description: 'Only 3 left in stock! (You have 300 units, timer resets for every visitor)' },{ title: 'Scarcity - Education', description: '12 in stock at this location, restocking next Tuesday (Real inventory data)' },{ title: 'Social Proof - Manipulation', description: '47,000 happy customers! (Fake number, no verification, bots wrote reviews)' },{ title: 'Social Proof - Education', description: '4.8/5 stars from 247 verified buyers (Linked to actual purchase records)' },{ title: 'Urgency - Manipulation', description: 'Sale ends tonight! (Sale has been running for 6 months, will continue tomorrow)' },{ title: 'Urgency - Education', description: '20% off until Dec 25, then back to regular price (Real end date, honored)' }]},
      { type: 'content', title: 'Why This Actually Matters', body: 'You might think: But manipulation works! People fall for it! Short term? Sure. Long term? It destroys your brand. Because customers are not stupid. They catch on. They feel tricked. They tell others. They never come back. Manipulation is a sprint. Education is a marathon. And in DTC, where customer lifetime value determines survival, you need the marathon.' },
      { type: 'cards', title: 'The Ethical Persuasion Principles', items: [{ title: '1. Never Fake Evidence', description: 'Use real data, real reviews, real inventory counts. If you cannot prove it, do not claim it.' },{ title: '2. Make Benefit Theirs', description: 'Does this tactic help THEM make a better decision? Or just trick them into buying?' },{ title: '3. The Magic Show Test', description: 'Are they in on it? Or are you deceiving them? If you would be embarrassed to explain how it works, it is manipulation.' },{ title: '4. Build for Repeats', description: 'Every decision should strengthen trust for the NEXT purchase, not just secure this one.' },{ title: '5. Transparency Wins', description: 'When in doubt, be MORE honest than necessary. It is the only sustainable competitive advantage.' }]},
      { type: 'quiz', question: 'What is the key difference between manipulation and education?', options: ['Manipulation uses psychology, education does not', 'Manipulation benefits you without their consent, education benefits them with consent', 'Manipulation is illegal, education is legal', 'There is no real difference'], correctIndex: 1, feedback: { correct: 'Exactly. This is the core distinction. Manipulation uses psychological triggers for YOUR benefit without the customer truly understanding or consenting. Education uses the same psychology to help THEM make better decisions with full transparency. Both influence behavior—but only one builds sustainable trust.', incorrect: 'Not quite. Both manipulation and education use the same psychological principles—social proof, scarcity, authority. The difference is intent and transparency. Manipulation benefits YOU without their true consent. Education benefits THEM with full transparency. One destroys trust. One builds it.' }},
      { type: 'completion', sources: [] }
    ];
    const Icons = {Clock:()=><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>,Check:()=><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3"><polyline points="20 6 9 17 4 12"/></svg>,X:()=><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>,ArrowLeft:()=><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></svg>,ArrowRight:()=><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg>,Zap:()=><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>,ExternalLink:()=><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>,Link:()=><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>};
    const WelcomeSlide=({data,onStart,userName,onShowGif,onHideGif})=>{const welcomeData=useMemo(()=>getTimeBasedWelcome(),[]);const gifSide=useMemo(()=>Math.random()>0.5?'left':'right',[]);useEffect(()=>{onShowGif(welcomeData.gif,'65%',gifSide);return()=>onHideGif();},[welcomeData.gif,gifSide,onShowGif,onHideGif]);return(<div className="h-full w-full relative overflow-hidden"><div className="h-full flex flex-col items-center justify-center text-center px-6 py-4 relative z-20"><motion.h1 initial={{opacity:0,y:20}} animate={{opacity:1,y:0}} className="title-font text-3xl sm:text-4xl md:text-5xl lg:text-6xl text-black mb-2 md:mb-3">{LESSON_CONFIG.title}</motion.h1><motion.p initial={{opacity:0,y:15}} animate={{opacity:1,y:0}} transition={{delay:0.1}} className="text-neutral-600 text-base md:text-lg lg:text-xl mb-2 md:mb-3 max-w-lg leading-relaxed" dangerouslySetInnerHTML={{__html:formatGreeting(welcomeData.greeting,`<span class="font-bold text-neutral-900">${userName}</span>`)}}/><motion.div initial={{opacity:0,y:15}} animate={{opacity:1,y:0}} transition={{delay:0.15}} className="flex items-center justify-center gap-1.5 text-neutral-400 text-[10px] md:text-xs mb-2 md:mb-3"><Icons.Clock/><span>{LESSON_CONFIG.duration}</span></motion.div><motion.div initial={{opacity:0,y:15}} animate={{opacity:1,y:0}} transition={{delay:0.2}} className="bg-neutral-900 rounded-xl md:rounded-2xl p-3 md:p-5 mb-3 md:mb-4 max-w-sm w-full mx-auto"><p className="text-neutral-500 text-[9px] md:text-[11px] uppercase tracking-wider mb-2 md:mb-3">In this lesson</p><ul className="space-y-1.5 md:space-y-2">{data.learningGoals.map((goal,i)=>(<motion.li key={i} initial={{opacity:0,x:-10}} animate={{opacity:1,x:0}} transition={{delay:0.25+i*0.05}} className="flex items-start gap-2 text-left"><span className="w-5 h-5 rounded-md flex items-center justify-center text-[9px] font-bold text-white flex-shrink-0 mt-0.5" style={{background:`linear-gradient(135deg, var(--accent), var(--accent-dark))`}}>{i+1}</span><span className="text-neutral-300 text-[11px] md:text-sm leading-snug">{goal}</span></motion.li>))}</ul></motion.div><motion.button initial={{opacity:0,y:15}} animate={{opacity:1,y:0}} transition={{delay:0.45}} onClick={onStart} whileHover={{scale:1.02}} whileTap={{scale:0.98}} className="px-6 md:px-7 py-2.5 md:py-3 rounded-xl text-white font-semibold text-sm md:text-base" style={{background:`linear-gradient(135deg, var(--accent), var(--accent-dark))`}}>Let's Go</motion.button></div></div>);};
    const HookSlide=({data})=>(<div className="h-full flex flex-col justify-center px-8 md:px-16 max-w-3xl mx-auto slide-scroll overflow-y-auto py-10"><motion.div initial={{opacity:0,y:20}} animate={{opacity:1,y:0}} className="mb-6"><span className="inline-block px-3 py-1 rounded-full text-xs font-semibold mb-4" style={{background:`rgba(var(--accent-rgb), 0.1)`,color:'var(--accent)'}}>The Hook</span><h2 className="slide-title text-3xl md:text-4xl lg:text-5xl text-black leading-tight">{data.headline}</h2></motion.div><motion.p initial={{opacity:0,y:15}} animate={{opacity:1,y:0}} transition={{delay:0.15}} className="text-lg md:text-xl text-neutral-600 leading-relaxed">{data.subtext}</motion.p></div>);
    const ContentSlide=({data})=>(<div className="h-full flex flex-col justify-center px-8 md:px-16 max-w-3xl mx-auto slide-scroll overflow-y-auto py-10"><motion.h2 initial={{opacity:0,y:20}} animate={{opacity:1,y:0}} className="slide-title text-2xl md:text-3xl lg:text-4xl text-black mb-6">{data.title}</motion.h2><motion.p initial={{opacity:0,y:15}} animate={{opacity:1,y:0}} transition={{delay:0.1}} className="text-base md:text-lg text-neutral-600 leading-relaxed">{data.body}</motion.p></div>);
    const ExampleSlide=({data})=>(<div className="h-full flex flex-col justify-center px-6 md:px-12 max-w-4xl mx-auto slide-scroll overflow-y-auto py-8"><motion.div initial={{opacity:0,y:15}} animate={{opacity:1,y:0}} className="text-center mb-6"><span className="inline-block px-3 py-1 rounded-full text-xs font-semibold mb-2" style={{background:`rgba(var(--accent-rgb), 0.1)`,color:'var(--accent)'}}>Real Example</span><h2 className="slide-title text-xl md:text-2xl text-black">{data.scenario}</h2></motion.div><div className="grid md:grid-cols-2 gap-4 mb-6"><motion.div initial={{opacity:0,x:-20}} animate={{opacity:1,x:0}} transition={{delay:0.1}} className="bg-red-50 border-2 border-red-200 rounded-xl p-5"><div className="flex items-center gap-2 mb-3"><div className="w-6 h-6 rounded-full bg-red-500 flex items-center justify-center text-white"><Icons.X/></div><span className="font-semibold text-red-700 text-sm">{data.before.label}</span></div><p className="text-neutral-700 text-sm leading-relaxed italic">{data.before.text}</p></motion.div><motion.div initial={{opacity:0,x:20}} animate={{opacity:1,x:0}} transition={{delay:0.2}} className="bg-green-50 border-2 border-green-200 rounded-xl p-5"><div className="flex items-center gap-2 mb-3"><div className="w-6 h-6 rounded-full bg-green-500 flex items-center justify-center text-white"><Icons.Check/></div><span className="font-semibold text-green-700 text-sm">{data.after.label}</span></div><p className="text-neutral-700 text-sm leading-relaxed italic">{data.after.text}</p></motion.div></div><motion.div initial={{opacity:0,y:15}} animate={{opacity:1,y:0}} transition={{delay:0.3}} className="bg-neutral-900 rounded-xl p-4 text-center"><p className="text-neutral-300 text-sm"><Icons.Zap className="inline mr-2"/>{data.insight}</p></motion.div></div>);
    const VisualSlide=({data})=>{if(data.visualType==='stats'){return(<div className="h-full flex flex-col justify-center px-6 md:px-12 max-w-4xl mx-auto slide-scroll overflow-y-auto py-8"><motion.h2 initial={{opacity:0,y:15}} animate={{opacity:1,y:0}} className="slide-title text-2xl md:text-3xl text-black text-center mb-8">{data.title}</motion.h2><div className="grid md:grid-cols-3 gap-4">{data.data.map((stat,i)=>(<motion.div key={i} initial={{opacity:0,y:20}} animate={{opacity:1,y:0}} transition={{delay:0.1+i*0.1}} className="bg-neutral-900 rounded-xl p-6 text-center"><div className="text-3xl md:text-4xl font-bold mb-2" style={{color:'var(--accent)'}}>{stat.value}</div><div className="text-sm font-semibold text-white mb-1">{stat.label}</div><div className="text-xs text-neutral-400">{stat.subtext}</div></motion.div>))}</div></div>);}return null;};
    const CardsSlide=({data})=>(<div className="h-full flex flex-col justify-center px-6 md:px-12 max-w-4xl mx-auto slide-scroll overflow-y-auto py-8"><motion.h2 initial={{opacity:0,y:15}} animate={{opacity:1,y:0}} className="slide-title text-2xl md:text-3xl text-black text-center mb-6">{data.title}</motion.h2><div className={`grid gap-3 ${data.items.length===6?'md:grid-cols-3':data.items.length===5?'md:grid-cols-3':data.items.length===4?'md:grid-cols-2':'md:grid-cols-2'}`}>{data.items.map((item,i)=>(<motion.div key={i} initial={{opacity:0,y:20}} animate={{opacity:1,y:0}} transition={{delay:0.1+i*0.06}} className="bg-white border-2 border-neutral-200 rounded-xl p-4 hover:border-neutral-300 transition-colors"><h3 className="font-bold text-neutral-900 mb-2 text-sm md:text-base">{item.title}</h3><p className="text-neutral-600 text-xs md:text-sm leading-relaxed">{item.description}</p></motion.div>))}</div></div>);
    const QuizSlide=({data,onShowGif,onHideGif})=>{const [selected,setSelected]=useState(null);const [showFeedback,setShowFeedback]=useState(false);const celebrationGif=useMemo(()=>getRandomCelebrationGif(),[]);const empathyGif=useMemo(()=>getRandomEmpathyGif(),[]);const gifSide=useMemo(()=>Math.random()>0.5?'left':'right',[]);const handleSelect=(index)=>{if(showFeedback)return;setSelected(index);setShowFeedback(true);};const isCorrect=selected===data.correctIndex;useEffect(()=>{if(showFeedback){if(isCorrect){onShowGif(celebrationGif,'60%',gifSide);}else{onShowGif(empathyGif,'60%',gifSide);}}},[showFeedback,isCorrect,celebrationGif,empathyGif,gifSide,onShowGif]);useEffect(()=>{return()=>onHideGif();},[onHideGif]);return(<div className="h-full w-full relative overflow-hidden"><div className="h-full flex flex-col justify-center px-8 md:px-12 max-w-2xl mx-auto slide-scroll overflow-y-auto py-10 relative z-30"><motion.div initial={{opacity:0,y:15}} animate={{opacity:1,y:0}} className="text-center mb-6"><p className="text-xs uppercase tracking-wider text-neutral-400 mb-3">Quick Check</p><h2 className="slide-title text-xl md:text-2xl text-black leading-tight">{data.question}</h2></motion.div><div className="space-y-3 mb-6">{data.options.map((option,i)=>(<motion.button key={i} initial={{opacity:0,x:-15}} animate={{opacity:1,x:0}} transition={{delay:0.08+i*0.06}} onClick={()=>handleSelect(i)} disabled={showFeedback} className={`w-full p-4 rounded-xl text-left transition-all border-2 ${showFeedback?i===data.correctIndex?'border-green-500 bg-green-50':i===selected?'border-red-400 bg-red-50':'border-neutral-200 bg-white opacity-40':'border-neutral-200 bg-white hover:border-neutral-300'}`}><div className="flex items-center gap-3"><span className={`w-8 h-8 rounded-lg flex items-center justify-center text-sm font-bold transition-all ${showFeedback&&i===data.correctIndex?'bg-green-500 text-white':showFeedback&&i===selected&&!isCorrect?'bg-red-400 text-white':'bg-neutral-100 text-neutral-500'}`}>{showFeedback&&i===data.correctIndex?<Icons.Check/>:showFeedback&&i===selected&&!isCorrect?<Icons.X/>:String.fromCharCode(65+i)}</span><span className="text-neutral-700 text-sm md:text-base">{option}</span></div></motion.button>))}</div><AnimatePresence>{showFeedback&&(<motion.div initial={{opacity:0,y:15}} animate={{opacity:1,y:0}} className={`p-5 rounded-xl ${isCorrect?'bg-green-50 border border-green-200':'bg-amber-50 border border-amber-200'}`}><p className={`text-sm leading-relaxed ${isCorrect?'text-green-800':'text-amber-800'}`}>{isCorrect?data.feedback.correct:data.feedback.incorrect}</p></motion.div>)}</AnimatePresence></div></div>);};
    const CompletionSlide=({data})=>(<div className="h-full flex flex-col items-center justify-center text-center px-8 slide-scroll overflow-y-auto py-8"><motion.div initial={{opacity:0,scale:0}} animate={{opacity:1,scale:1}} transition={{type:'spring',duration:0.5}} className="w-16 h-16 rounded-xl flex items-center justify-center mb-4 text-white" style={{background:`linear-gradient(135deg, var(--accent), var(--accent-dark))`,boxShadow:`0 6px 24px rgba(var(--accent-rgb), 0.35)`}}><Icons.Check/></motion.div><motion.h2 initial={{opacity:0,y:15}} animate={{opacity:1,y:0}} transition={{delay:0.15}} className="slide-title text-2xl md:text-3xl text-black mb-3">Lesson Complete</motion.h2><motion.p initial={{opacity:0,y:15}} animate={{opacity:1,y:0}} transition={{delay:0.25}} className="text-neutral-500 text-sm mb-5 max-w-md leading-relaxed">You now understand the difference between manipulation and ethical persuasion. Use the Magic Show Test: Are they in on it, or are you deceiving them? Build for lifetime value, not one-time transactions.</motion.p><motion.div initial={{opacity:0,y:15}} animate={{opacity:1,y:0}} transition={{delay:0.35}} className="bg-neutral-900 rounded-xl p-5 max-w-md w-full mb-4"><p className="text-neutral-500 text-xs uppercase tracking-wider mb-2">Up Next</p><h3 className="text-white font-bold text-lg mb-1">{LESSON_CONFIG.nextLesson.title}</h3><p className="text-neutral-400 text-xs">{LESSON_CONFIG.nextLesson.teaser}</p></motion.div></div>);
    const LessonApp=()=>{const [currentSlide,setCurrentSlide]=useState(0);const [direction,setDirection]=useState(1);const userName=useMemo(()=>getUserName(),[]);const currentSlideRef=React.useRef(0);const [gifConfig,setGifConfig]=useState(null);const [isAnimating,setIsAnimating]=useState(false);const showGif=useCallback((url,height,side)=>setGifConfig({url,height,side}),[]);const hideGif=useCallback(()=>setGifConfig(null),[]);React.useEffect(()=>{currentSlideRef.current=currentSlide;},[currentSlide]);const goToSlide=useCallback((newSlide)=>{if(isAnimating||newSlide<0||newSlide>=slides.length)return;setIsAnimating(true);setDirection(newSlide>currentSlideRef.current?1:-1);setCurrentSlide(newSlide);},[isAnimating]);const nextSlide=useCallback(()=>{if(currentSlideRef.current+1<slides.length)goToSlide(currentSlideRef.current+1);},[goToSlide]);const prevSlide=useCallback(()=>{if(currentSlideRef.current-1>=0)goToSlide(currentSlideRef.current-1);},[goToSlide]);useEffect(()=>{const handleKeyDown=(e)=>{if(e.key==='ArrowRight'||e.key===' '){e.preventDefault();nextSlide();}if(e.key==='ArrowLeft'){e.preventDefault();prevSlide();}};window.addEventListener('keydown',handleKeyDown);return()=>window.removeEventListener('keydown',handleKeyDown);},[nextSlide,prevSlide]);const slideVariants={enter:(dir)=>({x:dir>0?'100%':'-100%',opacity:0}),center:{x:0,opacity:1},exit:(dir)=>({x:dir>0?'-100%':'100%',opacity:0})};const renderSlide=(slide)=>{switch(slide.type){case 'welcome':return <WelcomeSlide data={slide} onStart={nextSlide} userName={userName} onShowGif={showGif} onHideGif={hideGif}/>;case 'hook':return <HookSlide data={slide}/>;case 'content':return <ContentSlide data={slide}/>;case 'example':return <ExampleSlide data={slide}/>;case 'visual':return <VisualSlide data={slide}/>;case 'cards':return <CardsSlide data={slide}/>;case 'quiz':return <QuizSlide data={slide} onShowGif={showGif} onHideGif={hideGif}/>;case 'completion':return <CompletionSlide data={slide}/>;default:return null;}};const showPrev=currentSlide>0;const showNext=currentSlide<slides.length-1&&slides[currentSlide].type!=='welcome';return(<div className="w-full h-screen bg-white flex flex-col relative"><div className="flex-1 relative overflow-hidden z-20"><AnimatePresence mode="wait" custom={direction} onExitComplete={()=>setIsAnimating(false)}><motion.div key={currentSlide} custom={direction} variants={slideVariants} initial="enter" animate="center" exit="exit" transition={{duration:0.3,ease:[0.25,0.1,0.25,1]}} className="absolute inset-0">{renderSlide(slides[currentSlide])}</motion.div></AnimatePresence>{showPrev&&<button onClick={prevSlide} className="absolute left-5 top-1/2 -translate-y-1/2 w-12 h-12 rounded-full bg-neutral-100 hover:bg-neutral-200 flex items-center justify-center text-neutral-500 hover:text-neutral-700 transition-all z-10"><Icons.ArrowLeft/></button>}{showNext&&<button onClick={nextSlide} className="absolute right-5 top-1/2 -translate-y-1/2 w-12 h-12 rounded-full bg-neutral-100 hover:bg-neutral-200 flex items-center justify-center text-neutral-500 hover:text-neutral-700 transition-all z-10"><Icons.ArrowRight/></button>}</div><div className="px-6 md:px-8 py-5 border-t border-neutral-100 flex-shrink-0 relative z-10"><div className="flex items-center justify-center gap-2.5">{slides.map((_,i)=><button key={i} onClick={()=>goToSlide(i)} className="w-2.5 h-2.5 rounded-full transition-all duration-300" style={{background:i===currentSlide?'var(--accent)':'#d4d4d4',transform:i===currentSlide?'scale(1.3)':'scale(1)'}}/>)}</div></div><AnimatePresence>{gifConfig&&(<motion.div initial={{opacity:0,y:30}} animate={{opacity:1,y:0}} exit={{opacity:0,y:30}} transition={{type:'spring',stiffness:100}} className={`absolute ${gifConfig.side==='left'?'left-4 md:left-8':'right-4 md:right-8'} bottom-0 pointer-events-none`} style={{zIndex:15,height:gifConfig.height}}><video autoPlay loop muted playsInline className="h-full w-auto object-contain object-bottom" style={{background:'transparent',border:'none',boxShadow:'none'}}><source src={gifConfig.url} type="video/mp4"/></video></motion.div>)}</AnimatePresence></div>);};
    ReactDOM.render(<LessonApp/>,document.getElementById('root'));
  </script>
</body>
</html>
