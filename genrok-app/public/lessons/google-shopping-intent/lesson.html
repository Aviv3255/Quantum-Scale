<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Active Intent: Why Google Shopping Beats Social Ads | Quantum Scale</title>
  <script src="https://cdn.tailwindcss.com" defer></script>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" defer></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" defer></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js" defer></script>
  <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js" defer></script>
  <script src="../shared/greetings.js" defer></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://unpkg.com" crossorigin>
  <link rel="preconnect" href="https://cdn.tailwindcss.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fraunces:wght@400;500;600;700;800;900&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root { --accent: #f97316; --accent-dark: #ea580c; --accent-light: #fdba74; --accent-rgb: 249, 115, 22; }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: 'Inter', sans-serif; background: transparent; -webkit-font-smoothing: antialiased; }
    .title-font { font-family: 'Fraunces', serif; font-weight: 900; letter-spacing: -0.02em; line-height: 1.1; }
    h1, h2, h3, .slide-title { font-family: 'Fraunces', serif; font-weight: 900; letter-spacing: -0.02em; line-height: 1.1; }
    ::selection { background: var(--accent); color: white; }
    .slide-scroll::-webkit-scrollbar { display: none; }
    .slide-scroll { -ms-overflow-style: none; scrollbar-width: none; }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { motion, AnimatePresence } = window.Motion;
    const { useState, useEffect, useCallback, useMemo } = React;

    const getUserName = () => { const params = new URLSearchParams(window.location.search); return params.get('userName') || 'Builder'; };

    const LESSON_CONFIG = {
      id: 'google-shopping-intent',
      title: 'Active Intent: Why Google Shopping Beats Social Ads',
      description: 'The fundamental difference between passive discovery on social media and active purchase intent on Google Shopping.',
      accentColor: '#f97316',
      duration: '5 min',
      nextLesson: { id: 'google-store-trust-checklist', title: 'Store Trust Checklist', teaser: 'Learn how to earn Google\'s trust before you spend a cent.' }
    };

    const celebrationGifs = [
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_doing_a_quick_victory_dance_move_high_energy_c_d03b798b-a518-4e6c-bcae-d69b2dd50486_2.mp4',
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_jumping_in_the_air_arms_raised_high_YESSS_cele_201477e8-3df4-405a-bc81-81d1747e5c6c_2.mp4',
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_playing_air_guitar_light_headbanging_rockstar__0702007e-9e84-4d9e-8f99-8ee23d0b65f8_2.mp4',
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_doing_the_running_man_dance_move_vintage_cool__25682b0f-cf4c-4e93-8dcb-6c3dac8135cd_0.mp4',
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_standing_and_clapping_enthusiastically_mouth_o_992ac4fd-9a0e-4963-bbcc-a5271f25f4fd_3.mp4'
    ];
    const getRandomCelebrationGif = () => celebrationGifs[Math.floor(Math.random() * celebrationGifs.length)];

    const empathyGifs = [
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_thumbs_down_with_encouraging_nod_close_keep_go_613e541f-c072-436f-aee7-f99cd6f834fc_2.mp4',
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_shaking_head_side_to_side_sadly_disappointed_e_c4a4be22-6a70-4738-8612-3039454fef37_1.mp4',
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_covering_face_with_palm_facepalm_gesture_disap_211b0566-078f-4d42-9c41-547b14f5827c_0.mp4',
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_looking_down_sadly_shoulders_slumped_disappoin_790d48bd-e49e-40ea-9979-d3e86fa3a422_2.mp4'
    ];
    const getRandomEmpathyGif = () => empathyGifs[Math.floor(Math.random() * empathyGifs.length)];

    const slides = [
      { type: 'welcome', learningGoals: ['The fundamental difference between passive and active intent', 'Why social media users scroll but Google users search with purpose', 'How Google Shopping captures high-intent buyers ready to purchase', 'Why cost-per-click matters less when conversion rates are higher'] },
      { type: 'hook', headline: 'Social media users are scrolling through feeds, barely paying attention. Google Shopping users are typing "men\'s corduroy trousers" into the search bar. Which one do you think is more likely to buy?', subtext: 'The difference between passive discovery and active intent is the difference between hoping someone might want your product and showing up exactly when they\'re searching for it.' },
      { type: 'content', title: 'Passive Discovery vs Active Intent', body: 'Let\'s start with the fundamental truth that changes everything:\n\nPassive Discovery (Social Media):\nUsers are scrolling through feeds, looking at friends\' photos, watching videos. An ad appears. Maybe it catches their eye. Maybe it doesn\'t. They weren\'t looking for your product. They didn\'t ask to see it. Low intent.\n\nActive Intent (Google Shopping):\nUsers open Google and type "men\'s corduroy trousers" into the search bar. They\'re ACTIVELY searching for exactly what you sell. They have a need. They\'re comparing options. They\'re ready to buy. High intent.\n\nThis isn\'t a small difference. This is everything.\n\nOne person is casually browsing. The other person is actively shopping. Who do you think converts better?' },
      { type: 'mockup', title: 'Passive vs Active Intent', description: 'Social media users discover products they weren\'t looking for. Google Shopping users actively search for products they want to buy. The intent difference is massive.', mockupType: 'intent-comparison' },
      { type: 'content', title: 'Why Google Shopping Wins', body: 'Google Shopping Ads capture users at the exact moment they\'re searching for your product. This creates three massive advantages:\n\n1. Higher Conversion Rates\nSomeone searching "buy running shoes" is infinitely more likely to purchase than someone who saw a running shoe ad while scrolling Instagram. They\'re already in buying mode.\n\n2. Better ROAS (Return on Ad Spend)\nYou only pay when someone clicks. And because they\'re actively searching for what you sell, they convert at much higher rates. Higher conversion = better ROAS.\n\n3. Intent-Based Pricing\nYes, Google clicks might cost more than social clicks. But a $2 click that converts at 5% is better than a $0.50 click that converts at 0.5%. You\'re paying for quality, not quantity.\n\nThe businesses that win understand this: Cost per click means nothing. Cost per CUSTOMER is everything.' },
      { type: 'content', title: 'The Economics of Intent', body: 'Let\'s break down the math to see why active intent wins:\n\nSocial Media Ad:\n- Cost per click: $0.50\n- Conversion rate: 0.5% (low intent)\n- Cost per sale: $100\n\nGoogle Shopping Ad:\n- Cost per click: $2.00\n- Conversion rate: 5% (high intent)\n- Cost per sale: $40\n\nThe "cheaper" social click costs you MORE per customer because the intent isn\'t there. The "expensive" Google click costs you LESS per customer because people are actively searching.\n\nThis is why Google Shopping often delivers better ROAS than social ads despite higher CPCs. You\'re capturing demand, not creating it.\n\nWhen someone searches for your product category, show up. That\'s the game.' },
      { type: 'quiz', question: 'What\'s the key advantage of Google Shopping over social media ads?', options: ['Lower cost per click', 'Users have active purchase intent - they\'re searching for your product', 'Better targeting options', 'More ad formats available'], correctIndex: 1, feedback: { correct: 'Exactly! Active purchase intent is everything. When someone types "men\'s corduroy trousers" into Google, they\'re not browsing - they\'re shopping. They have a specific need and they\'re comparing options. This high intent leads to higher conversion rates and better ROAS, even if the cost per click is higher. You\'re capturing existing demand, not trying to create it from scratch.', incorrect: 'Not quite. The real advantage is active purchase intent. Google Shopping users are typing specific product searches - they\'re actively looking to buy. Social media users are scrolling feeds - they\'re passively discovering. This intent difference creates higher conversion rates on Google Shopping, even if clicks cost more. A $2 click that converts at 5% beats a $0.50 click that converts at 0.5%. You\'re paying for quality buyers, not casual scrollers.' }},
      { type: 'completion', sources: [{ name: 'Google Shopping Ads - Official Guide', url: 'https://ads.google.com/home/campaigns/shopping-ads/' }] }
    ];

    const Icons = {
      Clock: () => <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>,
      Check: () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3"><polyline points="20 6 9 17 4 12"/></svg>,
      X: () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>,
      ArrowLeft: () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></svg>,
      ArrowRight: () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg>,
    };

    const WelcomeSlide = ({ data, onStart, userName, onShowGif, onHideGif }) => {
      const welcomeData = useMemo(() => getTimeBasedWelcome(), []);
      const gifSide = useMemo(() => Math.random() > 0.5 ? 'left' : 'right', []);
      useEffect(() => { onShowGif(welcomeData.gif, '65%', gifSide); return () => onHideGif(); }, [welcomeData.gif, gifSide, onShowGif, onHideGif]);

      return (
        <div className="h-full w-full relative overflow-hidden">
          <div className="h-full flex flex-col items-center justify-center text-center px-6 py-4 relative z-20">
            <motion.h1 initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className="title-font text-3xl sm:text-4xl md:text-5xl lg:text-6xl text-black mb-2 md:mb-3">{LESSON_CONFIG.title}</motion.h1>
            <motion.p initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.1 }} className="text-neutral-600 text-base md:text-lg lg:text-xl mb-2 md:mb-3 max-w-lg leading-relaxed" dangerouslySetInnerHTML={{ __html: formatGreeting(welcomeData.greeting, `<span class="font-bold text-neutral-900">${userName}</span>`) }} />
            <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.15 }} className="flex items-center justify-center gap-1.5 text-neutral-400 text-[10px] md:text-xs mb-2 md:mb-3"><Icons.Clock /><span>{LESSON_CONFIG.duration}</span></motion.div>
            <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.2 }} className="bg-neutral-900 rounded-xl md:rounded-2xl p-3 md:p-5 mb-3 md:mb-4 max-w-sm w-full mx-auto">
              <p className="text-neutral-500 text-[9px] md:text-[11px] uppercase tracking-wider mb-2 md:mb-3">In this lesson</p>
              <ul className="space-y-1.5 md:space-y-2">
                {data.learningGoals.map((goal, i) => (
                  <motion.li key={i} initial={{ opacity: 0, x: -10 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.25 + i * 0.05 }} className="flex items-start gap-2 text-left">
                    <span className="w-5 h-5 rounded-md flex items-center justify-center text-[9px] font-bold text-white flex-shrink-0 mt-0.5" style={{ background: `linear-gradient(135deg, var(--accent), var(--accent-dark))` }}>{i + 1}</span>
                    <span className="text-neutral-300 text-[11px] md:text-sm leading-snug">{goal}</span>
                  </motion.li>
                ))}
              </ul>
            </motion.div>
            <motion.button initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.45 }} onClick={onStart} whileHover={{ scale: 1.02 }} whileTap={{ scale: 0.98 }} className="px-6 md:px-7 py-2.5 md:py-3 rounded-xl text-white font-semibold text-sm md:text-base" style={{ background: `linear-gradient(135deg, var(--accent), var(--accent-dark))` }}>Let's Go</motion.button>
          </div>
        </div>
      );
    };

    const HookSlide = ({ data }) => (
      <div className="h-full flex flex-col justify-center px-8 md:px-16 max-w-3xl mx-auto slide-scroll overflow-y-auto py-10">
        <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className="mb-6">
          <span className="inline-block px-3 py-1 rounded-full text-xs font-semibold mb-4" style={{ background: `rgba(var(--accent-rgb), 0.1)`, color: 'var(--accent)' }}>The Hook</span>
          <h2 className="slide-title text-3xl md:text-4xl lg:text-5xl text-black leading-tight">{data.headline}</h2>
        </motion.div>
        <motion.p initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.15 }} className="text-lg md:text-xl text-neutral-600 leading-relaxed">{data.subtext}</motion.p>
      </div>
    );

    const ContentSlide = ({ data }) => (
      <div className="h-full flex flex-col justify-center px-8 md:px-16 max-w-3xl mx-auto slide-scroll overflow-y-auto py-10">
        <motion.h2 initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className="slide-title text-2xl md:text-3xl lg:text-4xl text-black mb-6">{data.title}</motion.h2>
        <motion.p initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.1 }} className="text-base md:text-lg text-neutral-600 leading-relaxed whitespace-pre-line">{data.body}</motion.p>
      </div>
    );

    const MockupSlide = ({ data }) => {
      if (data.mockupType === 'intent-comparison') {
        return (
          <div className="h-full flex flex-col justify-center px-6 md:px-12 max-w-4xl mx-auto slide-scroll overflow-y-auto py-8">
            <motion.h2 initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} className="slide-title text-2xl md:text-3xl text-black text-center mb-4">{data.title}</motion.h2>
            <motion.p initial={{ opacity: 0, y: 10 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.1 }} className="text-sm text-neutral-600 text-center mb-8 max-w-2xl mx-auto">{data.description}</motion.p>
            <div className="relative w-full max-w-3xl mx-auto">
              <svg viewBox="0 0 500 300" className="w-full">
                <defs>
                  <linearGradient id="orangeGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                    <stop offset="0%" stopColor="#f97316" stopOpacity="0.8" />
                    <stop offset="100%" stopColor="#ea580c" stopOpacity="0.3" />
                  </linearGradient>
                  <linearGradient id="grayGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                    <stop offset="0%" stopColor="#9ca3af" stopOpacity="0.6" />
                    <stop offset="100%" stopColor="#6b7280" stopOpacity="0.2" />
                  </linearGradient>
                </defs>

                {/* Left side - Passive Discovery (Social) */}
                <motion.g initial={{ opacity: 0, x: -30 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.2 }}>
                  {/* Social feed icons */}
                  <rect x="40" y="80" width="160" height="180" fill="url(#grayGradient)" stroke="#9ca3af" strokeWidth="2" rx="8"/>
                  <text x="120" y="55" fontSize="14" fontWeight="600" textAnchor="middle" fill="#6b7280">Passive Discovery</text>
                  <text x="120" y="72" fontSize="11" textAnchor="middle" fill="#9ca3af">Social Media</text>

                  {/* Feed items */}
                  <rect x="55" y="95" width="130" height="20" fill="#e5e7eb" rx="4"/>
                  <circle cx="70" cy="105" r="6" fill="#9ca3af"/>
                  <rect x="85" y="100" width="85" height="3" fill="#d1d5db" rx="1"/>
                  <rect x="85" y="107" width="60" height="2" fill="#e5e7eb" rx="1"/>

                  <rect x="55" y="125" width="130" height="50" fill="#fca5a5" rx="4"/>
                  <text x="120" y="145" fontSize="9" textAnchor="middle" fill="#7f1d1d">Ad</text>
                  <text x="120" y="156" fontSize="7" textAnchor="middle" fill="#991b1b">Product Ad</text>
                  <text x="120" y="165" fontSize="6" textAnchor="middle" fill="#b91c1c">(Not searching for this)</text>

                  <rect x="55" y="185" width="130" height="20" fill="#e5e7eb" rx="4"/>
                  <circle cx="70" cy="195" r="6" fill="#9ca3af"/>
                  <rect x="85" y="190" width="85" height="3" fill="#d1d5db" rx="1"/>
                  <rect x="85" y="197" width="60" height="2" fill="#e5e7eb" rx="1"/>

                  <rect x="55" y="215" width="130" height="20" fill="#e5e7eb" rx="4"/>
                  <circle cx="70" cy="225" r="6" fill="#9ca3af"/>
                  <rect x="85" y="220" width="85" height="3" fill="#d1d5db" rx="1"/>
                  <rect x="85" y="227" width="60" height="2" fill="#e5e7eb" rx="1"/>

                  <text x="120" y="275" fontSize="10" fontWeight="600" textAnchor="middle" fill="#ef4444">Low Intent</text>
                </motion.g>

                {/* Divider line */}
                <motion.line
                  initial={{ scaleY: 0 }}
                  animate={{ scaleY: 1 }}
                  transition={{ delay: 0.4 }}
                  x1="250" y1="60" x2="250" y2="280"
                  stroke="#d4d4d8"
                  strokeWidth="2"
                  strokeDasharray="5,5"
                  style={{ transformOrigin: 'center' }}
                />

                {/* Right side - Active Intent (Google Shopping) */}
                <motion.g initial={{ opacity: 0, x: 30 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.3 }}>
                  <text x="380" y="55" fontSize="14" fontWeight="600" textAnchor="middle" fill="#ea580c">Active Intent</text>
                  <text x="380" y="72" fontSize="11" textAnchor="middle" fill="#f97316">Google Shopping</text>

                  {/* Search bar */}
                  <rect x="300" y="80" width="160" height="30" fill="white" stroke="#f97316" strokeWidth="3" rx="15"/>
                  <text x="380" y="100" fontSize="10" textAnchor="middle" fill="#374151">men's corduroy trousers</text>
                  <circle cx="445" cy="95" r="8" fill="#f97316"/>
                  <path d="M 442 92 L 448 98" stroke="white" strokeWidth="2"/>

                  {/* Shopping results */}
                  <rect x="300" y="120" width="160" height="140" fill="url(#orangeGradient)" stroke="#f97316" strokeWidth="2" rx="8"/>

                  {/* Product 1 */}
                  <rect x="315" y="135" width="50" height="50" fill="#fdba74" stroke="#f97316" strokeWidth="1" rx="4"/>
                  <text x="340" y="160" fontSize="20" textAnchor="middle">ðŸ‘–</text>
                  <rect x="375" y="140" width="70" height="8" fill="#ea580c" opacity="0.3" rx="2"/>
                  <rect x="375" y="152" width="55" height="6" fill="#f97316" opacity="0.2" rx="2"/>
                  <text x="375" y="172" fontSize="9" fontWeight="600" fill="#7c2d12">$49.99</text>

                  {/* Product 2 */}
                  <rect x="315" y="195" width="50" height="50" fill="#fdba74" stroke="#f97316" strokeWidth="1" rx="4"/>
                  <text x="340" y="220" fontSize="20" textAnchor="middle">ðŸ‘–</text>
                  <rect x="375" y="200" width="70" height="8" fill="#ea580c" opacity="0.3" rx="2"/>
                  <rect x="375" y="212" width="55" height="6" fill="#f97316" opacity="0.2" rx="2"/>
                  <text x="375" y="232" fontSize="9" fontWeight="600" fill="#7c2d12">$44.99</text>

                  <text x="380" y="275" fontSize="10" fontWeight="700" textAnchor="middle" fill="#15803d">High Intent</text>
                </motion.g>

                {/* Labels at bottom */}
                <motion.text
                  initial={{ opacity: 0 }}
                  animate={{ opacity: 1 }}
                  transition={{ delay: 0.6 }}
                  x="120" y="295" fontSize="8" textAnchor="middle" fill="#9ca3af">
                  Scrolling feeds
                </motion.text>
                <motion.text
                  initial={{ opacity: 0 }}
                  animate={{ opacity: 1 }}
                  transition={{ delay: 0.6 }}
                  x="380" y="295" fontSize="8" textAnchor="middle" fill="#ea580c">
                  Searching to buy
                </motion.text>
              </svg>
            </div>
          </div>
        );
      }
    };

    const QuizSlide = ({ data, onAnswer, onShowGif, onHideGif }) => {
      const [selected, setSelected] = useState(null);
      const [answered, setAnswered] = useState(false);
      const handleSelect = (index) => {
        if (answered) return;
        setSelected(index);
        setAnswered(true);
        const isCorrect = index === data.correctIndex;
        const gif = isCorrect ? getRandomCelebrationGif() : getRandomEmpathyGif();
        onShowGif(gif, '50%', 'center');
        setTimeout(() => onHideGif(), 3000);
        onAnswer(isCorrect);
      };

      return (
        <div className="h-full flex flex-col justify-center px-6 md:px-12 max-w-3xl mx-auto slide-scroll overflow-y-auto py-8">
          <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} className="text-center mb-6">
            <span className="inline-block px-3 py-1 rounded-full text-xs font-semibold mb-3" style={{ background: `rgba(var(--accent-rgb), 0.1)`, color: 'var(--accent)' }}>Knowledge Check</span>
            <h2 className="slide-title text-xl md:text-2xl text-black">{data.question}</h2>
          </motion.div>
          <div className="space-y-3 mb-6">
            {data.options.map((option, i) => (
              <motion.button key={i} initial={{ opacity: 0, x: -20 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.1 + i * 0.05 }} onClick={() => handleSelect(i)} disabled={answered} className={`w-full text-left p-4 rounded-xl border-2 transition-all ${answered ? (i === data.correctIndex ? 'border-green-500 bg-green-50' : i === selected ? 'border-red-500 bg-red-50' : 'border-neutral-200 bg-neutral-50') : 'border-neutral-200 bg-white hover:border-orange-300 hover:bg-orange-50'}`}>
                <div className="flex items-center gap-3">
                  <div className={`w-6 h-6 rounded-full flex items-center justify-center flex-shrink-0 ${answered ? (i === data.correctIndex ? 'bg-green-500' : i === selected ? 'bg-red-500' : 'bg-neutral-300') : 'bg-neutral-200'}`}>
                    {answered && i === data.correctIndex && <Icons.Check className="text-white" />}
                    {answered && i === selected && i !== data.correctIndex && <Icons.X className="text-white" />}
                  </div>
                  <span className="text-sm md:text-base text-neutral-700">{option}</span>
                </div>
              </motion.button>
            ))}
          </div>
          <AnimatePresence>
            {answered && (
              <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} exit={{ opacity: 0 }} className={`rounded-xl p-4 ${selected === data.correctIndex ? 'bg-green-50 border-2 border-green-200' : 'bg-orange-50 border-2 border-orange-200'}`}>
                <p className="text-sm text-neutral-700 leading-relaxed">{selected === data.correctIndex ? data.feedback.correct : data.feedback.incorrect}</p>
              </motion.div>
            )}
          </AnimatePresence>
        </div>
      );
    };

    const CompletionSlide = ({ data }) => (
      <div className="h-full flex flex-col justify-center items-center text-center px-6 py-10">
        <motion.div initial={{ scale: 0 }} animate={{ scale: 1 }} transition={{ type: 'spring', duration: 0.6 }}>
          <div className="w-20 h-20 rounded-full flex items-center justify-center mb-4 mx-auto" style={{ background: `linear-gradient(135deg, var(--accent), var(--accent-dark))` }}>
            <Icons.Check className="text-white" />
          </div>
        </motion.div>
        <motion.h2 initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.2 }} className="slide-title text-3xl md:text-4xl text-black mb-3">Lesson Complete!</motion.h2>
        <motion.p initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.3 }} className="text-neutral-600 text-base md:text-lg mb-6 max-w-md">You now understand why active purchase intent on Google Shopping beats passive discovery on social media.</motion.p>
        {data.sources && data.sources.length > 0 && (
          <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.4 }} className="bg-neutral-50 rounded-xl p-4 max-w-md w-full mb-6">
            <p className="text-xs uppercase tracking-wider text-neutral-400 mb-2">Sources</p>
            {data.sources.map((source, i) => (
              <a key={i} href={source.url} target="_blank" rel="noopener noreferrer" className="text-sm hover:underline block mb-1" style={{ color: 'var(--accent)' }}>{source.name}</a>
            ))}
          </motion.div>
        )}
        <motion.button initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.5 }} onClick={() => window.location.href = '/dashboard'} className="px-6 py-3 rounded-xl text-white font-semibold" style={{ background: `linear-gradient(135deg, var(--accent), var(--accent-dark))` }}>Back to Dashboard</motion.button>
      </div>
    );

    const LessonApp = () => {
      const [currentSlide, setCurrentSlide] = useState(0);
      const [direction, setDirection] = useState(0);
      const [userName] = useState(getUserName());
      const [gif, setGif] = useState({ src: null, opacity: 0, side: 'center' });

      const showGif = useCallback((src, opacity, side) => { setGif({ src, opacity, side }); }, []);
      const hideGif = useCallback(() => { setGif(prev => ({ ...prev, opacity: 0 })); }, []);

      const nextSlide = useCallback(() => {
        if (currentSlide < slides.length - 1) {
          setDirection(1);
          setCurrentSlide(prev => prev + 1);
        }
      }, [currentSlide]);

      const prevSlide = useCallback(() => {
        if (currentSlide > 0) {
          setDirection(-1);
          setCurrentSlide(prev => prev - 1);
        }
      }, [currentSlide]);

      const startLesson = useCallback(() => {
        setDirection(1);
        setCurrentSlide(1);
      }, []);

      const handleAnswer = useCallback((correct) => {
        setTimeout(nextSlide, 3000);
      }, [nextSlide]);

      const renderSlide = (slide) => {
        switch (slide.type) {
          case 'welcome': return <WelcomeSlide data={slide} onStart={startLesson} userName={userName} onShowGif={showGif} onHideGif={hideGif} />;
          case 'hook': return <HookSlide data={slide} />;
          case 'content': return <ContentSlide data={slide} />;
          case 'mockup': return <MockupSlide data={slide} />;
          case 'quiz': return <QuizSlide data={slide} onAnswer={handleAnswer} onShowGif={showGif} onHideGif={hideGif} />;
          case 'completion': return <CompletionSlide data={slide} />;
          default: return <ContentSlide data={slide} />;
        }
      };

      return (
        <div className="fixed inset-0 bg-white overflow-hidden">
          {gif.src && (
            <motion.div animate={{ opacity: gif.opacity }} initial={{ opacity: 0 }} transition={{ duration: 0.3 }} className="fixed inset-0 pointer-events-none z-50 flex items-center justify-center">
              <video src={gif.src} autoPlay loop muted playsInline className="h-2/3 object-contain" style={{ [gif.side]: '10%' }} />
            </motion.div>
          )}
          <AnimatePresence mode="wait" custom={direction}>
            <motion.div key={currentSlide} custom={direction} initial={{ opacity: 0, x: direction > 0 ? 100 : -100 }} animate={{ opacity: 1, x: 0 }} exit={{ opacity: 0, x: direction > 0 ? -100 : 100 }} transition={{ duration: 0.3 }} className="absolute inset-0">
              {renderSlide(slides[currentSlide])}
            </motion.div>
          </AnimatePresence>
          {currentSlide > 0 && currentSlide < slides.length - 1 && (
            <div className="fixed bottom-8 left-1/2 transform -translate-x-1/2 z-30 flex items-center gap-4">
              <button onClick={prevSlide} disabled={currentSlide === 0} className="w-10 h-10 rounded-full bg-white border-2 border-neutral-200 flex items-center justify-center hover:border-orange-300 disabled:opacity-30 disabled:cursor-not-allowed transition-all"><Icons.ArrowLeft /></button>
              <div className="flex gap-1">
                {slides.map((_, i) => (
                  <div key={i} className="w-1.5 h-1.5 rounded-full transition-all" style={{ background: i === currentSlide ? 'var(--accent)' : '#d4d4d8' }} />
                ))}
              </div>
              <button onClick={nextSlide} disabled={currentSlide === slides.length - 1} className="w-10 h-10 rounded-full flex items-center justify-center text-white disabled:opacity-30 disabled:cursor-not-allowed transition-all" style={{ background: `linear-gradient(135deg, var(--accent), var(--accent-dark))` }}><Icons.ArrowRight /></button>
            </div>
          )}
        </div>
      );
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<LessonApp />);
  </script>
</body>
</html>
