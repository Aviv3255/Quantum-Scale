<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Creative is the New Targeting | Quantum Scale</title>
  <script src="https://cdn.tailwindcss.com" defer></script>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" defer></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" defer></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js" defer></script>
  <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js" defer></script>
  <script src="../shared/greetings.js" defer></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fraunces:wght@400;500;600;700;800;900&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --accent: #D4A017; --accent-dark: #B8860B; --accent-light: #F4D03F; --accent-rgb: 212, 160, 23;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: 'Inter', sans-serif; background: transparent; -webkit-font-smoothing: antialiased; }
    .title-font { font-family: 'Fraunces', serif; font-weight: 900; letter-spacing: -0.02em; line-height: 1.1; }
    h1, h2, h3, .slide-title { font-family: 'Fraunces', serif; font-weight: 900; letter-spacing: -0.02em; line-height: 1.1; }
    ::selection { background: var(--accent); color: white; }
    .slide-scroll::-webkit-scrollbar { display: none; }
    .slide-scroll { -ms-overflow-style: none; scrollbar-width: none; }
  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState, useEffect, useMemo, useCallback, useRef } = React;
    const { motion, AnimatePresence } = window.Motion;

    const LESSON_CONFIG = {
      id: 'biz-creative-targeting',
      title: 'Creative is the New Targeting',
      accentColor: '#D4A017',
      duration: '7 min',
      nextLesson: { id: 'biz-infinite-money-loop', title: 'The Infinite Money Loop', teaser: 'Discover the flywheel that turns $1 into $10 repeatedly.' }
    };

    const celebrationGifs = [
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_doing_a_quick_victory_dance_move_high_energy_c_d03b798b-a518-4e6c-bcae-d69b2dd50486_2.mp4',
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_jumping_in_the_air_arms_raised_high_YESSS_cele_201477e8-3df4-405a-bc81-81d1747e5c6c_2.mp4',
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_giving_a_double_thumbs_up_huge_grin_leaning_sl_14c9727f-6fe9-43d1-9d6d-59fc30831817_2.mp4',
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_doing_a_mini_celebration_fist_bump_to_the_sky__ca048b03-4638-44da-b995-bffdb6e16c60_2.mp4',
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_giving_an_encouraging_nod_with_a_slight_smile__9399498c-7bb5-4e58-9541-09b5207832f1_2.mp4'
    ];
    const empathyGifs = [
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_thumbs_down_with_encouraging_nod_close_keep_go_613e541f-c072-436f-aee7-f99cd6f834fc_2.mp4',
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_shrugging_casually_with_a_knowing_smile_Its_o_e1c91bfc-ed8e-4d00-b5fd-adaa5b52c53b_2.mp4',
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_doing_a_so-so_hand_gesture_with_encouraging_ex_e8d19ac3-3d26-4442-9c4f-2b6eb0e0e7ee_2.mp4'
    ];
    const getRandomGif = (gifs) => gifs[Math.floor(Math.random() * gifs.length)];

    const Icons = {
      Clock: () => (<svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" strokeWidth="2"/><path strokeWidth="2" d="M12 6v6l4 2"/></svg>),
      ChevronLeft: () => (<svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M15 19l-7-7 7-7"/></svg>),
      ChevronRight: () => (<svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9 5l7 7-7 7"/></svg>),
      Check: () => (<svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2.5" d="M5 13l4 4L19 7"/></svg>),
      X: () => (<svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2.5" d="M6 18L18 6M6 6l12 12"/></svg>),
      Sparkles: () => (<svg className="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456z"/></svg>),
      ArrowRight: () => (<svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/></svg>),
      Layers: () => (<svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M4 7v10c0 2 1 3 3 3h10c2 0 3-1 3-3V7c0-2-1-3-3-3H7C5 4 4 5 4 7zM4 12h16M12 4v16"/></svg>),
      BarChart: () => (<svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/></svg>),
      Palette: () => (<svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"/></svg>),
      Target: () => (<svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" strokeWidth="2"/><circle cx="12" cy="12" r="6" strokeWidth="2"/><circle cx="12" cy="12" r="2" strokeWidth="2"/></svg>),
      Zap: () => (<svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/></svg>),
      Repeat: () => (<svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/></svg>)
    };

    const slides = [
      { type: 'welcome', learningGoals: ['Why creative volume beats audience targeting', 'The 3 pillars: Volume, Diversity, Measurement', 'How to feed the Meta AI beast'] },
      { type: 'hook', headline: 'Targeting is dead.', subtext: 'Meta\'s AI knows who to show your ads to better than you ever could. Your biggest lever isn\'t WHO you target. It\'s WHAT they see.' },
      { type: 'stats', title: 'The New Reality of Meta Ads', subtitle: 'Andromeda AI changed everything in 2024', stats: [
        { value: '100s', label: 'Ads launched per week by winners', color: '#3b82f6' },
        { value: '4x', label: 'More winning creatives from volume', color: '#22c55e' },
        { value: '$100K', label: 'Daily cap per winning creative', color: 'var(--accent)' },
        { value: '10+', label: 'Winners needed for $1M/day spend', color: '#8b5cf6' }
      ] },
      { type: 'content', title: 'The Old Playbook is Gone', body: "Hyper-targeted audiences. Interest stacking. Custom lookalikes. All outdated. Meta's Andromeda AI handles targeting now. Your job changed: give the AI options. 100 ads? It finds winners. 5 ads? You're gambling.", highlight: "The bottleneck shifted from finding customers to producing creative." },
      { type: 'triangle', title: 'The Creative Triangle', subtitle: 'Master all three to win at scale', pillars: [
        { name: 'VOLUME', color: '#3B82F6', desc: '100s of ads', position: 'top' },
        { name: 'DIVERSITY', color: '#10B981', desc: 'Different angles', position: 'left' },
        { name: 'MEASURE', color: '#F59E0B', desc: 'Track what works', position: 'right' }
      ] },
      { type: 'cards', title: 'The Three Pillars Explained', cards: [
        { icon: 'Layers', title: 'Volume', desc: 'Launch hundreds of ads per week. One winner might max at $100K/day. Need more winners to spend more.', color: '#3B82F6' },
        { icon: 'Palette', title: 'Diversity', desc: 'A new background color isn\'t enough. Different formats, angles, hooks, talent. Radically different.', color: '#10B981' },
        { icon: 'BarChart', title: 'Measurement', desc: 'Track concepts, hooks, edits with MTA tools. Data drives decisions. Gut instinct gets expensive.', color: '#F59E0B' }
      ] },
      { type: 'example', title: 'Old Way vs New Way', before: { label: 'Targeting Focus', items: ['Hyper-targeted audiences', 'Interest stacking', 'Custom lookalikes', '5-10 ads per month'] }, after: { label: 'Creative Focus', items: ['Broad targeting', 'Volume production', 'Diverse creative', '100+ ads per week'] } },
      { type: 'content', title: 'Volume: The Math', body: "One winning ad maxes out at ~$100K/day spend. To spend $1M/day? You need 10 winners running. To spend $10M/day? 100 winners. You can't find winners without volume.", highlight: "The AI needs options to test. Feed the beast or starve." },
      { type: 'content', title: 'Diversity: What It Actually Means', body: "Tweaking a background isn't diversity. You need: UGC vs studio production, pain point A vs pain point B, question hooks vs statement hooks, \"pretty people\" vs \"real people\".", highlight: "Radically different creative = more signals for the AI to test." , characterVideo: 'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_weighing_options_scales_in_hands_100_pure_whit_8cbe7780-615e-48f5-aafe-2184114c1b33_2.mp4', characterPosition: 'right'},
      { type: 'flywheel', title: 'The Creative Flywheel', steps: [
        { label: 'LAUNCH', desc: '100s of ads', color: '#3B82F6' },
        { label: 'MEASURE', desc: 'MTA tracking', color: '#10B981' },
        { label: 'LEARN', desc: 'Find patterns', color: '#F59E0B' },
        { label: 'ITERATE', desc: 'More winners', color: '#EF4444' }
      ] },
      { type: 'content', title: 'Naming Convention System', body: "Every ad needs a naming convention. Format: [Product]_[Angle]_[Hook]_[Format]_[Version]. Example: Skincare_AntiAging_Question_UGC_v1. Now you can see which hooks outperform, which formats win.", highlight: "Data drives better creative. 'Question hooks beat stats by 30%' - that's actionable." },
      { type: 'quiz', question: 'What is the biggest lever in Meta ads at scale?', options: ['Hyper-targeted audience segmentation', 'Creative volume and diversity', 'Increasing daily ad spend', 'Retargeting campaigns'], correctIndex: 1, feedback: { correct: "Exactly! Creative volume and diversity is the biggest lever. The AI needs OPTIONS to find winners.", incorrect: "Not quite. Andromeda is so advanced that creative matters more than targeting. Give the AI more options." } },
      { type: 'action-checklist', title: 'Your Creative System', items: ['Set up naming conventions for all ads', 'Build a creative production pipeline (aim for 100+/week)', 'Implement MTA tracking to measure what works', 'Kill losers fast, scale winners hard'] },
      { type: 'completion' }
    ];

    const WelcomeSlide = ({ data, onStart, userName, onShowGif, onHideGif }) => {
      const welcomeData = useMemo(() => getTimeBasedWelcome(), []);
      const gifSide = useMemo(() => Math.random() > 0.5 ? 'left' : 'right', []);
      useEffect(() => { onShowGif(welcomeData.gif, '65%', gifSide); return () => onHideGif(); }, [welcomeData.gif, gifSide, onShowGif, onHideGif]);

      return (
        <div className="h-full w-full relative overflow-hidden">
          <div className="h-full flex flex-col items-center justify-center text-center px-6 py-4 relative z-20">
            <motion.h1 initial={{ opacity: 0, y: 40 }} animate={{ opacity: 1, y: 0 }} className="title-font text-3xl sm:text-4xl md:text-5xl lg:text-6xl text-black mb-2 md:mb-3">{LESSON_CONFIG.title}</motion.h1>
            <motion.p initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.1 }} className="text-neutral-600 text-base md:text-lg lg:text-xl mb-2 md:mb-3 max-w-lg leading-relaxed" dangerouslySetInnerHTML={{ __html: formatGreeting(welcomeData.greeting, `<span class="font-bold text-neutral-900">${userName}</span>`) }} />
            <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.15 }} className="flex items-center justify-center gap-1.5 text-neutral-400 text-[10px] md:text-xs mb-2 md:mb-3"><Icons.Clock /><span>{LESSON_CONFIG.duration}</span></motion.div>
            <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.2 }} className="bg-neutral-900 rounded-xl md:rounded-2xl p-3 md:p-5 mb-3 md:mb-4 max-w-sm w-full mx-auto">
              <p className="text-neutral-500 text-[9px] md:text-[11px] uppercase tracking-wider mb-2 md:mb-3">In this lesson</p>
              <ul className="space-y-1.5 md:space-y-2">
                {data.learningGoals.map((goal, i) => (
                  <motion.li key={i} initial={{ opacity: 0, x: -10 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.25 + i * 0.05 }} className="flex items-start gap-2 text-left">
                    <span className="w-5 h-5 rounded-md flex items-center justify-center text-[9px] font-bold text-white flex-shrink-0 mt-0.5" style={{ background: `linear-gradient(135deg, var(--accent), var(--accent-dark))` }}>{i + 1}</span>
                    <span className="text-neutral-300 text-[11px] md:text-sm leading-snug">{goal}</span>
                  </motion.li>
                ))}
              </ul>
            </motion.div>
            <motion.button initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.45 }} onClick={onStart} whileHover={{ scale: 1.02 }} whileTap={{ scale: 0.98 }} className="px-6 md:px-7 py-2.5 md:py-3 rounded-xl text-white font-semibold text-sm md:text-base" style={{ background: `linear-gradient(135deg, var(--accent), var(--accent-dark))` }}>Let's Go</motion.button>
          </div>
        </div>
      );
    };

    const HookSlide = ({ data }) => (
      <div className="h-full relative overflow-hidden">
        <div className="h-full flex flex-col justify-center px-8 md:px-16 max-w-3xl mx-auto slide-scroll overflow-y-auto py-10 relative z-10">
          <motion.div initial={{ opacity: 0, y: 40 }} animate={{ opacity: 1, y: 0 }} className="mb-6">
            <span className="inline-block px-3 py-1 rounded-full text-xs font-semibold mb-4" style={{ background: `rgba(var(--accent-rgb), 0.1)`, color: 'var(--accent)' }}>The Hook</span>
            <h2 className="slide-title text-3xl md:text-4xl lg:text-5xl text-black leading-tight">{data.headline}</h2>
          </motion.div>
          <motion.p initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.15 }} className="text-lg md:text-xl text-neutral-600 leading-relaxed">{data.subtext}</motion.p>
        </div>
        {data.brandImage && (
          <motion.div initial={{ opacity: 0, x: 30 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.3, duration: 0.5 }}
            className="absolute bottom-0 right-0 z-0 pointer-events-none" style={{ height: '30%', maxHeight: '200px', marginRight: '3%', marginBottom: '5%' }}>
            <img src={data.brandImage} alt={data.brandName || ''} className="h-full w-auto object-contain" style={{ opacity: 1 }} />
          </motion.div>
        )}
      </div>
    );

    const StatsSlide = ({ data }) => (
      <div className="h-full flex flex-col items-center justify-center px-6 py-12 overflow-y-auto hide-scrollbar">
        <motion.div initial={{ opacity: 0, y: 40 }} animate={{ opacity: 1, y: 0 }} className="max-w-4xl w-full">
          <h2 className="slide-title text-3xl md:text-4xl text-black text-center mb-2">{data.title}</h2>
          <p className="text-neutral-500 text-center mb-8">{data.subtitle}</p>
          <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
            {data.stats.map((stat, i) => (
              <motion.div key={i} initial={{ opacity: 0, y: 40 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.1 * i }} className="bg-gradient-to-br from-neutral-900 to-neutral-800 rounded-2xl p-5 text-center">
                <motion.div initial={{ scale: 0 }} animate={{ scale: 1 }} transition={{ delay: 0.2 + i * 0.1, type: 'spring' }} className="text-3xl md:text-4xl font-black mb-2" style={{ color: stat.color }}>{stat.value}</motion.div>
                <p className="text-neutral-400 text-xs md:text-sm">{stat.label}</p>
              </motion.div>
            ))}
          </div>
        </motion.div>
      </div>
    );

    const ContentSlide = ({ data }) => (
      <div className="h-full flex flex-col items-center justify-center px-6 py-12 overflow-y-auto hide-scrollbar">
        <motion.div initial={{ opacity: 0, y: 40 }} animate={{ opacity: 1, y: 0 }} className="max-w-2xl w-full">
          <h2 className="title-font text-3xl md:text-4xl font-black text-neutral-900 mb-6">{data.title}</h2>
          <p className="text-lg md:text-xl text-neutral-600 leading-relaxed mb-6">{data.body}</p>
          {data.highlight && (
            <motion.div initial={{ opacity: 0, y: 10 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.3 }} className="p-5 rounded-xl border-l-4" style={{ backgroundColor: 'rgba(var(--accent-rgb), 0.1)', borderColor: 'var(--accent)' }}>
              <p className="text-neutral-800 font-medium">{data.highlight}</p>
            </motion.div>
          )}
        </motion.div>
      
        {data.characterVideo && (
          <motion.div
            initial={{ opacity: 0, y: 40 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ delay: 0.4, duration: 0.6 }}
            className={`absolute bottom-0 ${data.characterPosition === 'left' ? 'left-6' : 'right-6'} z-0 pointer-events-none`}
            style={{ height: '35%', maxHeight: '280px' }}>
            <video autoPlay loop muted playsInline className="h-full w-auto object-contain object-bottom">
              <source src={data.characterVideo} type="video/mp4" />
            </video>
          </motion.div>
        )}
      </div>
    );

    const TriangleSlide = ({ data }) => (
      <div className="h-full flex flex-col items-center justify-center px-6 py-12 overflow-y-auto hide-scrollbar">
        <motion.div initial={{ opacity: 0, y: 40 }} animate={{ opacity: 1, y: 0 }} className="max-w-lg w-full text-center">
          <h2 className="title-font text-3xl md:text-4xl font-black text-neutral-900 mb-2">{data.title}</h2>
          <p className="text-neutral-500 mb-10">{data.subtitle}</p>
          <div className="relative" style={{ height: '280px' }}>
            {/* Triangle lines */}
            <svg className="absolute inset-0 w-full h-full" viewBox="0 0 300 250">
              <path d="M150 30 L270 220 L30 220 Z" fill="none" stroke="var(--accent)" strokeWidth="2" strokeDasharray="8,4" opacity="0.5" />
            </svg>
            {/* Top - Volume */}
            <motion.div initial={{ opacity: 0, y: -20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.2 }} className="absolute top-0 left-1/2 -translate-x-1/2">
              <div className="w-20 h-20 rounded-full flex flex-col items-center justify-center" style={{ backgroundColor: 'rgba(59, 130, 246, 0.15)', border: '2px solid #3B82F6' }}>
                <span className="font-bold text-xs" style={{ color: '#3B82F6' }}>VOLUME</span>
                <span className="text-[10px] text-neutral-500">100s of ads</span>
              </div>
            </motion.div>
            {/* Bottom Left - Diversity */}
            <motion.div initial={{ opacity: 0, x: -20 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.3 }} className="absolute bottom-0 left-0">
              <div className="w-20 h-20 rounded-full flex flex-col items-center justify-center" style={{ backgroundColor: 'rgba(16, 185, 129, 0.15)', border: '2px solid #10B981' }}>
                <span className="font-bold text-xs" style={{ color: '#10B981' }}>DIVERSITY</span>
                <span className="text-[10px] text-neutral-500">Diff angles</span>
              </div>
            </motion.div>
            {/* Bottom Right - Measure */}
            <motion.div initial={{ opacity: 0, x: 20 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.4 }} className="absolute bottom-0 right-0">
              <div className="w-20 h-20 rounded-full flex flex-col items-center justify-center" style={{ backgroundColor: 'rgba(245, 158, 11, 0.15)', border: '2px solid #F59E0B' }}>
                <span className="font-bold text-xs" style={{ color: '#F59E0B' }}>MEASURE</span>
                <span className="text-[10px] text-neutral-500">Track what</span>
              </div>
            </motion.div>
            {/* Center - Winning System */}
            <motion.div initial={{ opacity: 0, scale: 0.8 }} animate={{ opacity: 1, scale: 1 }} transition={{ delay: 0.5 }} className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/4">
              <div className="w-16 h-16 rounded-full flex flex-col items-center justify-center" style={{ backgroundColor: 'rgba(var(--accent-rgb), 0.15)', border: '2px solid var(--accent)' }}>
                <span className="font-bold text-[10px] text-neutral-800">WINNING</span>
                <span className="font-bold text-[10px] text-neutral-800">SYSTEM</span>
              </div>
            </motion.div>
          </div>
        </motion.div>
      </div>
    );

    const CardsSlide = ({ data }) => {
      const IconComponent = ({ name }) => {
        const icons = { Layers: Icons.Layers, Palette: Icons.Palette, BarChart: Icons.BarChart };
        const Icon = icons[name];
        return Icon ? <Icon /> : null;
      };
      return (
        <div className="h-full flex flex-col items-center justify-center px-6 py-12 overflow-y-auto hide-scrollbar">
          <motion.div initial={{ opacity: 0, y: 40 }} animate={{ opacity: 1, y: 0 }} className="max-w-4xl w-full">
            <h2 className="title-font text-3xl md:text-4xl font-black text-neutral-900 mb-8 text-center">{data.title}</h2>
            <div className="grid md:grid-cols-3 gap-4">
              {data.cards.map((card, i) => (
                <motion.div key={i} initial={{ opacity: 0, y: 40 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.1 * i }} className="bg-white border border-neutral-200 rounded-xl p-5 shadow-sm hover:shadow-md transition-shadow">
                  <div className="w-12 h-12 rounded-xl flex items-center justify-center mb-4" style={{ backgroundColor: `${card.color}15`, color: card.color }}>
                    <IconComponent name={card.icon} />
                  </div>
                  <h3 className="font-bold text-neutral-900 text-lg mb-2">{card.title}</h3>
                  <p className="text-neutral-500 text-sm">{card.desc}</p>
                </motion.div>
              ))}
            </div>
          </motion.div>
        </div>
      );
    };

    const ExampleSlide = ({ data }) => (
      <div className="h-full flex flex-col items-center justify-center px-6 py-12 overflow-y-auto hide-scrollbar">
        <motion.div initial={{ opacity: 0, y: 40 }} animate={{ opacity: 1, y: 0 }} className="max-w-4xl w-full">
          <h2 className="title-font text-3xl md:text-4xl font-black text-neutral-900 mb-8 text-center">{data.title}</h2>
          <div className="grid md:grid-cols-2 gap-6">
            <motion.div initial={{ opacity: 0, x: -20 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.2 }} className="bg-red-50 border-2 border-red-200 rounded-2xl p-6">
              <div className="flex items-center gap-2 mb-4">
                <span className="text-2xl">‚ùå</span>
                <span className="font-bold text-red-700 text-lg">{data.before.label}</span>
              </div>
              <ul className="space-y-3">{data.before.items.map((item, i) => (<li key={i} className="flex items-start gap-2 text-red-900"><span className="text-red-400 mt-1">‚Ä¢</span><span className="text-sm md:text-base">{item}</span></li>))}</ul>
            </motion.div>
            <motion.div initial={{ opacity: 0, x: 20 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.3 }} className="bg-green-50 border-2 border-green-200 rounded-2xl p-6">
              <div className="flex items-center gap-2 mb-4">
                <span className="text-2xl">‚úÖ</span>
                <span className="font-bold text-green-700 text-lg">{data.after.label}</span>
              </div>
              <ul className="space-y-3">{data.after.items.map((item, i) => (<li key={i} className="flex items-start gap-2 text-green-900"><span className="text-green-500 mt-1">‚Ä¢</span><span className="text-sm md:text-base">{item}</span></li>))}</ul>
            </motion.div>
          </div>
        </motion.div>
      </div>
    );

    const FlywheelSlide = ({ data }) => (
      <div className="h-full flex flex-col items-center justify-center px-6 py-12 overflow-y-auto hide-scrollbar">
        <motion.div initial={{ opacity: 0, y: 40 }} animate={{ opacity: 1, y: 0 }} className="max-w-lg w-full text-center">
          <h2 className="title-font text-3xl md:text-4xl font-black text-neutral-900 mb-10">{data.title}</h2>
          <div className="relative" style={{ height: '260px' }}>
            {/* Circle connector */}
            <svg className="absolute inset-0 w-full h-full" viewBox="0 0 300 260">
              <circle cx="150" cy="130" r="85" fill="none" stroke="var(--accent)" strokeWidth="2" strokeDasharray="8,4" opacity="0.5" />
              {/* Arrows */}
              <defs><marker id="arrow" markerWidth="8" markerHeight="6" refX="6" refY="3" orient="auto"><polygon points="0 0, 8 3, 0 6" fill="var(--accent)"/></marker></defs>
              <path d="M200 55 Q230 85 230 115" fill="none" stroke="var(--accent)" strokeWidth="2" markerEnd="url(#arrow)" />
              <path d="M220 165 Q200 195 170 205" fill="none" stroke="var(--accent)" strokeWidth="2" markerEnd="url(#arrow)" />
              <path d="M100 195 Q70 175 60 145" fill="none" stroke="var(--accent)" strokeWidth="2" markerEnd="url(#arrow)" />
              <path d="M70 95 Q90 65 120 55" fill="none" stroke="var(--accent)" strokeWidth="2" markerEnd="url(#arrow)" />
            </svg>
            {/* Steps */}
            {data.steps.map((step, i) => {
              const positions = [
                { top: '0', left: '50%', transform: 'translateX(-50%)' },
                { top: '35%', right: '0' },
                { bottom: '0', left: '50%', transform: 'translateX(-50%)' },
                { top: '35%', left: '0' }
              ];
              return (
                <motion.div key={i} initial={{ opacity: 0, scale: 0.8 }} animate={{ opacity: 1, scale: 1 }} transition={{ delay: 0.15 * i }} className="absolute" style={positions[i]}>
                  <div className="w-16 h-16 rounded-full flex flex-col items-center justify-center" style={{ backgroundColor: `${step.color}20`, border: `2px solid ${step.color}` }}>
                    <span className="font-bold text-[10px]" style={{ color: step.color }}>{step.label}</span>
                    <span className="text-[8px] text-neutral-500">{step.desc}</span>
                  </div>
                </motion.div>
              );
            })}
          </div>
          <motion.p initial={{ opacity: 0 }} animate={{ opacity: 1 }} transition={{ delay: 0.6 }} className="text-neutral-600 font-medium mt-4 text-sm">Never stop spinning. Volume creates options. Options create winners.</motion.p>
        </motion.div>
      </div>
    );

    const QuizSlide = ({ data, onAnswer, showFeedback, selectedAnswer, onShowGif, onHideGif }) => {
      const isCorrect = selectedAnswer === data.correctIndex;
      useEffect(() => {
        if (showFeedback) {
          const gif = isCorrect ? getRandomGif(celebrationGifs) : getRandomGif(empathyGifs);
          const side = Math.random() > 0.5 ? 'left' : 'right';
          onShowGif(gif, '60%', side);
        }
        return () => { if (showFeedback) onHideGif(); };
      }, [showFeedback, isCorrect, onShowGif, onHideGif]);
      return (
        <div className="h-full flex flex-col items-center justify-center px-6 py-12 overflow-y-auto hide-scrollbar">
          <motion.div initial={{ opacity: 0, y: 40 }} animate={{ opacity: 1, y: 0 }} className="max-w-2xl w-full">
            <div className="inline-flex items-center gap-2 px-4 py-2 rounded-full text-sm font-semibold mb-6" style={{ backgroundColor: 'rgba(var(--accent-rgb), 0.15)', color: 'var(--accent-dark)' }}><Icons.Sparkles /> Quick Check</div>
            <h2 className="title-font text-2xl md:text-3xl font-black text-neutral-900 mb-8">{data.question}</h2>
            <div className="space-y-3 mb-6">
              {data.options.map((option, i) => {
                const isSelected = selectedAnswer === i;
                const isCorrectOption = i === data.correctIndex;
                let btnClass = "w-full p-4 md:p-5 text-left rounded-xl border-2 transition-all ";
                if (showFeedback) {
                  if (isCorrectOption) btnClass += "border-green-500 bg-green-50";
                  else if (isSelected && !isCorrectOption) btnClass += "border-red-500 bg-red-50";
                  else btnClass += "border-neutral-200 opacity-50";
                } else {
                  btnClass += "border-neutral-200 hover:border-neutral-400 cursor-pointer";
                }
                return (
                  <motion.button key={i} onClick={() => !showFeedback && onAnswer(i)} disabled={showFeedback} className={btnClass}>
                    <div className="flex items-center gap-3">
                      <span className="flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold" style={{ backgroundColor: isSelected ? (isCorrectOption ? '#22c55e' : '#ef4444') : 'var(--accent)', color: isSelected ? 'white' : '#1a1a1a' }}>
                        {showFeedback && isSelected ? (isCorrectOption ? <Icons.Check /> : <Icons.X />) : String.fromCharCode(65 + i)}
                      </span>
                      <span className="text-sm md:text-base text-neutral-700">{option}</span>
                    </div>
                  </motion.button>
                );
              })}
            </div>
            <AnimatePresence>
              {showFeedback && (
                <motion.div initial={{ opacity: 0, y: 40 }} animate={{ opacity: 1, y: 0 }} exit={{ opacity: 0 }} className={`p-5 rounded-xl border-2 ${isCorrect ? 'bg-green-50 border-green-300' : 'bg-amber-50 border-amber-300'}`}>
                  <p className="font-bold mb-2 text-lg">{isCorrect ? 'üéâ Brilliant!' : 'üí™ Almost!'}</p>
                  <p className="text-neutral-700 text-sm md:text-base">{isCorrect ? data.feedback.correct : data.feedback.incorrect}</p>
                </motion.div>
              )}
            </AnimatePresence>
          </motion.div>
        </div>
      );
    };

    const ActionChecklistSlide = ({ data }) => (
      <div className="h-full flex flex-col items-center justify-center px-6 py-12 overflow-y-auto hide-scrollbar">
        <motion.div initial={{ opacity: 0, y: 40 }} animate={{ opacity: 1, y: 0 }} className="max-w-2xl w-full">
          <h2 className="title-font text-3xl md:text-4xl font-black text-neutral-900 mb-8 text-center">{data.title}</h2>
          <div className="space-y-4">
            {data.items.map((item, i) => (
              <motion.div key={i} initial={{ opacity: 0, x: -20 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.1 * i }} className="flex items-start gap-4 p-4 bg-neutral-50 rounded-xl border border-neutral-200">
                <span className="flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold text-neutral-900" style={{ backgroundColor: 'var(--accent)' }}>{i + 1}</span>
                <p className="text-neutral-700 text-sm md:text-base pt-1">{item}</p>
              </motion.div>
            ))}
          </div>
        </motion.div>
      </div>
    );

    const CompletionSlide = ({ nextLesson }) => (
      <div className="h-full flex flex-col items-center justify-center text-center px-8 hide-scrollbar overflow-y-auto py-8">
        <motion.div initial={{ opacity: 0, scale: 0 }} animate={{ opacity: 1, scale: 1 }} transition={{ type: 'spring', duration: 0.5 }} className="w-16 h-16 rounded-xl flex items-center justify-center mb-4 text-white" style={{ background: 'linear-gradient(135deg, var(--accent), var(--accent-dark))', boxShadow: '0 6px 24px rgba(var(--accent-rgb), 0.35)' }}><Icons.Check /></motion.div>
        <motion.h2 initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.15 }} className="slide-title text-2xl md:text-3xl text-black mb-3">Lesson Complete</motion.h2>
        <motion.p initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.25 }} className="text-neutral-500 text-sm mb-5 max-w-md leading-relaxed">You have the formula: Volume + Diversity + Measurement = Winning system. The AI handles targeting. You handle creative production.</motion.p>
        {nextLesson && (
          <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.35 }} className="bg-neutral-900 rounded-xl p-5 max-w-md w-full mb-4">
            <p className="text-neutral-500 text-xs uppercase tracking-wider mb-2">Up Next</p>
            <h3 className="text-white font-bold text-lg mb-1">{nextLesson.title}</h3>
            <p className="text-neutral-400 text-xs">{nextLesson.teaser}</p>
          </motion.div>
        )}
      </div>
    );

    const LessonApp = () => {
      const [currentSlide, setCurrentSlide] = useState(0);
      const [direction, setDirection] = useState(0);
      const [userName] = useState('Builder');
      const [selectedAnswer, setSelectedAnswer] = useState(null);
      const [showFeedback, setShowFeedback] = useState(false);
      const [gifConfig, setGifConfig] = useState(null);

      const showGif = useCallback((url, height, side) => setGifConfig({ url, height, side }), []);
      const hideGif = useCallback(() => setGifConfig(null), []);

      const slide = slides[currentSlide];
      const isFirstSlide = currentSlide === 0;
      const isLastSlide = currentSlide === slides.length - 1;

      const nextSlide = useCallback(() => { if (!isLastSlide) { setDirection(1); setCurrentSlide(prev => prev + 1); setSelectedAnswer(null); setShowFeedback(false); hideGif(); } }, [isLastSlide, hideGif]);
      const prevSlide = useCallback(() => { if (!isFirstSlide) { setDirection(-1); setCurrentSlide(prev => prev - 1); setSelectedAnswer(null); setShowFeedback(false); hideGif(); } }, [isFirstSlide, hideGif]);
      const goToSlide = useCallback((index) => { if (index >= 0 && index < slides.length) { setDirection(index > currentSlide ? 1 : -1); setCurrentSlide(index); setSelectedAnswer(null); setShowFeedback(false); hideGif(); } }, [currentSlide, hideGif]);
      const handleAnswer = useCallback((index) => { setSelectedAnswer(index); setShowFeedback(true); }, []);

      useEffect(() => {
        const handleKeyDown = (e) => {
          if (e.key === 'ArrowRight' && !isLastSlide) nextSlide();
          if (e.key === 'ArrowLeft' && !isFirstSlide) prevSlide();
        };
        window.addEventListener('keydown', handleKeyDown);
        return () => window.removeEventListener('keydown', handleKeyDown);
      }, [nextSlide, prevSlide, isFirstSlide, isLastSlide]);

      const slideVariants = {
        enter: (d) => ({ x: d > 0 ? '100%' : '-100%', opacity: 0 }),
        center: { x: 0, opacity: 1 },
        exit: (d) => ({ x: d < 0 ? '100%' : '-100%', opacity: 0 })
      };

      const renderSlide = () => {
        switch(slide.type) {
          case 'welcome': return <WelcomeSlide data={slide} onStart={nextSlide} userName={userName} onShowGif={showGif} onHideGif={hideGif} />;
          case 'hook': return <HookSlide data={slide} />;
          case 'stats': return <StatsSlide data={slide} />;
          case 'content': return <ContentSlide data={slide} />;
          case 'triangle': return <TriangleSlide data={slide} />;
          case 'cards': return <CardsSlide data={slide} />;
          case 'example': return <ExampleSlide data={slide} />;
          case 'flywheel': return <FlywheelSlide data={slide} />;
          case 'quiz': return <QuizSlide data={slide} onAnswer={handleAnswer} showFeedback={showFeedback} selectedAnswer={selectedAnswer} onShowGif={showGif} onHideGif={hideGif} />;
          case 'action-checklist': return <ActionChecklistSlide data={slide} />;
          case 'completion': return <CompletionSlide nextLesson={LESSON_CONFIG.nextLesson} />;
          default: return null;
        }
      };

      const showPrev = !isFirstSlide;
      const showNext = !isLastSlide && slide.type !== 'welcome';

      return (
        <div className="relative w-full h-screen flex flex-col bg-white overflow-hidden">
          <div className="flex-1 relative overflow-hidden">
            <AnimatePresence initial={false} custom={direction} mode="wait">
              <motion.div key={currentSlide} custom={direction} variants={slideVariants} initial="enter" animate="center" exit="exit" transition={{ type: 'spring', stiffness: 300, damping: 30 }} className="absolute inset-0">
                {renderSlide()}
              </motion.div>
            </AnimatePresence>
          </div>

          {showPrev && (<button onClick={prevSlide} className="absolute left-5 top-1/2 -translate-y-1/2 w-12 h-12 rounded-full bg-white shadow-lg border border-neutral-200 flex items-center justify-center text-neutral-600 hover:text-neutral-900 hover:scale-110 transition-all z-20"><Icons.ChevronLeft /></button>)}
          {showNext && (<button onClick={nextSlide} className="absolute right-5 top-1/2 -translate-y-1/2 w-12 h-12 rounded-full shadow-lg flex items-center justify-center text-neutral-900 hover:scale-110 transition-all z-20" style={{ backgroundColor: 'var(--accent)' }}><Icons.ChevronRight /></button>)}

          <AnimatePresence>
            {gifConfig && (
              <motion.div initial={{ opacity: 0, y: 50 }} animate={{ opacity: 1, y: 0 }} exit={{ opacity: 0, y: 50 }} className={`absolute ${gifConfig.side === 'left' ? 'left-4 md:left-8' : 'right-4 md:right-8'} bottom-0 pointer-events-none`} style={{ zIndex: 15, height: gifConfig.height }}>
                <video autoPlay loop muted playsInline className="h-full w-auto object-contain object-bottom">
                  <source src={gifConfig.url} type="video/mp4" />
                </video>
              </motion.div>
            )}
          </AnimatePresence>

          <div className="px-6 md:px-8 py-5 border-t border-neutral-100 flex-shrink-0 relative z-10">
            <div className="flex items-center justify-center gap-2.5">
              {slides.map((_, i) => (<button key={i} onClick={() => goToSlide(i)} className={`w-2.5 h-2.5 rounded-full transition-all ${i === currentSlide ? 'scale-125' : 'bg-neutral-300 hover:bg-neutral-400'}`} style={i === currentSlide ? { backgroundColor: 'var(--accent)' } : {}} />))}
            </div>
          </div>
        </div>
      );
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<LessonApp />);
  </script>
</body>
</html>
