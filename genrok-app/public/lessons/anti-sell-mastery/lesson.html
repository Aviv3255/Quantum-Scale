<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>The Anti-Sell | Quantum Scale</title>
  <script src="https://cdn.tailwindcss.com" defer></script>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" defer></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" defer></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js" defer></script>
  <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js" defer></script>
  <script src="../shared/greetings.js" defer></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://unpkg.com" crossorigin>
  <link rel="preconnect" href="https://cdn.tailwindcss.com" crossorigin>
  <link rel="preconnect" href="https://pqvvrljykfvhpyvxmwzb.supabase.co" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fraunces:wght@400;500;600;700;800;900&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root { --accent: #10b981; --accent-dark: #059669; --accent-light: #34d399; --accent-rgb: 16, 185, 129; }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: 'Inter', sans-serif; background: transparent; -webkit-font-smoothing: antialiased; }
    .title-font { font-family: 'Fraunces', serif; font-weight: 900; letter-spacing: -0.02em; line-height: 1.1; }
    h1, h2, h3, .slide-title { font-family: 'Fraunces', serif; font-weight: 900; letter-spacing: -0.02em; line-height: 1.1; }
    ::selection { background: var(--accent); color: white; }
    .slide-scroll::-webkit-scrollbar { display: none; }
    .slide-scroll { -ms-overflow-style: none; scrollbar-width: none; }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { motion, AnimatePresence } = window.Motion;
    const { useState, useEffect, useCallback, useMemo } = React;

    const getUserName = () => { const params = new URLSearchParams(window.location.search); return params.get('userName') || 'Builder'; };
    const getInitialSlide = () => { const params = new URLSearchParams(window.location.search); const slide = params.get('slide'); return slide ? parseInt(slide, 10) : 0; };

    const LESSON_CONFIG = {
      id: 'anti-sell-mastery',
      title: 'The Anti-Sell',
      description: 'Why pushing harder kills sales - and how pulling back can make customers chase YOU instead.',
      accentColor: '#10b981',
      duration: '7 min',
      nextLesson: { id: 'three-brains-wallet', title: 'The 3 Brains Controlling Your Customer\'s Wallet', teaser: 'Your customer has THREE brains making buying decisions. Learn which one actually controls the wallet.' }
    };

    // ============ ADMIN REPORTER SYSTEM ============
    let __isAdmin = false;
    window.addEventListener('message', function(e) {
      if (e.data?.type === 'ADMIN_STATUS') {
        __isAdmin = e.data.isAdmin;
      }
    });
    if (window.parent !== window) {
      window.parent.postMessage({ type: 'CHECK_ADMIN_STATUS' }, '*');
    }

    const AdminSlideReportButton = ({ slideIndex, slideType }) => {
      const handleReport = (e) => {
        e.stopPropagation();
        e.preventDefault();
        if (window.parent !== window) {
          window.parent.postMessage({
            type: 'ADMIN_REPORT_REQUEST',
            slideIndex: slideIndex,
            slideType: slideType,
            lessonSlug: LESSON_CONFIG.id,
            elementId: slideType + '-' + slideIndex
          }, '*');
        }
      };

      return (
        <button
          onClick={handleReport}
          title={`Report issue on Slide ${slideIndex + 1} (${slideType})`}
          style={{
            position: 'absolute',
            top: '12px',
            right: '12px',
            width: '32px',
            height: '32px',
            borderRadius: '8px',
            backgroundColor: 'rgba(239, 68, 68, 0.9)',
            color: 'white',
            border: 'none',
            cursor: 'pointer',
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center',
            zIndex: 1000,
            opacity: 0.6,
            transition: 'opacity 0.2s, transform 0.2s',
            boxShadow: '0 2px 8px rgba(0,0,0,0.15)'
          }}
          onMouseEnter={(e) => { e.currentTarget.style.opacity = '1'; e.currentTarget.style.transform = 'scale(1.1)'; }}
          onMouseLeave={(e) => { e.currentTarget.style.opacity = '0.6'; e.currentTarget.style.transform = 'scale(1)'; }}
        >
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
            <path d="m8 2 1.88 1.88"/><path d="M14.12 3.88 16 2"/>
            <path d="M9 7.13v-1a3.003 3.003 0 1 1 6 0v1"/>
            <path d="M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6"/>
            <path d="M12 20v-9"/><path d="M6.53 9C4.6 8.8 3 7.1 3 5"/>
            <path d="M6 13H2"/><path d="M3 21c0-2.1 1.7-3.9 3.8-4"/>
            <path d="M20.97 5c0 2.1-1.6 3.8-3.5 4"/><path d="M22 13h-4"/>
            <path d="M17.2 17c2.1.1 3.8 1.9 3.8 4"/>
          </svg>
        </button>
      );
    };
    // ============ END ADMIN REPORTER SYSTEM ============


    const celebrationGifs = [
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_doing_a_quick_victory_dance_move_high_energy_c_d03b798b-a518-4e6c-bcae-d69b2dd50486_2.mp4',
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_jumping_in_the_air_arms_raised_high_YESSS_cele_201477e8-3df4-405a-bc81-81d1747e5c6c_2.mp4',
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_playing_air_guitar_light_headbanging_rockstar__0702007e-9e84-4d9e-8f99-8ee23d0b65f8_2.mp4',
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_doing_the_running_man_dance_move_vintage_cool__25682b0f-cf4c-4e93-8dcb-6c3dac8135cd_0.mp4',
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_standing_and_clapping_enthusiastically_mouth_o_992ac4fd-9a0e-4963-bbcc-a5271f25f4fd_3.mp4',
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_clapping_very_fast_huge_smile_extreme_exciteme_9a4dde09-55ca-4173-a47d-613bc2924230_2.mp4',
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_clapping_above_head_world_champion_celebration_484bd560-f049-41ca-b3d1-c03d7468ab56_2.mp4',
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_starting_with_slow_clap_accelerating_to_fast_c_ee478a38-0ee7-437d-bd13-d687f7dd624a_0.mp4'
    ];
    const getRandomCelebrationGif = () => celebrationGifs[Math.floor(Math.random() * celebrationGifs.length)];

    const empathyGifs = [
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_thumbs_down_with_encouraging_nod_close_keep_go_613e541f-c072-436f-aee7-f99cd6f834fc_2.mp4',
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_shaking_head_side_to_side_sadly_disappointed_e_c4a4be22-6a70-4738-8612-3039454fef37_1.mp4',
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_covering_face_with_palm_facepalm_gesture_disap_211b0566-078f-4d42-9c41-547b14f5827c_0.mp4',
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_looking_down_sadly_shoulders_slumped_disappoin_790d48bd-e49e-40ea-9979-d3e86fa3a422_2.mp4',
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_wiping_away_a_small_tear_sad_but_gentle_disapp_8d78571b-3c36-4502-abee-81683255843c_1.mp4',
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_sighing_sadly_exhaling_with_disappointment_hea_f6014f2a-3a99-4378-a2a8-414e16b3e72d_2.mp4',
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_slouching_with_disappointment_body_curling_inw_caedddbe-413c-492a-9fdf-1e8433f5e2a8_2%20(1).mp4',
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_placing_hand_on_forehead_sadly_eyes_closed_fru_3e048895-f365-4ff2-9e88-0d0a35b2a9e1_3.mp4',
      'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_nodding_slowly_with_sadness_what_a_shame_expre_377f67ca-63da-41aa-9072-4926fc2f6e82_3.mp4'
    ];
    const getRandomEmpathyGif = () => empathyGifs[Math.floor(Math.random() * empathyGifs.length)];

    const slides = [
      { type: 'welcome', learningGoals: ['Why "Psychological Reactance" makes customers resist your pitch', 'The counter-intuitive power of pulling AWAY instead of pushing', 'How to make customers convince THEMSELVES to buy'] },
      { type: 'hook', headline: '"This product probably isn\'t for you." That one sentence increased conversions by 31%.', subtext: 'It sounds insane. Every marketing instinct says PUSH harder. "Buy now!" "Don\'t miss out!" "Limited time!" But here\'s what actually happens: the harder you push, the harder they resist. It\'s called Psychological Reactance. The brain has an automatic defense against being told what to do. The solution? Stop pushing. Start pulling away. Make them CHASE you.', characterVideo: 'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_calculating_numbers_with_calculator_100_pure_w_b930553b-32c0-4367-bcc5-c1b2c51a9318_2.mp4', characterPosition: 'left' },
      { type: 'reactance-visual', title: 'The Reactance Effect', subtitle: 'When you push, they push back harder' },
      { type: 'push-pull-scale', title: 'The Push vs Pull Gap', data: {
        push: { label: 'Push Harder', value: -31, description: 'Aggressive tactics decrease trust', tactics: ['"Buy NOW!"', '"Don\'t miss out!"', '"Limited time!"'] },
        pull: { label: 'Pull Back', value: 31, description: 'Anti-sell increases conversions', tactics: ['"Take your time"', '"Not for everyone"', '"It\'s okay to wait"'] }
      }},
      { type: 'content', title: 'The Science of Resistance', body: 'Psychological Reactance is the brain\'s automatic defense mechanism. When you feel your freedom is being threatened - when someone is trying to control your decision - your brain rebels. You don\'t just ignore the pitch. You actively move in the OPPOSITE direction. "Buy now!" makes you want to wait. "You need this!" makes you skeptical. "Last chance!" makes you walk away. The pushier the sell, the stronger the pushback. This is why aggressive marketing backfires on sophisticated buyers.', characterVideo: 'https://pqvvrljykfvhpyvxmwzb.supabase.co/storage/v1/object/public/images/aviv3255_He_is_building_something_with_tools_constructing_100_52683f04-d09a-47c4-89a1-84b57476d150_2.mp4', characterPosition: 'right' },
      { type: 'anti-sell-principles', title: 'The 4 Anti-Sell Principles', principles: [
        { number: 1, title: 'Disqualify First', description: '"This isn\'t for everyone. If you\'re looking for quick fixes, this isn\'t it."', effect: 'Makes them want to prove they\'re NOT the wrong fit', icon: 'UserMinus' },
        { number: 2, title: 'Give Permission to Leave', description: '"Honestly, if this doesn\'t feel right, close the page. No pressure."', effect: 'Removes pressure, paradoxically increases desire to stay', icon: 'DoorOpen' },
        { number: 3, title: 'Acknowledge Downsides', description: '"Fair warning: this takes work. Most people quit in week 2."', effect: 'Brutal honesty builds trust. They lower their guard.', icon: 'AlertTriangle' },
        { number: 4, title: 'Make Them Chase', description: '"I\'m not sure I should even share this..."', effect: 'Pulling away creates pursuit. They lean IN when you pull BACK.', icon: 'Magnet' }
      ]},
      { type: 'psychology-triggers', title: 'Why "Not For Everyone" Works', triggers: [
        { name: 'EXCLUSIVITY', description: 'If it\'s not for everyone, it must be special', icon: 'Crown', color: '#8B5CF6' },
        { name: 'IDENTITY', description: 'They want to prove they\'re the RIGHT kind of person', icon: 'User', color: '#3B82F6' },
        { name: 'REACTANCE REVERSAL', description: 'You\'re not pushing, so there\'s nothing to resist', icon: 'RefreshCw', color: '#22C55E' },
        { name: 'CURIOSITY', description: 'Who IS it for then? They need to find out.', icon: 'HelpCircle', color: '#F59E0B' }
      ], insight: 'The customer\'s brain shifts from "Why should I buy?" to "Am I good enough to buy?" That\'s a completely different conversation.' },
      { type: 'before-after-example', title: 'Online Course Sales Page', before: { label: 'Push Strategy', text: '"Enroll NOW! 500+ students already inside! Don\'t miss out on this life-changing opportunity! Only 24 hours left!"', color: '#EF4444' }, after: { label: 'Anti-Sell', text: '"Fair warning: this course is NOT for people who want passive income or quick wins. It\'s 12 weeks of work. Most people aren\'t ready for that. If that\'s you - no problem. This page will still be here if you change your mind."', color: '#22C55E' }, insight: 'The first triggers reactance ("stop pushing me"). The second triggers self-selection ("I AM ready for work!") and eliminates resistance.' },
      { type: 'language-swap-cards', title: 'Anti-Sell Language Swaps', swaps: [
        { before: '"Buy Now!"', after: '"Take your time"', why: 'Removing urgency paradoxically creates it. They think: "Why isn\'t this person pushing? Must not need my money. Must be good."' },
        { before: '"You Need This"', after: '"You Might Not"', why: 'Challenging their need makes them defend it. "Actually, I DO need this!" They\'re now selling themselves.' },
        { before: '"Don\'t Miss Out"', after: '"It\'s Okay to Wait"', why: 'Giving permission to delay makes staying feel like their OWN choice. The resistance melts.' }
      ]},
      { type: 'before-after-example', title: 'High-Ticket Coaching Offer', before: { label: 'Traditional Hard Close', text: '"Spots are filling fast! If you\'re serious about success, you\'ll invest in yourself. Don\'t let fear hold you back. Sign up before it\'s too late!"', color: '#EF4444' }, after: { label: 'Anti-Sell Approach', text: '"I only work with 5 clients at a time, and honestly, I\'m picky. Before we even talk about working together, I need to know: are you actually ready to do the work? Because most people aren\'t. And that\'s fine."', color: '#22C55E' }, insight: 'The first makes them defensive ("stop pressuring me"). The second makes them prove themselves ("I AM ready!"). They\'re now competing for YOUR attention.' },
      { type: 'highlight-box', title: 'The Takeaway Close', body: 'One of the most powerful anti-sell techniques is the "takeaway." Right when they\'re interested, you PULL BACK. "Actually, before you buy, let me make sure this is right for you. What exactly are you hoping to achieve?" This does two things:', highlights: ['It positions you as an advisor, not a salesperson', 'It creates scarcity of YOUR attention, not just the product'], footer: 'When you\'re willing to walk away from a sale, your value goes UP.' },
      { type: 'when-to-use', title: 'When to Use Anti-Sell', works: [
        'Sophisticated buyers who\'ve seen it all',
        'High-ticket offers where trust matters',
        'Markets drowning in pushy competitors',
        'Audiences who value authenticity'
      ], doesntWork: [
        'Impulse purchases needing quick action',
        'Commoditized products with little differentiation',
        'Audiences unfamiliar with your category'
      ], insight: 'If everyone\'s screaming "BUY NOW," your whisper stands out. If everyone\'s already quiet, you might need a different approach.' },
      { type: 'quiz', question: 'A luxury watch brand wants to increase conversions on their $5,000 timepiece. Which approach uses Anti-Sell correctly?', options: ['"Order now and get free shipping! Only 3 left in stock!"', '"These watches take 6 months to craft. Honestly, if you want something quick and trendy, we\'re not it. This is for the 1% who appreciate true craftsmanship."', '"Best watches of 2024! Celebrities love them! Buy before prices go up!"', '"Limited edition release - buy now or regret it forever!"'], correctIndex: 1, feedback: { correct: 'Perfect! This disqualifies the wrong buyers ("quick and trendy"), creates exclusivity ("1% who appreciate craftsmanship"), and never PUSHES. The right buyer leans in harder because they want to BE that 1%. Pure anti-sell psychology.', incorrect: 'The winner is the one that PULLS AWAY: "If you want something quick and trendy, we\'re not it." This disqualifies the wrong buyers and makes the right ones lean in harder to prove they\'re the "1% who appreciate craftsmanship." That\'s anti-sell.' }},
      { type: 'completion', sources: [] }
    ];

    // Icons
    const Icons = {
      Clock: () => <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>,
      Check: () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3"><polyline points="20 6 9 17 4 12"/></svg>,
      X: () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>,
      ArrowLeft: () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></svg>,
      ArrowRight: () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg>,
      Zap: () => <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>,
      ExternalLink: () => <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>,
      Link: () => <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>,
      UserMinus: ({ size = 24, color = 'currentColor' }) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke={color} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="8.5" cy="7" r="4"/><line x1="23" y1="11" x2="17" y2="11"/></svg>,
      DoorOpen: ({ size = 24, color = 'currentColor' }) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke={color} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M13 4h3a2 2 0 0 1 2 2v14"/><path d="M2 20h3"/><path d="M13 20h9"/><path d="M10 12v.01"/><path d="M13 4.562v16.157a1 1 0 0 1-1.242.97L5 20V5.562a2 2 0 0 1 1.515-1.94l4-1A2 2 0 0 1 13 4.561Z"/></svg>,
      AlertTriangle: ({ size = 24, color = 'currentColor' }) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke={color} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>,
      Magnet: ({ size = 24, color = 'currentColor' }) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke={color} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m6 15-4-4 6.75-6.77a7.79 7.79 0 0 1 11 11L13 22l-4-4 6.39-6.36a2.14 2.14 0 0 0-3-3L6 15"/><path d="m5 8 4 4"/><path d="m12 15 4 4"/></svg>,
      Crown: ({ size = 24, color = 'currentColor' }) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke={color} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14"/></svg>,
      User: ({ size = 24, color = 'currentColor' }) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke={color} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>,
      RefreshCw: ({ size = 24, color = 'currentColor' }) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke={color} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/><path d="M21 3v5h-5"/><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/><path d="M8 16H3v5"/></svg>,
      HelpCircle: ({ size = 24, color = 'currentColor' }) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke={color} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>,
      TrendingUp: ({ size = 24, color = 'currentColor' }) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke={color} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/><polyline points="17 6 23 6 23 12"/></svg>,
      TrendingDown: ({ size = 24, color = 'currentColor' }) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke={color} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="23 18 13.5 8.5 8.5 13.5 1 6"/><polyline points="17 18 23 18 23 12"/></svg>,
      CheckCircle: ({ size = 24, color = 'currentColor' }) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke={color} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>,
      XCircle: ({ size = 24, color = 'currentColor' }) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke={color} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></svg>,
      ShieldOff: ({ size = 24, color = 'currentColor' }) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke={color} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M19.69 14a6.9 6.9 0 0 0 .31-2V5l-8-3-3.16 1.18"/><path d="M4.73 4.73 4 5v7c0 6 8 10 8 10a20.29 20.29 0 0 0 5.62-4.38"/><line x1="1" y1="1" x2="23" y2="23"/></svg>,
      Shield: ({ size = 24, color = 'currentColor' }) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke={color} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
    };

    // Animated Counter Component
    const AnimatedCounter = ({ target, suffix = '', prefix = '', duration = 2000 }) => {
      const [count, setCount] = useState(0);
      useEffect(() => {
        let start = 0;
        const absTarget = Math.abs(target);
        const increment = absTarget / (duration / 16);
        const timer = setInterval(() => {
          start += increment;
          if (start >= absTarget) { setCount(absTarget); clearInterval(timer); }
          else { setCount(Math.floor(start)); }
        }, 16);
        return () => clearInterval(timer);
      }, [target, duration]);
      return <span>{prefix}{target < 0 ? '-' : '+'}{count}{suffix}</span>;
    };

    // ============ CUSTOM SLIDE COMPONENTS ============

    // Animated Push Force SVG
    const AnimatedPushForce = ({ animated, direction = 'right' }) => {
      const isRight = direction === 'right';
      return (
        <svg viewBox="0 0 80 80" className="w-16 h-16 md:w-20 md:h-20">
          <defs>
            <linearGradient id={`forceGrad${direction}`} x1="0%" y1="0%" x2="100%" y2="0%">
              <stop offset="0%" stopColor={isRight ? '#EF4444' : 'transparent'} />
              <stop offset="100%" stopColor={isRight ? 'transparent' : '#EF4444'} />
            </linearGradient>
          </defs>
          <circle cx="40" cy="40" r="35" fill="rgba(239, 68, 68, 0.15)" stroke="#EF4444" strokeWidth="2" />
          {[0, 1, 2].map((i) => (
            <motion.line
              key={i}
              x1={isRight ? 20 + i * 8 : 60 - i * 8}
              y1="40"
              x2={isRight ? 35 + i * 8 : 45 - i * 8}
              y2="40"
              stroke="#EF4444"
              strokeWidth="3"
              strokeLinecap="round"
              initial={{ opacity: 0, x: isRight ? -10 : 10 }}
              animate={animated ? { opacity: [0.3, 1, 0.3], x: isRight ? [0, 5, 0] : [0, -5, 0] } : {}}
              transition={{ duration: 1, repeat: Infinity, delay: i * 0.2 }}
            />
          ))}
          <motion.polygon
            points={isRight ? "55,40 45,35 45,45" : "25,40 35,35 35,45"}
            fill="#EF4444"
            initial={{ scale: 0.8 }}
            animate={animated ? { scale: [0.8, 1.1, 0.8] } : {}}
            transition={{ duration: 1, repeat: Infinity }}
            style={{ transformOrigin: '40px 40px' }}
          />
        </svg>
      );
    };

    // Animated Brain SVG with shield activation
    const AnimatedBrainShield = ({ animated }) => (
      <div className="relative w-28 h-28 md:w-36 md:h-36">
        <svg viewBox="0 0 120 120" className="w-full h-full">
          <defs>
            <radialGradient id="brainGlow" cx="50%" cy="50%" r="50%">
              <stop offset="0%" stopColor="rgba(239, 68, 68, 0.3)" />
              <stop offset="100%" stopColor="transparent" />
            </radialGradient>
          </defs>
          {/* Pulsing glow */}
          <motion.circle
            cx="60" cy="60" r="55"
            fill="url(#brainGlow)"
            initial={{ scale: 0.9, opacity: 0.5 }}
            animate={animated ? { scale: [0.9, 1.1, 0.9], opacity: [0.5, 0.8, 0.5] } : {}}
            transition={{ duration: 2, repeat: Infinity }}
          />
          {/* Brain circle */}
          <circle cx="60" cy="60" r="45" fill="#1a1a1a" stroke="#EF4444" strokeWidth="3" />
          {/* Brain icon paths */}
          <g transform="translate(35, 35)" stroke="#EF4444" strokeWidth="2" fill="none">
            <path d="M12.5 2A7.5 7.5 0 0 1 25 12.5v30a7.5 7.5 0 0 1-14.88 1.32 7.5 7.5 0 0 1-8.88-9.24 9 9 0 0 1-1.02-16.74 7.5 7.5 0 0 1 3.96-12.72 7.5 7.5 0 0 1 8.32-3.12" />
            <path d="M37.5 2A7.5 7.5 0 0 0 25 12.5v30a7.5 7.5 0 0 0 14.88 1.32 7.5 7.5 0 0 0 8.88-9.24 9 9 0 0 0 1.02-16.74 7.5 7.5 0 0 0-3.96-12.72 7.5 7.5 0 0 0-8.32-3.12" />
          </g>
        </svg>
        {/* Animated shield */}
        <motion.div
          initial={{ scale: 0, opacity: 0 }}
          animate={animated ? { scale: [1, 1.15, 1], opacity: 1 } : {}}
          transition={{ duration: 1.5, repeat: Infinity }}
          className="absolute -top-1 -right-1 w-10 h-10 md:w-12 md:h-12 rounded-full flex items-center justify-center"
          style={{ background: 'linear-gradient(135deg, #EF4444, #DC2626)', boxShadow: '0 0 20px rgba(239, 68, 68, 0.5)' }}
        >
          <Icons.Shield size={20} color="white" />
        </motion.div>
      </div>
    );

    // Reactance Visual - Animated brain resistance diagram (NO EMOJIS - Pure SVG)
    const ReactanceVisualSlide = ({ data }) => {
      const [animated, setAnimated] = useState(false);
      useEffect(() => { const timer = setTimeout(() => setAnimated(true), 300); return () => clearTimeout(timer); }, []);

      return (
        <div className="h-full flex flex-col justify-center px-6 md:px-12 max-w-4xl mx-auto py-8">
          <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} className="text-center mb-8">
            <div className="inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-semibold mb-4" style={{ background: 'rgba(239, 68, 68, 0.1)', color: '#EF4444' }}>
              <Icons.ShieldOff size={14} color="#EF4444" />
              <span>Psychological Reactance</span>
            </div>
            <h2 className="slide-title text-2xl md:text-3xl lg:text-4xl text-black mb-2">{data.title}</h2>
            <p className="text-neutral-500 text-sm">{data.subtitle}</p>
          </motion.div>

          <motion.div initial={{ opacity: 0, scale: 0.95 }} animate={{ opacity: 1, scale: 1 }} transition={{ delay: 0.2 }} className="rounded-2xl p-6 md:p-10" style={{ background: '#0a0a0a', border: '1px solid #222', boxShadow: '0 0 40px rgba(239, 68, 68, 0.1)' }}>
            <div className="flex items-center justify-center gap-4 md:gap-8">
              {/* Push Arrow - Animated SVG */}
              <motion.div initial={{ x: -50, opacity: 0 }} animate={{ x: 0, opacity: 1 }} transition={{ delay: 0.4 }} className="flex flex-col items-center">
                <AnimatedPushForce animated={animated} direction="right" />
                <span className="text-red-400 font-bold text-sm mt-2">PUSH</span>
              </motion.div>

              {/* Brain with shield - Animated SVG */}
              <motion.div initial={{ scale: 0 }} animate={{ scale: 1 }} transition={{ delay: 0.6, type: 'spring' }}>
                <AnimatedBrainShield animated={animated} />
              </motion.div>

              {/* Push Back Arrow - Animated SVG */}
              <motion.div initial={{ x: 50, opacity: 0 }} animate={{ x: 0, opacity: 1 }} transition={{ delay: 0.8 }} className="flex flex-col items-center">
                <AnimatedPushForce animated={animated} direction="left" />
                <span className="text-red-400 font-bold text-sm mt-2">RESIST</span>
              </motion.div>
            </div>

            <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 1 }} className="mt-8 text-center">
              <div className="inline-flex items-center gap-3 px-4 py-2 rounded-xl" style={{ background: 'rgba(239, 68, 68, 0.1)', border: '1px solid rgba(239, 68, 68, 0.2)' }}>
                <motion.div
                  animate={animated ? { rotate: [0, 10, -10, 0] } : {}}
                  transition={{ duration: 0.5, repeat: Infinity, repeatDelay: 2 }}
                >
                  <Icons.AlertTriangle size={16} color="#EF4444" />
                </motion.div>
                <span className="text-neutral-300 text-sm">The harder you push, the harder they resist. It's automatic.</span>
              </div>
            </motion.div>
          </motion.div>
        </div>
      );
    };

    // Push vs Pull Scale - Visual comparison with animated scale
    const PushPullScaleSlide = ({ data }) => {
      return (
        <div className="h-full flex flex-col justify-center px-6 md:px-12 max-w-4xl mx-auto py-8">
          <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} className="text-center mb-8">
            <div className="inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-semibold mb-4" style={{ background: 'rgba(var(--accent-rgb), 0.1)', color: 'var(--accent)' }}>
              <Icons.Zap />
              <span>The Data</span>
            </div>
            <h2 className="slide-title text-2xl md:text-3xl lg:text-4xl text-black">{data.title}</h2>
          </motion.div>

          <div className="grid md:grid-cols-2 gap-4 mb-6">
            {/* Push Side */}
            <motion.div initial={{ opacity: 0, x: -30 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.2 }} className="rounded-2xl p-5 relative overflow-hidden" style={{ background: '#0a0a0a', border: '1px solid rgba(239, 68, 68, 0.3)', boxShadow: '0 0 30px rgba(239, 68, 68, 0.1)' }}>
              <div className="h-1 w-full absolute top-0 left-0" style={{ background: 'linear-gradient(90deg, transparent, #EF4444, transparent)' }} />
              <div className="flex items-center gap-3 mb-4">
                <div className="w-10 h-10 rounded-xl flex items-center justify-center" style={{ background: 'rgba(239, 68, 68, 0.2)' }}>
                  <Icons.TrendingDown size={20} color="#EF4444" />
                </div>
                <h3 className="text-white font-bold text-lg">{data.data.push.label}</h3>
              </div>
              <div className="text-4xl md:text-5xl font-bold mb-3 title-font" style={{ color: '#EF4444', textShadow: '0 0 20px rgba(239, 68, 68, 0.4)' }}>
                <AnimatedCounter target={data.data.push.value} suffix="%" duration={1500} />
              </div>
              <p className="text-neutral-400 text-sm mb-4">{data.data.push.description}</p>
              <div className="space-y-2">
                {data.data.push.tactics.map((tactic, i) => (
                  <motion.div key={i} initial={{ opacity: 0, x: -10 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.5 + i * 0.1 }} className="flex items-center gap-2">
                    <Icons.X />
                    <span className="text-red-400 text-xs">{tactic}</span>
                  </motion.div>
                ))}
              </div>
            </motion.div>

            {/* Pull Side */}
            <motion.div initial={{ opacity: 0, x: 30 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.3 }} className="rounded-2xl p-5 relative overflow-hidden" style={{ background: '#0a0a0a', border: '1px solid rgba(var(--accent-rgb), 0.3)', boxShadow: '0 0 30px rgba(var(--accent-rgb), 0.1)' }}>
              <div className="h-1 w-full absolute top-0 left-0" style={{ background: 'linear-gradient(90deg, transparent, var(--accent), transparent)' }} />
              <div className="flex items-center gap-3 mb-4">
                <div className="w-10 h-10 rounded-xl flex items-center justify-center" style={{ background: 'rgba(var(--accent-rgb), 0.2)' }}>
                  <Icons.TrendingUp size={20} color="var(--accent)" />
                </div>
                <h3 className="text-white font-bold text-lg">{data.data.pull.label}</h3>
              </div>
              <div className="text-4xl md:text-5xl font-bold mb-3 title-font" style={{ color: 'var(--accent)', textShadow: '0 0 20px rgba(var(--accent-rgb), 0.4)' }}>
                <AnimatedCounter target={data.data.pull.value} suffix="%" duration={1500} />
              </div>
              <p className="text-neutral-400 text-sm mb-4">{data.data.pull.description}</p>
              <div className="space-y-2">
                {data.data.pull.tactics.map((tactic, i) => (
                  <motion.div key={i} initial={{ opacity: 0, x: 10 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.6 + i * 0.1 }} className="flex items-center gap-2">
                    <Icons.Check />
                    <span className="text-green-400 text-xs">{tactic}</span>
                  </motion.div>
                ))}
              </div>
            </motion.div>
          </div>

          <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.9 }} className="rounded-xl p-4 text-center" style={{ background: 'linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(139, 92, 246, 0.05))', border: '1px solid rgba(139, 92, 246, 0.2)' }}>
            <p className="text-neutral-700 text-sm font-medium">Total gap between strategies: <span className="font-bold" style={{ color: '#8B5CF6' }}>62%</span></p>
          </motion.div>
        </div>
      );
    };

    // Anti-Sell Principles Slide
    const AntiSellPrinciplesSlide = ({ data }) => (
      <div className="h-full flex flex-col justify-center px-6 md:px-12 max-w-5xl mx-auto py-8">
        <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} className="text-center mb-6">
          <div className="inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-semibold mb-4" style={{ background: 'rgba(var(--accent-rgb), 0.1)', color: 'var(--accent)' }}>
            <Icons.Zap />
            <span>The Framework</span>
          </div>
          <h2 className="slide-title text-2xl md:text-3xl text-black">{data.title}</h2>
        </motion.div>

        <div className="grid md:grid-cols-2 gap-3">
          {data.principles.map((principle, i) => {
            const IconComponent = Icons[principle.icon] || Icons.Zap;
            const colors = ['#3B82F6', '#8B5CF6', '#F59E0B', '#22C55E'];
            const color = colors[i % colors.length];
            return (
              <motion.div key={i} initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.15 + i * 0.1 }} className="rounded-xl p-4 relative overflow-hidden" style={{ background: '#0a0a0a', border: `1px solid ${color}30`, boxShadow: `0 0 20px ${color}10` }}>
                <div className="h-0.5 w-full absolute top-0 left-0" style={{ background: `linear-gradient(90deg, transparent, ${color}, transparent)` }} />
                <div className="flex items-start gap-3">
                  <div className="w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0" style={{ background: `${color}20`, border: `1px solid ${color}` }}>
                    <span className="font-bold" style={{ color }}>{principle.number}</span>
                  </div>
                  <div className="flex-1">
                    <h3 className="text-white font-bold text-sm mb-1">{principle.title}</h3>
                    <p className="text-neutral-500 text-xs italic mb-2">{principle.description}</p>
                    <p className="text-xs px-2 py-1 rounded inline-block" style={{ background: `${color}15`, color }}>{principle.effect}</p>
                  </div>
                </div>
              </motion.div>
            );
          })}
        </div>
      </div>
    );

    // Psychology Triggers Slide
    const PsychologyTriggersSlide = ({ data }) => (
      <div className="h-full flex flex-col justify-center px-6 md:px-12 max-w-4xl mx-auto py-8">
        <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} className="text-center mb-6">
          <h2 className="slide-title text-2xl md:text-3xl text-black mb-2">{data.title}</h2>
          <p className="text-neutral-500 text-sm">4 triggers fire at once</p>
        </motion.div>

        <div className="grid grid-cols-2 gap-3 mb-6">
          {data.triggers.map((trigger, i) => {
            const IconComponent = Icons[trigger.icon] || Icons.Zap;
            return (
              <motion.div key={i} initial={{ opacity: 0, scale: 0.9 }} animate={{ opacity: 1, scale: 1 }} transition={{ delay: 0.15 + i * 0.1 }} className="rounded-xl p-4 text-center relative overflow-hidden" style={{ background: '#0a0a0a', border: `1px solid ${trigger.color}30` }}>
                <div className="h-0.5 w-full absolute top-0 left-0" style={{ background: `linear-gradient(90deg, transparent, ${trigger.color}, transparent)` }} />
                <div className="w-12 h-12 rounded-xl flex items-center justify-center mx-auto mb-3" style={{ background: `${trigger.color}20` }}>
                  <IconComponent size={24} color={trigger.color} />
                </div>
                <h3 className="font-bold text-sm mb-1" style={{ color: trigger.color }}>{trigger.name}</h3>
                <p className="text-neutral-400 text-xs">{trigger.description}</p>
              </motion.div>
            );
          })}
        </div>

        <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.6 }} className="rounded-xl p-4 text-center" style={{ background: 'linear-gradient(135deg, rgba(var(--accent-rgb), 0.1), rgba(var(--accent-rgb), 0.05))', border: '1px solid rgba(var(--accent-rgb), 0.2)' }}>
          <p className="text-neutral-700 text-sm">{data.insight}</p>
        </motion.div>
      </div>
    );

    // Before/After Example Slide
    const BeforeAfterExampleSlide = ({ data }) => (
      <div className="h-full flex flex-col justify-center px-6 md:px-12 max-w-4xl mx-auto py-8">
        <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} className="text-center mb-6">
          <span className="inline-block px-3 py-1 rounded-full text-xs font-semibold mb-3" style={{ background: 'rgba(var(--accent-rgb), 0.1)', color: 'var(--accent)' }}>Real Example</span>
          <h2 className="slide-title text-xl md:text-2xl text-black">{data.title}</h2>
        </motion.div>

        <div className="grid md:grid-cols-2 gap-4 mb-4">
          <motion.div initial={{ opacity: 0, x: -20 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.15 }} className="rounded-xl p-5 relative overflow-hidden" style={{ background: '#0a0a0a', border: `1px solid ${data.before.color}40` }}>
            <div className="h-1 w-full absolute top-0 left-0" style={{ background: `linear-gradient(90deg, transparent, ${data.before.color}, transparent)` }} />
            <div className="flex items-center gap-2 mb-3">
              <div className="w-6 h-6 rounded-full flex items-center justify-center" style={{ background: data.before.color }}><Icons.X /></div>
              <span className="font-semibold text-sm" style={{ color: data.before.color }}>{data.before.label}</span>
            </div>
            <p className="text-neutral-400 text-sm leading-relaxed italic">"{data.before.text}"</p>
          </motion.div>
          <motion.div initial={{ opacity: 0, x: 20 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.25 }} className="rounded-xl p-5 relative overflow-hidden" style={{ background: '#0a0a0a', border: `1px solid ${data.after.color}40` }}>
            <div className="h-1 w-full absolute top-0 left-0" style={{ background: `linear-gradient(90deg, transparent, ${data.after.color}, transparent)` }} />
            <div className="flex items-center gap-2 mb-3">
              <div className="w-6 h-6 rounded-full flex items-center justify-center" style={{ background: data.after.color }}><Icons.Check /></div>
              <span className="font-semibold text-sm" style={{ color: data.after.color }}>{data.after.label}</span>
            </div>
            <p className="text-neutral-400 text-sm leading-relaxed italic">"{data.after.text}"</p>
          </motion.div>
        </div>

        <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.4 }} className="rounded-xl p-4 text-center" style={{ background: 'linear-gradient(135deg, #1a1a1a, #0a0a0a)', border: '1px solid #333' }}>
          <p className="text-neutral-300 text-sm"><Icons.Zap className="inline mr-2" />{data.insight}</p>
        </motion.div>
      </div>
    );

    // Language Swap Cards Slide
    const LanguageSwapCardsSlide = ({ data }) => (
      <div className="h-full flex flex-col justify-center px-6 md:px-12 max-w-4xl mx-auto py-8">
        <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} className="text-center mb-6">
          <h2 className="slide-title text-2xl md:text-3xl text-black">{data.title}</h2>
        </motion.div>

        <div className="space-y-3">
          {data.swaps.map((swap, i) => (
            <motion.div key={i} initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.15 + i * 0.15 }} className="rounded-xl p-4 relative overflow-hidden" style={{ background: '#0a0a0a', border: '1px solid #333' }}>
              <div className="h-0.5 w-full absolute top-0 left-0" style={{ background: 'linear-gradient(90deg, #EF4444, transparent 30%, transparent 70%, var(--accent))' }} />
              <div className="flex items-center gap-4 mb-3">
                <div className="flex-1 text-center">
                  <span className="text-red-400 font-bold text-sm line-through">{swap.before}</span>
                </div>
                <div className="w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0" style={{ background: 'rgba(var(--accent-rgb), 0.2)' }}>
                  <Icons.ArrowRight />
                </div>
                <div className="flex-1 text-center">
                  <span className="font-bold text-sm" style={{ color: 'var(--accent)' }}>{swap.after}</span>
                </div>
              </div>
              <p className="text-neutral-400 text-xs text-center">{swap.why}</p>
            </motion.div>
          ))}
        </div>
      </div>
    );

    // Highlight Box Slide
    const HighlightBoxSlide = ({ data }) => (
      <div className="h-full flex flex-col justify-center px-6 md:px-12 max-w-3xl mx-auto py-8">
        <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} className="text-center mb-6">
          <h2 className="slide-title text-2xl md:text-3xl text-black">{data.title}</h2>
        </motion.div>

        <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.15 }} className="rounded-2xl p-6 relative overflow-hidden" style={{ background: '#0a0a0a', border: '1px solid rgba(var(--accent-rgb), 0.3)', boxShadow: '0 0 40px rgba(var(--accent-rgb), 0.1)' }}>
          <div className="h-1 w-full absolute top-0 left-0" style={{ background: 'linear-gradient(90deg, transparent, var(--accent), transparent)' }} />
          <p className="text-neutral-300 text-base leading-relaxed mb-6">{data.body}</p>
          <div className="space-y-2 mb-6">
            {data.highlights.map((highlight, i) => (
              <motion.div key={i} initial={{ opacity: 0, x: -10 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.3 + i * 0.1 }} className="flex items-center gap-3">
                <div className="w-6 h-6 rounded-lg flex items-center justify-center flex-shrink-0" style={{ background: 'rgba(var(--accent-rgb), 0.2)' }}>
                  <span className="font-bold text-xs" style={{ color: 'var(--accent)' }}>{i + 1}</span>
                </div>
                <span className="text-white text-sm">{highlight}</span>
              </motion.div>
            ))}
          </div>
          <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} transition={{ delay: 0.5 }} className="p-4 rounded-xl text-center" style={{ background: 'rgba(var(--accent-rgb), 0.1)', border: '1px solid rgba(var(--accent-rgb), 0.2)' }}>
            <p className="font-semibold text-sm" style={{ color: 'var(--accent)' }}>{data.footer}</p>
          </motion.div>
        </motion.div>
      </div>
    );

    // When To Use Slide
    const WhenToUseSlide = ({ data }) => (
      <div className="h-full flex flex-col justify-center px-6 md:px-12 max-w-4xl mx-auto py-8">
        <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} className="text-center mb-6">
          <h2 className="slide-title text-2xl md:text-3xl text-black">{data.title}</h2>
        </motion.div>

        <div className="grid md:grid-cols-2 gap-4 mb-4">
          <motion.div initial={{ opacity: 0, x: -20 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.15 }} className="rounded-xl p-5 relative overflow-hidden" style={{ background: '#0a0a0a', border: '1px solid rgba(var(--accent-rgb), 0.3)' }}>
            <div className="h-1 w-full absolute top-0 left-0" style={{ background: 'linear-gradient(90deg, transparent, var(--accent), transparent)' }} />
            <div className="flex items-center gap-2 mb-4">
              <Icons.CheckCircle size={20} color="var(--accent)" />
              <span className="font-bold text-white text-sm">Works Best For</span>
            </div>
            <div className="space-y-2">
              {data.works.map((item, i) => (
                <motion.div key={i} initial={{ opacity: 0, x: -10 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.25 + i * 0.08 }} className="flex items-center gap-2">
                  <div className="w-1.5 h-1.5 rounded-full" style={{ background: 'var(--accent)' }} />
                  <span className="text-neutral-400 text-xs">{item}</span>
                </motion.div>
              ))}
            </div>
          </motion.div>

          <motion.div initial={{ opacity: 0, x: 20 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.25 }} className="rounded-xl p-5 relative overflow-hidden" style={{ background: '#0a0a0a', border: '1px solid rgba(107, 114, 128, 0.3)' }}>
            <div className="h-1 w-full absolute top-0 left-0" style={{ background: 'linear-gradient(90deg, transparent, #6B7280, transparent)' }} />
            <div className="flex items-center gap-2 mb-4">
              <Icons.XCircle size={20} color="#6B7280" />
              <span className="font-bold text-white text-sm">Less Effective For</span>
            </div>
            <div className="space-y-2">
              {data.doesntWork.map((item, i) => (
                <motion.div key={i} initial={{ opacity: 0, x: 10 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.35 + i * 0.08 }} className="flex items-center gap-2">
                  <div className="w-1.5 h-1.5 rounded-full bg-neutral-500" />
                  <span className="text-neutral-500 text-xs">{item}</span>
                </motion.div>
              ))}
            </div>
          </motion.div>
        </div>

        <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.5 }} className="rounded-xl p-4 text-center" style={{ background: 'linear-gradient(135deg, rgba(var(--accent-rgb), 0.1), rgba(var(--accent-rgb), 0.05))', border: '1px solid rgba(var(--accent-rgb), 0.2)' }}>
          <p className="text-neutral-700 text-sm">{data.insight}</p>
        </motion.div>
      </div>
    );

    // ============ STANDARD SLIDE COMPONENTS ============

    const WelcomeSlide = ({ data, onStart, userName, onShowGif, onHideGif }) => {
      const welcomeData = useMemo(() => getTimeBasedWelcome(), []);
      const gifSide = useMemo(() => Math.random() > 0.5 ? 'left' : 'right', []);
      useEffect(() => { onShowGif(welcomeData.gif, '65%', gifSide); return () => onHideGif(); }, [welcomeData.gif, gifSide, onShowGif, onHideGif]);

      return (
        <div className="h-full w-full relative overflow-hidden">
          <div className="h-full flex flex-col items-center justify-center text-center px-6 py-4 relative z-20">
            <motion.h1 initial={{ opacity: 0, y: 40 }} animate={{ opacity: 1, y: 0 }} className="title-font text-3xl sm:text-4xl md:text-5xl lg:text-6xl text-black mb-2 md:mb-3">{LESSON_CONFIG.title}</motion.h1>
            <motion.p initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.1 }} className="text-neutral-600 text-base md:text-lg lg:text-xl mb-2 md:mb-3 max-w-lg leading-relaxed" dangerouslySetInnerHTML={{ __html: formatGreeting(welcomeData.greeting, `<span class="font-bold text-neutral-900">${userName}</span>`) }} />
            <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.15 }} className="flex items-center justify-center gap-1.5 text-neutral-400 text-[10px] md:text-xs mb-2 md:mb-3"><Icons.Clock /><span>{LESSON_CONFIG.duration}</span></motion.div>
            <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.2 }} className="bg-neutral-900 rounded-xl md:rounded-2xl p-3 md:p-5 mb-3 md:mb-4 max-w-sm w-full mx-auto">
              <p className="text-neutral-500 text-[9px] md:text-[11px] uppercase tracking-wider mb-2 md:mb-3">In this lesson</p>
              <ul className="space-y-1.5 md:space-y-2">
                {data.learningGoals.map((goal, i) => (
                  <motion.li key={i} initial={{ opacity: 0, x: -10 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.25 + i * 0.05 }} className="flex items-start gap-2 text-left">
                    <span className="w-5 h-5 rounded-md flex items-center justify-center text-[9px] font-bold text-white flex-shrink-0 mt-0.5" style={{ background: `linear-gradient(135deg, var(--accent), var(--accent-dark))` }}>{i + 1}</span>
                    <span className="text-neutral-300 text-[11px] md:text-sm leading-snug">{goal}</span>
                  </motion.li>
                ))}
              </ul>
            </motion.div>
            <motion.button initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.45 }} onClick={onStart} whileHover={{ scale: 1.02 }} whileTap={{ scale: 0.98 }} className="px-6 md:px-7 py-2.5 md:py-3 rounded-xl text-white font-semibold text-sm md:text-base" style={{ background: `linear-gradient(135deg, var(--accent), var(--accent-dark))` }}>Let's Go</motion.button>
          </div>
        </div>
      );
    };

    const HookSlide = ({ data }) => (
      <div className="h-full relative overflow-hidden">
        <div className="h-full flex flex-col justify-center px-6 md:px-16 max-w-3xl mx-auto slide-scroll overflow-y-auto py-8 md:py-10 relative z-10">
          <motion.div initial={{ opacity: 0, y: 40 }} animate={{ opacity: 1, y: 0 }} className="mb-4 md:mb-6">
            <span className="inline-block px-3 py-1 rounded-full text-xs font-semibold mb-3 md:mb-4" style={{ background: `rgba(var(--accent-rgb), 0.1)`, color: 'var(--accent)' }}>The Hook</span>
            <h2 className="slide-title text-2xl md:text-4xl lg:text-5xl text-black leading-tight">{data.headline}</h2>
          </motion.div>
          <motion.p initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.15 }} className="text-base md:text-xl text-neutral-600 leading-relaxed">{data.subtext}</motion.p>
        </div>
        {data.characterVideo && (
          <motion.div initial={{ opacity: 0, y: 40 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.3, duration: 0.6 }}
            className={`absolute bottom-0 ${data.characterPosition === 'left' ? 'left-6' : 'right-6'} z-0 pointer-events-none hidden md:block`}
            style={{ height: '52%', maxHeight: '400px' }}>
            <video autoPlay loop muted playsInline className="h-full w-auto object-contain object-bottom">
              <source src={data.characterVideo} type="video/mp4" />
            </video>
          </motion.div>
        )}
      </div>
    );

    const ContentSlide = ({ data }) => (
      <div className="h-full relative flex flex-col justify-center px-8 md:px-16 max-w-3xl mx-auto slide-scroll overflow-y-auto py-10">
        <motion.h2 initial={{ opacity: 0, y: 40 }} animate={{ opacity: 1, y: 0 }} className="slide-title text-2xl md:text-3xl lg:text-4xl text-black mb-6 relative z-10">{data.title}</motion.h2>
        <motion.p initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.1 }} className="text-base md:text-lg text-neutral-600 leading-relaxed relative z-10">{data.body}</motion.p>

        {data.characterVideo && (
          <motion.div
            initial={{ opacity: 0, y: 40 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ delay: 0.4, duration: 0.6 }}
            className={`absolute bottom-0 ${data.characterPosition === 'left' ? 'left-6' : 'right-6'} z-0 pointer-events-none`}
            style={{ height: '35%', maxHeight: '280px' }}>
            <video autoPlay loop muted playsInline className="h-full w-auto object-contain object-bottom">
              <source src={data.characterVideo} type="video/mp4" />
            </video>
          </motion.div>
        )}
      </div>
    );

    const QuizSlide = ({ data, onShowGif, onHideGif }) => {
      const [selected, setSelected] = useState(null);
      const [showFeedback, setShowFeedback] = useState(false);
      const celebrationGif = useMemo(() => getRandomCelebrationGif(), []);
      const empathyGif = useMemo(() => getRandomEmpathyGif(), []);
      const gifSide = useMemo(() => Math.random() > 0.5 ? 'left' : 'right', []);
      const handleSelect = (index) => { if (showFeedback) return; setSelected(index); setShowFeedback(true); };
      const isCorrect = selected === data.correctIndex;

      useEffect(() => { if (showFeedback) { if (isCorrect) { onShowGif(celebrationGif, '60%', gifSide); } else { onShowGif(empathyGif, '60%', gifSide); } } }, [showFeedback, isCorrect, celebrationGif, empathyGif, gifSide, onShowGif]);
      useEffect(() => { return () => onHideGif(); }, [onHideGif]);

      return (
        <div className="h-full w-full relative overflow-hidden">
          <div className="h-full flex flex-col justify-center px-6 md:px-12 max-w-2xl mx-auto slide-scroll overflow-y-auto py-8 md:py-10 relative z-30">
            <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} className="text-center mb-6 relative z-10">
              <p className="text-xs uppercase tracking-wider text-neutral-400 mb-3">Quick Check</p>
              <h2 className="slide-title text-xl md:text-2xl text-black leading-tight">{data.question}</h2>
            </motion.div>
            <div className="space-y-3 mb-6">
              {data.options.map((option, i) => (
                <motion.button key={i} initial={{ opacity: 0, x: -15 }} animate={{ opacity: 1, x: 0 }} transition={{ delay: 0.08 + i * 0.06 }} onClick={() => handleSelect(i)} disabled={showFeedback} className={`w-full p-4 rounded-xl text-left transition-all border-2 ${showFeedback ? i === data.correctIndex ? 'border-green-500 bg-green-50' : i === selected ? 'border-red-400 bg-red-50' : 'border-neutral-200 bg-white opacity-40' : 'border-neutral-200 bg-white hover:border-neutral-300'}`}>
                  <div className="flex items-center gap-3">
                    <span className={`w-8 h-8 rounded-lg flex items-center justify-center text-sm font-bold transition-all ${showFeedback && i === data.correctIndex ? 'bg-green-500 text-white' : showFeedback && i === selected && !isCorrect ? 'bg-red-400 text-white' : 'bg-neutral-100 text-neutral-500'}`}>
                      {showFeedback && i === data.correctIndex ? <Icons.Check /> : showFeedback && i === selected && !isCorrect ? <Icons.X /> : String.fromCharCode(65 + i)}
                    </span>
                    <span className="text-neutral-700 text-sm md:text-base">{option}</span>
                  </div>
                </motion.button>
              ))}
            </div>
            <AnimatePresence>
              {showFeedback && (
                <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} className={`p-5 rounded-xl ${isCorrect ? 'bg-green-50 border border-green-200' : 'bg-amber-50 border border-amber-200'}`}>
                  <p className={`text-sm leading-relaxed ${isCorrect ? 'text-green-800' : 'text-amber-800'}`}>{isCorrect ? data.feedback.correct : data.feedback.incorrect}</p>
                </motion.div>
              )}
            </AnimatePresence>
          </div>
        </div>
      );
    };

    const CompletionSlide = ({ data }) => (
      <div className="h-full flex flex-col items-center justify-center text-center px-8 slide-scroll overflow-y-auto py-8">
        <motion.div initial={{ opacity: 0, scale: 0 }} animate={{ opacity: 1, scale: 1 }} transition={{ type: 'spring', duration: 0.5 }} className="w-16 h-16 rounded-xl flex items-center justify-center mb-4 text-white" style={{ background: `linear-gradient(135deg, var(--accent), var(--accent-dark))`, boxShadow: `0 6px 24px rgba(var(--accent-rgb), 0.35)` }}><Icons.Check /></motion.div>
        <motion.h2 initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.15 }} className="slide-title text-2xl md:text-3xl text-black mb-3">Lesson Complete</motion.h2>
        <motion.p initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.25 }} className="text-neutral-500 text-sm mb-5 max-w-md leading-relaxed">You now understand the Anti-Sell: why pushing creates resistance, and how pulling back creates pursuit. Go review your sales copy and ask: "Am I pushing or pulling?" The less you chase, the more they come to you.</motion.p>
        <motion.div initial={{ opacity: 0, y: 15 }} animate={{ opacity: 1, y: 0 }} transition={{ delay: 0.35 }} className="bg-neutral-900 rounded-xl p-5 max-w-md w-full mb-4">
          <p className="text-neutral-500 text-xs uppercase tracking-wider mb-2">Up Next</p>
          <h3 className="text-white font-bold text-lg mb-1">{LESSON_CONFIG.nextLesson.title}</h3>
          <p className="text-neutral-400 text-xs">{LESSON_CONFIG.nextLesson.teaser}</p>
        </motion.div>
      </div>
    );

    const LessonApp = () => {
      const [currentSlide, setCurrentSlide] = useState(getInitialSlide());
      const [direction, setDirection] = useState(1);
      const userName = useMemo(() => getUserName(), []);
      const currentSlideRef = React.useRef(0);
      const [gifConfig, setGifConfig] = useState(null);
      const [isAnimating, setIsAnimating] = useState(false);

      const showGif = useCallback((url, height, side) => setGifConfig({ url, height, side }), []);
      const hideGif = useCallback(() => setGifConfig(null), []);

      React.useEffect(() => { currentSlideRef.current = currentSlide; }, [currentSlide]);

      useEffect(() => {
        window.parent.postMessage({
          type: 'LESSON_SLIDE_UPDATE',
          totalSlides: slides.length,
          slideIndex: currentSlide,
          slideType: slides[currentSlide]?.type,
          lessonSlug: LESSON_CONFIG.id
        }, '*');
      }, [currentSlide]);

      const goToSlide = useCallback((newSlide) => {
        if (isAnimating || newSlide < 0 || newSlide >= slides.length) return;
        setIsAnimating(true);
        setDirection(newSlide > currentSlideRef.current ? 1 : -1);
        setCurrentSlide(newSlide);
      }, [isAnimating]);

      const nextSlide = useCallback(() => { if (currentSlideRef.current + 1 < slides.length) goToSlide(currentSlideRef.current + 1); }, [goToSlide]);
      const prevSlide = useCallback(() => { if (currentSlideRef.current - 1 >= 0) goToSlide(currentSlideRef.current - 1); }, [goToSlide]);

      useEffect(() => {
        const handleKeyDown = (e) => {
          if (e.key === 'ArrowRight' || e.key === ' ') { e.preventDefault(); nextSlide(); }
          if (e.key === 'ArrowLeft') { e.preventDefault(); prevSlide(); }
        };
        window.addEventListener('keydown', handleKeyDown);
        return () => window.removeEventListener('keydown', handleKeyDown);
      }, [nextSlide, prevSlide]);

      const slideVariants = {
        enter: (dir) => ({ x: dir > 0 ? '100%' : '-100%', opacity: 0 }),
        center: { x: 0, opacity: 1 },
        exit: (dir) => ({ x: dir > 0 ? '-100%' : '100%', opacity: 0 })
      };

      const renderSlide = (slide) => {
        switch (slide.type) {
          case 'welcome': return <WelcomeSlide data={slide} onStart={nextSlide} userName={userName} onShowGif={showGif} onHideGif={hideGif} />;
          case 'hook': return <HookSlide data={slide} />;
          case 'content': return <ContentSlide data={slide} />;
          case 'reactance-visual': return <ReactanceVisualSlide data={slide} />;
          case 'push-pull-scale': return <PushPullScaleSlide data={slide} />;
          case 'anti-sell-principles': return <AntiSellPrinciplesSlide data={slide} />;
          case 'psychology-triggers': return <PsychologyTriggersSlide data={slide} />;
          case 'before-after-example': return <BeforeAfterExampleSlide data={slide} />;
          case 'language-swap-cards': return <LanguageSwapCardsSlide data={slide} />;
          case 'highlight-box': return <HighlightBoxSlide data={slide} />;
          case 'when-to-use': return <WhenToUseSlide data={slide} />;
          case 'quiz': return <QuizSlide data={slide} onShowGif={showGif} onHideGif={hideGif} />;
          case 'completion': return <CompletionSlide data={slide} />;
          default: return null;
        }
      };

      const showPrev = currentSlide > 0;
      const showNext = currentSlide < slides.length - 1 && slides[currentSlide].type !== 'welcome';

      return (
        <div className="w-full h-screen bg-white flex flex-col relative">
          <div className="flex-1 relative overflow-hidden z-20">
            <AnimatePresence mode="wait" custom={direction} onExitComplete={() => setIsAnimating(false)}>
              <motion.div key={currentSlide} custom={direction} variants={slideVariants} initial="enter" animate="center" exit="exit" transition={{ duration: 0.3, ease: [0.25, 0.1, 0.25, 1] }} className="absolute inset-0">
                {renderSlide(slides[currentSlide])}
                <AdminSlideReportButton slideIndex={currentSlide} slideType={slides[currentSlide].type} />
              </motion.div>
            </AnimatePresence>
            {showPrev && <button onClick={prevSlide} className="absolute left-2 md:left-5 top-1/2 -translate-y-1/2 w-8 h-8 md:w-12 md:h-12 rounded-full bg-neutral-100/80 md:bg-neutral-100 hover:bg-neutral-200 flex items-center justify-center text-neutral-400 md:text-neutral-500 hover:text-neutral-700 transition-all z-10 backdrop-blur-sm md:backdrop-blur-none"><Icons.ArrowLeft /></button>}
            {showNext && <button onClick={nextSlide} className="absolute right-2 md:right-5 top-1/2 -translate-y-1/2 w-8 h-8 md:w-12 md:h-12 rounded-full bg-neutral-100/80 md:bg-neutral-100 hover:bg-neutral-200 flex items-center justify-center text-neutral-400 md:text-neutral-500 hover:text-neutral-700 transition-all z-10 backdrop-blur-sm md:backdrop-blur-none"><Icons.ArrowRight /></button>}
          </div>
          <div className="px-6 md:px-8 py-5 border-t border-neutral-100 flex-shrink-0 relative z-10">
            <div className="flex items-center justify-center gap-2.5">
              {slides.map((_, i) => <button key={i} onClick={() => goToSlide(i)} className="w-2.5 h-2.5 rounded-full transition-all duration-300" style={{ background: i === currentSlide ? 'var(--accent)' : '#d4d4d4', transform: i === currentSlide ? 'scale(1.3)' : 'scale(1)' }} />)}
            </div>
          </div>
          <AnimatePresence>
            {gifConfig && (
              <motion.div initial={{ opacity: 0, y: 30 }} animate={{ opacity: 1, y: 0 }} exit={{ opacity: 0, y: 30 }} transition={{ type: 'spring', stiffness: 100 }} className={`absolute ${gifConfig.side === 'left' ? 'left-4 md:left-8' : 'right-4 md:right-8'} bottom-0 pointer-events-none`} style={{ zIndex: 15, height: gifConfig.height }}>
                <video autoPlay loop muted playsInline className="h-full w-auto object-contain object-bottom" style={{ background: 'transparent', border: 'none', boxShadow: 'none' }}>
                  <source src={gifConfig.url} type="video/mp4" />
                </video>
              </motion.div>
            )}
          </AnimatePresence>
        </div>
      );
    };

    ReactDOM.render(<LessonApp />, document.getElementById('root'));
  </script>
</body>
</html>
